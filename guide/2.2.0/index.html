<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Andres Almiray">
<title>The Griffon Guide</title>
<link rel="stylesheet" href="./css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>The Griffon Guide</h1>
<div class="details">
<span id="author" class="author">Andres Almiray</span><br>
<span id="revnumber">version 2.2.0</span>
<br><span id="revremark">The Desktop/Embedded application framework for the JVM</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_credits_and_acknowledgements">Credits and Acknowledgements</a></li>
</ul>
</li>
<li><a href="#_getting_started">2. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_getting_started_environment_setup">2.1. Environment Setup</a>
<ul class="sectlevel3">
<li><a href="#_jdk">2.1.1. JDK</a></li>
<li><a href="#_gradle">2.1.2. Gradle</a></li>
<li><a href="#_maven">2.1.3. Maven</a></li>
<li><a href="#_ides">2.1.4. IDEs</a></li>
</ul>
</li>
<li><a href="#_getting_started_console_example">2.2. Console Example</a>
<ul class="sectlevel3">
<li><a href="#_creating_a_project">2.2.1. Creating a Project</a></li>
<li><a href="#_getting_started_console_example_layout">2.2.2. Project Layout</a>
<ul class="sectlevel4">
<li><a href="#_gradle_2">Gradle</a></li>
<li><a href="#_getting_started_console_example_model">Model</a></li>
<li><a href="#_getting_started_console_example_controller">Controller</a></li>
<li><a href="#_getting_started_console_example_view">View</a></li>
</ul>
</li>
<li><a href="#_running_the_application">2.2.3. Running the application</a></li>
<li><a href="#_console_example_testing">2.2.4. Testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_overview">3. Application Overview</a>
<ul class="sectlevel2">
<li><a href="#_overview_configuration">3.1. Configuration</a>
<ul class="sectlevel3">
<li><a href="#_basic_configuration">3.1.1. Basic Configuration</a></li>
<li><a href="#_internationalization_support">3.1.2. Internationalization Support</a></li>
<li><a href="#_mutable_configuration">3.1.3. Mutable Configuration</a></li>
</ul>
</li>
<li><a href="#_overview_metadata">3.2. Metadata</a>
<ul class="sectlevel3">
<li><a href="#_overview_metadata_application">3.2.1. Application Metadata</a></li>
<li><a href="#_overview_metadata_feature">3.2.2. Feature</a></li>
<li><a href="#_overview_metadata_environment">3.2.3. Application Environment</a></li>
<li><a href="#_overview_metadata_griffon_environment">3.2.4. Griffon Environment</a></li>
</ul>
</li>
<li><a href="#_overview_lifecycle">3.3. Lifecycle</a>
<ul class="sectlevel3">
<li><a href="#_overview_lifecycle_initialize">3.3.1. Initialize</a></li>
<li><a href="#_overview_lifecycle_startup">3.3.2. Startup</a></li>
<li><a href="#_overview_lifecycle_ready">3.3.3. Ready</a></li>
<li><a href="#_overview_lifecycle_shutdown">3.3.4. Shutdown</a></li>
<li><a href="#_overview_lifecycle_stop">3.3.5. Stop</a></li>
</ul>
</li>
<li><a href="#_overview_modules">3.4. Modules</a>
<ul class="sectlevel3">
<li><a href="#_overview_module_definition">3.4.1. Module Definition</a></li>
<li><a href="#_overview_module_configuration">3.4.2. Module Configuration</a>
<ul class="sectlevel4">
<li><a href="#_overview_instance_binding">Instance Binding</a></li>
<li><a href="#_overview_target_binding">Target Binding</a></li>
<li><a href="#_overview_provider_binding">Provider Binding</a></li>
<li><a href="#_overview_provider_type_binding">Provider Type Binding</a></li>
</ul>
</li>
<li><a href="#_the_guice_injector">3.4.3. The Guice Injector</a></li>
</ul>
</li>
<li><a href="#_overview_shutdown_handlers">3.5. Shutdown Handlers</a></li>
<li><a href="#_overview_startupargs">3.6. Startup Arguments</a></li>
<li><a href="#_overview_context">3.7. Context</a></li>
</ul>
</li>
<li><a href="#_mvc">4. The MVC Pattern</a>
<ul class="sectlevel2">
<li><a href="#_mvc_mvcmanager">4.1. The MVCGroupManager</a></li>
<li><a href="#_mvc_mvcgroups">4.2. MVC Groups</a>
<ul class="sectlevel3">
<li><a href="#_mvc_configuring_mvc_groups">4.2.1. Configuring MVC Groups</a>
<ul class="sectlevel4">
<li><a href="#_disabling_lifecycle_events">Disabling Lifecycle Events</a></li>
<li><a href="#_disabling_instantiation_events">Disabling Instantiation Events</a></li>
<li><a href="#_disabling_destruction_events">Disabling Destruction Events</a></li>
<li><a href="#_disabling_controllers_as_application_event_listeners">Disabling Controllers as Application Event Listeners</a></li>
</ul>
</li>
<li><a href="#_mvc_mvc_group_relationships">4.2.2. MVC Group Relationships</a></li>
<li><a href="#_mvc_mvc_group_context">4.2.3. MVC Group Context</a></li>
</ul>
</li>
<li><a href="#_mvc_mvcaware_transformation">4.3. The @MVCAware Transformation</a></li>
</ul>
</li>
<li><a href="#_models">5. Models</a>
<ul class="sectlevel2">
<li><a href="#_models_binding_swing">5.1. Swing Binding</a>
<ul class="sectlevel3">
<li><a href="#_groovy_bindings">5.1.1. Groovy Bindings</a></li>
</ul>
</li>
<li><a href="#_models_binding_javafx">5.2. JavaFX Binding</a></li>
<li><a href="#_models_observable_transformation">5.3. The @Observable AST Transformation</a></li>
<li><a href="#_models_vetoable_transformation">5.4. The @Vetoable AST Transformation</a></li>
<li><a href="#_models_property_listener_transformation">5.5. The @PropertyListener AST Transformation</a></li>
<li><a href="#_models_fxobservable_transformation">5.6. The @FXObservable AST Transformation</a></li>
</ul>
</li>
<li><a href="#_controllers">6. Controllers</a>
<ul class="sectlevel2">
<li><a href="#_controllers_actions_and_threads">6.1. Actions and Threads</a></li>
<li><a href="#_controllers_actionmanager">6.2. The ActionManager</a>
<ul class="sectlevel3">
<li><a href="#_configuration_examples">6.2.1. Configuration Examples</a></li>
</ul>
</li>
<li><a href="#_controllers_action_handlers">6.3. Action Handlers</a>
<ul class="sectlevel3">
<li><a href="#_implementing_an_action_handler">6.3.1. Implementing an Action Handler</a></li>
<li><a href="#_configuration">6.3.2. Configuration</a></li>
</ul>
</li>
<li><a href="#_controllers_context">6.4. Actions and Contexts</a></li>
</ul>
</li>
<li><a href="#_services">7. Services</a>
<ul class="sectlevel2">
<li><a href="#_life_cycle">7.1. Life Cycle</a></li>
</ul>
</li>
<li><a href="#_views">8. Views</a>
<ul class="sectlevel2">
<li><a href="#_views_windowmanager">8.1. The WindowManager</a>
<ul class="sectlevel3">
<li><a href="#_views_windowmanager_dsl">8.1.1. WindowManager DSL</a></li>
<li><a href="#_views_windowmanager_starting_window">8.1.2. Starting Window</a></li>
<li><a href="#_views_windowmanager_display_handlers">8.1.3. Custom WindowDisplayHandlers</a></li>
</ul>
</li>
<li><a href="#_views_builder_customizers">8.2. BuilderCustomizers</a>
<ul class="sectlevel3">
<li><a href="#_extending_the_ui_dsl">8.2.1. Extending the UI DSL</a></li>
<li><a href="#_default_dsl_nodes">8.2.2. Default DSL Nodes</a>
<ul class="sectlevel4">
<li><a href="#_root">Root</a></li>
<li><a href="#_metacomponent">MetaComponent</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_views_swing">8.3. Swing Specific</a></li>
<li><a href="#_views_javafx">8.4. JavaFX Specific</a></li>
<li><a href="#_views_lanterna">8.5. Lanterna Specific</a></li>
<li><a href="#_views_pivot">8.6. Pivot Specific</a></li>
</ul>
</li>
<li><a href="#_threading">9. Threading</a>
<ul class="sectlevel2">
<li><a href="#_threading_sync">9.1. Synchronous Calls</a></li>
<li><a href="#_threading_async">9.2. Asynchronous Calls</a></li>
<li><a href="#_threading_outside">9.3. Outside Calls</a></li>
<li><a href="#_threading_additional_methods">9.4. Additional Threading Methods</a></li>
<li><a href="#_threading_annotation">9.5. The @Threading Annotation</a></li>
<li><a href="#_threading_transformation">9.6. The @ThreadingAware AST Transformation</a></li>
</ul>
</li>
<li><a href="#_events">10. Events</a>
<ul class="sectlevel2">
<li><a href="#_events_publishing">10.1. Publishing Events</a></li>
<li><a href="#_events_consuming">10.2. Consuming events</a>
<ul class="sectlevel3">
<li><a href="#_examples">10.2.1. Examples</a></li>
</ul>
</li>
<li><a href="#_events_application_events">10.3. Application Events</a></li>
<li><a href="#_events_lifecycle_events">10.4. Lifecycle Events</a></li>
<li><a href="#_events_miscellaneous_events">10.5. Miscellaneous Events</a></li>
<li><a href="#_events_eventpublisher_transformation">10.6. The @EventPublisher AST Transformation</a></li>
</ul>
</li>
<li><a href="#_internationalization">11. Internationalization</a>
<ul class="sectlevel2">
<li><a href="#_internationalization_message_source">11.1. MessageSource</a>
<ul class="sectlevel3">
<li><a href="#_message_formats">11.1.1. Message Formats</a>
<ul class="sectlevel4">
<li><a href="#_standard_format">Standard Format</a></li>
<li><a href="#_map_format">Map Format</a></li>
<li><a href="#_groovy_format">Groovy format</a></li>
</ul>
</li>
<li><a href="#_reference_keys">11.1.2. Reference Keys</a></li>
</ul>
</li>
<li><a href="#_internationalization_message_source_configuration">11.2. MessageSource Configuration</a></li>
<li><a href="#_internationalization_message_source_transformation">11.3. The @MessageSourceAware AST Transformation</a></li>
</ul>
</li>
<li><a href="#_resources">12. Resource Management</a>
<ul class="sectlevel2">
<li><a href="#_resources_locating_resources">12.1. Locating Classpath Resources</a></li>
<li><a href="#_resources_resources_aware_transformation">12.2. The @ResourcesAware AST Transformation</a></li>
<li><a href="#_resources_resource_resolver">12.3. ResourceResolver</a>
<ul class="sectlevel3">
<li><a href="#_message_formats_2">12.3.1. Message Formats</a>
<ul class="sectlevel4">
<li><a href="#_standard_format_2">Standard Format</a></li>
<li><a href="#_map_format_2">Map Format</a></li>
<li><a href="#_groovy_format_2">Groovy format</a></li>
</ul>
</li>
<li><a href="#_type_conversion">12.3.2. Type Conversion</a></li>
<li><a href="#_reference_keys_2">12.3.3. Reference Keys</a></li>
</ul>
</li>
<li><a href="#_resources_resource_resolver_configuration">12.4. ResourceResolver Configuration</a></li>
<li><a href="#_resources_resource_resolver_transformation">12.5. The @ResourceResolverAware AST Transformation</a></li>
<li><a href="#_resources_injected_resources">12.6. Resource Injection</a></li>
<li><a href="#_resources_property_editors">12.7. Property Editors</a></li>
</ul>
</li>
<li><a href="#_addons">13. Addons</a>
<ul class="sectlevel2">
<li><a href="#_addons-addonmanager">13.1. The AddonManager</a></li>
</ul>
</li>
<li><a href="#_testing">14. Testing</a>
<ul class="sectlevel2">
<li><a href="#_testing_unit">14.1. Unit Testing</a>
<ul class="sectlevel3">
<li><a href="#_the_griffonunit_junit_rule">14.1.1. The GriffonUnit JUnit Rule</a>
<ul class="sectlevel4">
<li><a href="#_overriding_module_bindings">Overriding Module Bindings</a>
<ul class="sectlevel5">
<li><a href="#_defining_specific_modules">Defining Specific Modules</a></li>
<li><a href="#_overriding_existing_modules">Overriding Existing Modules</a></li>
<li><a href="#_defining_bindings_on_the_testcase">Defining Bindings on the TestCase</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_testfor_annotation">14.1.2. The @TestFor Annotation</a></li>
</ul>
</li>
<li><a href="#_testing_integration">14.2. Integration Testing</a>
<ul class="sectlevel3">
<li><a href="#_swing">14.2.1. Swing</a></li>
<li><a href="#_pivot">14.2.2. Pivot</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_buildtools">15. Build Tools</a>
<ul class="sectlevel2">
<li><a href="#_buildtools_gvm">15.1. GVM</a></li>
<li><a href="#_buildtools_lazybones">15.2. Lazybones</a>
<ul class="sectlevel3">
<li><a href="#_configuration_2">15.2.1. Configuration</a></li>
<li><a href="#_templates">15.2.2. Templates</a></li>
</ul>
</li>
<li><a href="#_buildtools_gradle">15.3. Gradle</a>
<ul class="sectlevel3">
<li><a href="#_the_griffon_plugin">15.3.1. The "griffon" Plugin</a>
<ul class="sectlevel4">
<li><a href="#_usage">Usage</a></li>
<li><a href="#_convention_properties">Convention properties</a></li>
</ul>
</li>
<li><a href="#_the_griffon_build_plugin">15.3.2. The "griffon-build" Plugin</a>
<ul class="sectlevel4">
<li><a href="#_usage_2">Usage</a></li>
<li><a href="#_tasks">Tasks</a></li>
<li><a href="#_convention_properties_2">Convention Properties</a></li>
</ul>
</li>
<li><a href="#_dependencies">15.3.3. Dependencies</a></li>
</ul>
</li>
<li><a href="#_buildtools_maven">15.4. Maven</a>
<ul class="sectlevel3">
<li><a href="#_plugins">15.4.1. Plugins</a></li>
<li><a href="#_dependencies_2">15.4.2. Dependencies</a></li>
<li><a href="#_repositories">15.4.3. Repositories</a></li>
<li><a href="#_profiles">15.4.4. Profiles</a>
<ul class="sectlevel4">
<li><a href="#_run">Run</a></li>
<li><a href="#_binary">Binary</a></li>
<li><a href="#_distribution">Distribution</a></li>
<li><a href="#_izpack">Izpack</a></li>
<li><a href="#_shade">Shade</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_buildtools_intellij">15.5. IntelliJ IDEA</a></li>
<li><a href="#_buildtools_eclipse">15.6. Eclipse</a></li>
</ul>
</li>
<li><a href="#_contributing">16. Contributing</a>
<ul class="sectlevel2">
<li><a href="#_contributing_issues">16.1. Issues</a>
<ul class="sectlevel3">
<li><a href="#_reviewing_issues">16.1.1. Reviewing issues</a></li>
</ul>
</li>
<li><a href="#_contributing_build">16.2. Build</a>
<ul class="sectlevel3">
<li><a href="#_running_the_test_suite">16.2.1. Running the test suite</a></li>
<li><a href="#_developing_in_intellij_idea">16.2.2. Developing in IntelliJ IDEA</a></li>
</ul>
</li>
<li><a href="#_contributing_patches">16.3. Patches</a>
<ul class="sectlevel3">
<li><a href="#_forking_and_pull_requests">16.3.1. Forking and Pull Requests</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_appendix_migration">Appendix A: Migrating from Griffon 1.x</a>
<ul class="sectlevel2">
<li><a href="#_build_configuration">1.1. Build Configuration</a>
<ul class="sectlevel3">
<li><a href="#_dependencies_3">1.1.1. Dependencies</a></li>
</ul>
</li>
<li><a href="#_runtime_configuration">1.2. Runtime Configuration</a>
<ul class="sectlevel3">
<li><a href="#_application_and_config_scripts">1.2.1. Application and Config Scripts</a></li>
<li><a href="#_builder_script">1.2.2. Builder Script</a></li>
<li><a href="#_events_script">1.2.3. Events Script</a></li>
</ul>
</li>
<li><a href="#_artifacts">1.3. Artifacts</a>
<ul class="sectlevel3">
<li><a href="#_controllers_2">1.3.1. Controllers</a></li>
<li><a href="#_views_2">1.3.2. Views</a></li>
</ul>
</li>
<li><a href="#_lifecycle_scripts">1.4. Lifecycle Scripts</a></li>
<li><a href="#_renamed_methods">1.5. Renamed Methods</a></li>
<li><a href="#_tests">1.6. Tests</a></li>
</ul>
</li>
<li><a href="#_appendix_module_bindings">Appendix B: Module Bindings</a>
<ul class="sectlevel2">
<li><a href="#_core">1.1. Core</a></li>
<li><a href="#_groovy">1.2. Groovy</a></li>
<li><a href="#_swing_2">1.3. Swing</a></li>
<li><a href="#_swing_builder">1.4. Swing Builder</a></li>
<li><a href="#_javafx">1.5. JavaFX</a></li>
<li><a href="#_javafx_builder">1.6. JavaFX Builder</a></li>
<li><a href="#_lanterna">1.7. Lanterna</a></li>
<li><a href="#_lanterna_builder">1.8. Lanterna Builder</a></li>
<li><a href="#_pivot_2">1.9. Pivot</a></li>
<li><a href="#_pivot_builder">1.10. Pivot Builder</a></li>
</ul>
</li>
<li><a href="#_appendix_ast_transformations">Appendix C: AST Transformations</a></li>
<li><a href="#_appendix_sample_applications">Appendix D: Sample Applications</a>
<ul class="sectlevel2">
<li><a href="#_sample_swing">1.1. Swing</a>
<ul class="sectlevel3">
<li><a href="#_sample_swing_model">1.1.1. Model</a></li>
<li><a href="#_sample_swing_controller">1.1.2. Controller</a></li>
<li><a href="#_sample_swing_service">1.1.3. Service</a></li>
<li><a href="#_sample_swing_view">1.1.4. View</a></li>
<li><a href="#_sample_swing_resources">1.1.5. Resources</a></li>
<li><a href="#_sample_swing_statistics">1.1.6. Statistics</a></li>
</ul>
</li>
<li><a href="#_sample_javafx">1.2. JavaFX</a>
<ul class="sectlevel3">
<li><a href="#_sample_javafx_model">1.2.1. Model</a></li>
<li><a href="#_sample_javafx_controller">1.2.2. Controller</a></li>
<li><a href="#_sample_javafx_service">1.2.3. Service</a></li>
<li><a href="#_sample_javafx_view">1.2.4. View</a></li>
<li><a href="#_sample_javafx_resources">1.2.5. Resources</a></li>
<li><a href="#_sample_javafx_statistics">1.2.6. Statistics</a></li>
</ul>
</li>
<li><a href="#_sample_lanterna">1.3. Lanterna</a>
<ul class="sectlevel3">
<li><a href="#_sample_lanterna_model">1.3.1. Model</a></li>
<li><a href="#_sample_lanterna_controller">1.3.2. Controller</a></li>
<li><a href="#_sample_lanterna_service">1.3.3. Service</a></li>
<li><a href="#_sample_lanterna_view">1.3.4. View</a></li>
<li><a href="#_sample_lanterna_resources">1.3.5. Resources</a></li>
<li><a href="#_sample_lanterna_statistics">1.3.6. Statistics</a></li>
</ul>
</li>
<li><a href="#_sample_pivot">1.4. Pivot</a>
<ul class="sectlevel3">
<li><a href="#_sample_pivot_model">1.4.1. Model</a></li>
<li><a href="#_sample_pivot_controller">1.4.2. Controller</a></li>
<li><a href="#_sample_pivot_service">1.4.3. Service</a></li>
<li><a href="#_sample_pivot_view">1.4.4. View</a></li>
<li><a href="#_sample_pivot_resources">1.4.5. Resources</a></li>
<li><a href="#_sample_pivot_statistics">1.4.6. Statistics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_appendix_builder_nodes">Appendix E: Builder Nodes</a>
<ul class="sectlevel2">
<li><a href="#_builder_nodes_swing">1.1. Swing</a></li>
<li><a href="#_builder_nodes_javafx">1.2. JavaFX</a></li>
<li><a href="#_builder_nodes_lanterna">1.3. Lanterna</a></li>
<li><a href="#_builder_nodes_pivot">1.4. Pivot</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/griffon-banner-large.png" alt="Griffon">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Developing desktop/RIA applications on the JVM is a hard task. You have to make
choices upfront during application design that might complicate the implementation,
compromising the user experience; not to mention the amount of configuration needed.</p>
</div>
<div class="paragraph">
<p>RCP solutions like Eclipse RCP and NetBeans RCP are great for developing desktop
applications, not so much for RIAs and applets. Griffon is a framework inspired by
<a href="http://grails.org">Grails</a>, whose aim is to overcome the problems you may encounter
while developing all these types of applications. It brings along popular concepts like</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Convention over Configuration</p>
</li>
<li>
<p>Don&#8217;t Repeat Yourself (DRY)</p>
</li>
<li>
<p>Pervasive MVC</p>
</li>
<li>
<p>Testing supported "out of the box"</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This documentation will take you through getting started with Griffon and building
desktop/RIA applications with the Griffon framework.</p>
</div>
<div class="sect2">
<h3 id="_credits_and_acknowledgements"><a class="anchor" href="#_credits_and_acknowledgements"></a>Credits and Acknowledgements</h3>
<div class="paragraph">
<p>This guide is heavily influenced by the <a href="http://grails.org/doc/latest">Grails Guide</a>.
It simply would not have been possible without the great efforts made by:
<a href="http://twitter.com/graemerocher">Graeme Rocher</a>, <a href="http://twitter.com/pledbrook">Peter Ledbrook</a>,
<a href="http://twitter.com/wangjammer5">Marc Palmer</a>, <a href="http://twitter.com/jeffscottbrown">Jeff Brown</a>
and their sponsor: SpringSource. The Griffon team would like to thank them all
(and the Grails community too!) for making such a great framework and bringing the
fun back to programming applications.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter will help you get started with Griffon by explaining how to download
and install the project, how to use Griffon from within your favorite IDE, and how
to write your first application.</p>
</div>
<div class="sect2">
<h3 id="_getting_started_environment_setup"><a class="anchor" href="#_getting_started_environment_setup"></a>2.1. Environment Setup</h3>
<div class="paragraph">
<p>The following section outlines the minimum environment requirements to get started with Griffon.</p>
</div>
<div class="sect3">
<h4 id="_jdk"><a class="anchor" href="#_jdk"></a>2.1.1. JDK</h4>
<div class="paragraph">
<p><a href="http://java.oracle.com">JDK7</a> is the lowest JVM version supported by Griffon. You can safely use
<a href="http://java.oracle.com">JDK8</a> features such as lambdas too. We strongly suggest to use JDK8 if
you&#8217;re planning to build JavaFX based applications as JavaFX 8 delivers many enhancements over
JavaFX 2.2 (the version included in JDK7).</p>
</div>
</div>
<div class="sect3">
<h4 id="_gradle"><a class="anchor" href="#_gradle"></a>2.1.2. Gradle</h4>
<div class="paragraph">
<p><a href="http://gradle.org">Gradle</a> 2.0 was used to thoroughly test the Griffon source code and as such
is guaranteed to work. We suggest installing <a href="http://gvmtool.net">GVM</a> as a means to keep your
Gradle installation up to date. GVM can also be used to install <a href="http://github.com/pledbrook/lazybones">Lazybones</a>,
a templating tool for creating Griffon projects.</p>
</div>
</div>
<div class="sect3">
<h4 id="_maven"><a class="anchor" href="#_maven"></a>2.1.3. Maven</h4>
<div class="paragraph">
<p>Alternatively you may use Maven instead of Gradle as your build tool of choice. Maven is
a popular choice amongst Java developers, however it&#8217;s our firm belief that Gradle delivers
a much better development and user experience. YMMV.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ides"><a class="anchor" href="#_ides"></a>2.1.4. IDEs</h4>
<div class="paragraph">
<p>Any IDE that supports Gradle and/or Maven can be used to build a Griffon project.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started_console_example"><a class="anchor" href="#_getting_started_console_example"></a>2.2. Console Example</h3>
<div class="sect3">
<h4 id="_creating_a_project"><a class="anchor" href="#_creating_a_project"></a>2.2.1. Creating a Project</h4>
<div class="paragraph">
<p>The first step is to get Lazybones installed on your system. The easiest way to achieve
this goal is to install <a href="http://gvmtool.net">GVM</a> first</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ curl -s get.gvmtool.net | bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install the latest version of Lazybones with the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ gvm install lazybones</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, add the official Griffon Lazybones templates repository to your Lazybones
configuration. Edit <code>$USER_HOME/.lazybones/config.groovy</code> and paste the following
content</p>
</div>
<div class="listingblock">
<div class="title">$USER_HOME/.lazybones/config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>bintrayRepositories = [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">griffon/griffon-lazybones-templates</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">pledbrook/lazybones-templates</span><span class="delimiter">&quot;</span></span>
]</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;re now ready to create the project. You can list all available templates with
the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ lazybones list
Available templates in griffon/griffon-lazybones-templates:

    griffon-javafx-java
    griffon-javafx-groovy
    griffon-lanterna-java
    griffon-lanterna-groovy
    griffon-pivot-java
    griffon-pivot-groovy
    griffon-swing-java
    griffon-swing-groovy
    griffon-plugin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that template names follow a naming convention identifying the main UI toolkit
and main programming language. Alright, let&#8217;s create a simple project using Swing as
main UI toolkit and Groovy as main language</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ lazybones create griffon-swing-groovy console
Creating project from template griffon-swing-groovy (latest) in 'console'
Define value for 'group' [org.example]: console
Define value for 'version' [0.1.0-SNAPSHOT]:
Define value for 'package' [console]:
Define value for 'griffonVersion' [2.2.0]:</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_getting_started_console_example_layout"><a class="anchor" href="#_getting_started_console_example_layout"></a>2.2.2. Project Layout</h4>
<div class="paragraph">
<p>Take a moment to familiarize yourself with the standard Griffon project layout.
Every Griffon project shares the same layout, making it easy to dive in as artifacts
are located in specific directories according to their responsibilities and behavior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>console
├── griffon-app
│   ├── conf
│   ├── controllers
│   ├── i18n
│   ├── lifecycle
│   ├── models
│   ├── resources
│   ├── services
│   └── views
└── src
    ├── integration-test
    │   └── groovy
    ├── main
    │   ├── groovy
    │   └── resources
    └── test
        ├── groovy
        └── resources</code></pre>
</div>
</div>
<div class="paragraph">
<p>Griffon uses "convention over configuration" approach to enable a fast development pace.
This typically means that the name and location of files is used instead of explicit
configuration, hence you need to familiarize yourself with the directory structure provided
by Griffon.</p>
</div>
<div class="paragraph">
<p>Here is a breakdown and links to relevant sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>griffon-app</code> - top level directory for Groovy sources.</p>
<div class="ulist">
<ul>
<li>
<p><code>conf</code> - <a href="#_overview_configuration">Configuration sources</a>.</p>
</li>
<li>
<p><code>models</code> - <a href="#_models">Models</a>.</p>
</li>
<li>
<p><code>views</code> - <a href="#_views">Views</a>.</p>
</li>
<li>
<p><code>controllers</code> - <a href="#_controllers">Controllers</a>.</p>
</li>
<li>
<p><code>services</code> - <a href="#_services">Services</a>.</p>
</li>
<li>
<p><code>resources</code> - <a href="#_resources">Images, properties files, etc</a>.</p>
</li>
<li>
<p><code>i18n</code> - <a href="#_internationalization">Support for internationalization (i18n)</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>src</code> - Supporting sources.</p>
<div class="ulist">
<ul>
<li>
<p><code>main</code> - Other Groovy/Java sources.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>test</code> - <a href="#_testing">Unit tests</a>.</p>
</li>
<li>
<p><code>integration-test</code> - <a href="#_testing">Integration tests</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an screenshot of the finished application running to give you an idea of what
we&#8217;re aiming at with this example . A small Groovy script has been executed, you
can see the result on the bottom right side</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/console-swing-groovy.png" alt="Swing" width="50%" height="50%">
</div>
</div>
<div class="sect4">
<h5 id="_gradle_2"><a class="anchor" href="#_gradle_2"></a>Gradle</h5>
<div class="paragraph">
<p>The following listing shows the Gradle build file generated by the Lazybones template</p>
</div>
<div id="gradle-build-file" class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
</pre></td>
  <td class="code"><pre>buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath <span class="string"><span class="delimiter">'</span><span class="content">org.codehaus.griffon:gradle-griffon-plugin:2.2.0</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">net.saliman:gradle-cobertura-plugin:2.2.6</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.3.1</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">nl.javadude.gradle.plugins:license-gradle-plugin:0.11.0</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">org.gradle.api.plugins:gradle-izpack-plugin:0.2.3</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">com.github.jengelman.gradle.plugins:shadow:1.2.1</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">edu.sc.seis.gradle:macappbundle:2.0.0</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">org.kordamp.gradle:stats-gradle-plugin:0.1.3</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">com.github.ben-manes:gradle-versions-plugin:0.8</span><span class="delimiter">'</span></span>
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">groovy</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.codehaus.griffon.griffon</span><span class="delimiter">'</span></span>

griffon {
    disableDependencyResolution = <span class="predefined-constant">false</span>
    includeGroovyDependencies = <span class="predefined-constant">true</span>
    version = <span class="string"><span class="delimiter">'</span><span class="content">2.2.0</span><span class="delimiter">'</span></span>
    toolkit = <span class="string"><span class="delimiter">'</span><span class="content">swing</span><span class="delimiter">'</span></span>
}

apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/publishing.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/code-coverage.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/code-quality.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/integration-test.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/package.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/docs.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.johnrengelman.shadow</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.kordamp.gradle.stats</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">com.github.ben-manes.versions</span><span class="delimiter">'</span></span>

mainClassName = <span class="string"><span class="delimiter">'</span><span class="content">console.Launcher</span><span class="delimiter">'</span></span>

dependencies {
    compile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-guice:</span><span class="inline"><span class="inline-delimiter">${</span>griffon.version<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>

    runtime(<span class="string"><span class="delimiter">'</span><span class="content">log4j:log4j:1.2.17</span><span class="delimiter">'</span></span>) {
        exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>,         <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-nodeps</span><span class="delimiter">'</span></span>
        exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>,         <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-junit</span><span class="delimiter">'</span></span>
        exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-contrib</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-contrib</span><span class="delimiter">'</span></span>
    }
    runtime <span class="string"><span class="delimiter">'</span><span class="content">org.slf4j:slf4j-log4j12:1.7.7</span><span class="delimiter">'</span></span>

    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-fest-test:</span><span class="inline"><span class="inline-delimiter">${</span>griffon.version<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
    testCompile <span class="string"><span class="delimiter">'</span><span class="content">org.spockframework:spock-core:0.7-groovy-2.0</span><span class="delimiter">'</span></span>
}

<span class="keyword">import</span> <span class="include">com.github.jengelman.gradle.plugins.shadow.transformers.*</span>
shadowJar {
    transform(ServiceFileTransformer)
    transform(ServiceFileTransformer) {
        path = <span class="string"><span class="delimiter">'</span><span class="content">META-INF/griffon</span><span class="delimiter">'</span></span>
    }
    transform(ServiceFileTransformer) {
        path = <span class="string"><span class="delimiter">'</span><span class="content">META-INF/types</span><span class="delimiter">'</span></span>
    }
    transform(PropertiesFileTransformer) {
        paths = [
            <span class="string"><span class="delimiter">'</span><span class="content">META-INF/editors/java.beans.PropertyEditor</span><span class="delimiter">'</span></span>
        ]
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alright, let&#8217;s get started with the code. We&#8217;ll visit the Model first.</p>
</div>
</div>
<div class="sect4">
<h5 id="_getting_started_console_example_model"><a class="anchor" href="#_getting_started_console_example_model"></a>Model</h5>
<div class="paragraph">
<p>The model for this application is simple: it contains properties that hold the script to be
evaluated and the results of the evaluation. Make sure you paste the following code into
<code>griffon-app/models/console/ConsoleModel.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/console/ConsoleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">ConsoleModel</span> {
    <span class="predefined-type">String</span> scriptSource                                  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@Observable</span> <span class="predefined-type">Object</span> scriptResult                      <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@Observable</span> <span class="type">boolean</span> enabled = <span class="predefined-constant">true</span>                   <i class="conum" data-value="3"></i><b>(3)</b>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Holds the script&#8217;s text</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Holds the result of the script&#8217;s execution</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Enable/disable flag</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Griffon Models are <strong><em>not</em></strong> domain classes like the ones you find in Grails; they&#8217;re more akin
to presentation models, and as such, they&#8217;re used to transfer data between Views and Controllers.</p>
</div>
</div>
<div class="sect4">
<h5 id="_getting_started_console_example_controller"><a class="anchor" href="#_getting_started_console_example_controller"></a>Controller</h5>
<div class="paragraph">
<p>The controller is also trivial: throw the contents of the script from the model at an <code>Evaluator</code>,
then store the result back into the model. Make sure you paste the following code into
<code>griffon-app/controllers/console/ConsoleController.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controllers/console/ConsoleController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">ConsoleController</span> {
    <span class="keyword">def</span> model                                                <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    Evaluator evaluator                                      <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> executeScript() {                                   <i class="conum" data-value="3"></i><b>(3)</b>
        model.enabled = <span class="predefined-constant">false</span>
        <span class="keyword">def</span> result
        <span class="keyword">try</span> {
            result = evaluator.evaluate(model.scriptSource)  <i class="conum" data-value="4"></i><b>(4)</b>
        } <span class="keyword">finally</span> {
            model.enabled = <span class="predefined-constant">true</span>
            model.scriptResult = result                      <i class="conum" data-value="5"></i><b>(5)</b>
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Controller action; automatically executed off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Evaluate the script</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Write back result to Model</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Griffon framework will inject references to the other portions of the MVC triad if fields
named <code>model</code>, <code>view</code>, and <code>controller</code> are present in the Model, Controller or View. This allows
us to access the view widgets and the model data if needed. Any other class members annotated with
<code>@javax.inject.Inject</code> participate in dependency injection as laid out by JSR 330, in this case the
controller will get an instance of <code>Evaluator</code> if a suitable implementation is bound.</p>
</div>
<div class="paragraph">
<p>The <code>executeScript</code> <em class="conum">3</em> method will be used later in the View in combination
with a button. You may notice that there&#8217;s no explicit threading management. All Swing developers
know they must obey the Swing Rule: long running computations must run outside of the EDT; all UI
components should be queried/modified inside the EDT. It turns out Griffon is aware of this rule,
making sure an action is called outside of the EDT by default; all bindings made to UI components
via the model will be updated inside the EDT <em class="conum">5</em>. We&#8217;ll setup the bindings in
the next listing.</p>
</div>
<div class="paragraph">
<p>We must create a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> in order to bind <code>Evaluator</code>.
These are the required class definitions</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/Evaluator.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="directive">public</span> <span class="type">interface</span> Evaluator {
    <span class="predefined-type">Object</span> evaluate(<span class="predefined-type">String</span> input)
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/GroovyShellEvaluator.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="type">class</span> <span class="class">GroovyShellEvaluator</span> <span class="directive">implements</span> Evaluator {
    <span class="directive">private</span> GroovyShell shell = <span class="keyword">new</span> GroovyShell()

    <span class="annotation">@Override</span>
    <span class="predefined-type">Object</span> evaluate(<span class="predefined-type">String</span> input) {
        shell.evaluate(input)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>
<span class="keyword">import</span> <span class="include">griffon.swing.SwingWindowDisplayHandler</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.AnnotationUtils.named</span>

<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">'</span><span class="content">swing</span><span class="delimiter">'</span></span>)                                                        <i class="conum" data-value="3"></i><b>(3)</b>
<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(Evaluator)                                                    <i class="conum" data-value="1"></i><b>(1)</b>
            .to(GroovyShellEvaluator)
            .asSingleton()

        bind(SwingWindowDisplayHandler)                                    <i class="conum" data-value="2"></i><b>(2)</b>
            .withClassifier(named(<span class="string"><span class="delimiter">'</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">'</span></span>))
            .to(CenteringWindowDisplayHandler)
            .asSingleton()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Binding definition</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Overriding an existing binding</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Loaded after <code>swing</code> module</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Modules can define several bindings, even override existing bindings. In our particular
case we defined a binding <em class="conum">1</em> for <code>Evaluator</code> and overrode a
binding <em class="conum">2</em> for <code>SwingWindowDisplayHandler</code>. The latter is
supplied by the <code>swing</code> module thus we must mark it as a dependency <em class="conum">3</em>
in our module definition. The implementation of our custom <code>SwingWindowDisplayHandler</code>
is quite trivial, as shown by the following snippet</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/CenteringWindowDisplayHandler.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.swing.DefaultSwingWindowDisplayHandler</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">java.awt.Window</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.swing.support.SwingUtils.centerOnScreen</span>

<span class="type">class</span> <span class="class">CenteringWindowDisplayHandler</span> <span class="directive">extends</span> DefaultSwingWindowDisplayHandler {
    <span class="annotation">@Override</span>
    <span class="type">void</span> show(<span class="annotation">@Nonnull</span> <span class="predefined-type">String</span> name, <span class="annotation">@Nonnull</span> <span class="predefined-type">Window</span> window) {
        centerOnScreen(window)
        <span class="local-variable">super</span>.show(name, window)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This handler is only concerned with centering the window on the screen before showing it.</p>
</div>
</div>
<div class="sect4">
<h5 id="_getting_started_console_example_view"><a class="anchor" href="#_getting_started_console_example_view"></a>View</h5>
<div class="paragraph">
<p>The view classes contain the visual components for your application. Please paste the following code
into <code>griffon-app/views/console/ConsoleView.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/console/ConsoleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">ConsoleView</span> {
    <span class="keyword">def</span> builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">def</span> model                                                                <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            actions {
                action(executeScriptAction,                                  <i class="conum" data-value="2"></i><b>(2)</b>
                    <span class="key">enabled</span>: bind { model.enabled })
            }

            application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],
                <span class="key">pack</span>: <span class="predefined-constant">true</span>, <span class="key">locationByPlatform</span>: <span class="predefined-constant">true</span>, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>,
                <span class="key">iconImage</span>:   imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                <span class="key">iconImages</span>: [imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                             imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-32x32.png</span><span class="delimiter">'</span></span>).image,
                             imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-16x16.png</span><span class="delimiter">'</span></span>).image]) {
                panel(<span class="key">border</span>: emptyBorder(<span class="integer">6</span>)) {
                    borderLayout()

                    scrollPane(<span class="key">constraints</span>: CENTER) {
                        textArea(<span class="key">text</span>: bind(<span class="key">target</span>: model, <span class="string"><span class="delimiter">'</span><span class="content">scriptSource</span><span class="delimiter">'</span></span>),  <i class="conum" data-value="3"></i><b>(3)</b>
                            <span class="key">enabled</span>: bind { model.enabled },                 <i class="conum" data-value="2"></i><b>(2)</b>
                            <span class="key">columns</span>: <span class="integer">40</span>, <span class="key">rows</span>: <span class="integer">10</span>)
                    }

                    hbox(<span class="key">constraints</span>: SOUTH) {
                        button(executeScriptAction)                          <i class="conum" data-value="4"></i><b>(4)</b>
                        hstrut(<span class="integer">5</span>)
                        label(<span class="string"><span class="delimiter">'</span><span class="content">Result:</span><span class="delimiter">'</span></span>)
                        hstrut(<span class="integer">5</span>)
                        textField(<span class="key">editable</span>: <span class="predefined-constant">false</span>,
                                  <span class="key">text</span>: bind { model.scriptResult })         <i class="conum" data-value="5"></i><b>(5)</b>
                    }
                }
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Bind enabled state from model</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Bind script source to model</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Apply controller action by convention</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Bind script result from model</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The View contains a fairly straightforward SwingBuilder script. Griffon will execute these groovy
scripts in context of it&#8217;s <code><a href="api/griffon/util/CompositeBuilder.html" target="_blank">CompositeBuilder</a></code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_application"><a class="anchor" href="#_running_the_application"></a>2.2.3. Running the application</h4>
<div class="paragraph">
<p>Running the application requires you to execute the <code>run</code> task if using Gradle</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ ./gradlew run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or the <code>exec:java</code> plugin goal if using Maven. Take special note that this goal assumes classes
have been compiled already, so it&#8217;s best to pair it up with <code>compile</code> for safe measure. Or better
yet, use the pre-configured <code>run</code> profile, like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ mvn -Prun</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we know the basic structure of a Griffon application and how to run it we turn
to testing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_console_example_testing"><a class="anchor" href="#_console_example_testing"></a>2.2.4. Testing</h4>
<div class="paragraph">
<p>It&#8217;s always a good idea to test out the code we write. It&#8217;s pretty easy to write tests for
regular components such as <code>Evaluator</code> and <code>GroovyShellEvaluator</code>, as they require little
to no external dependencies. Testing Griffon artifacts such as Controllers and Models on the
other hand requires a bit more of effort, but not much as shown by <code>ConsoleControllerTest</code></p>
</div>
<div class="listingblock">
<div class="title">src/test/groovy/console/ConsoleControllerTest.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.ArtifactManager</span>
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.core.test.GriffonUnitRule</span>
<span class="keyword">import</span> <span class="include">griffon.core.test.TestFor</span>
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractTestingModule</span>
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>
<span class="keyword">import</span> <span class="include">org.junit.Test</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.jayway.awaitility.Awaitility.await</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.jayway.awaitility.Awaitility.fieldIn</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.concurrent.TimeUnit.SECONDS</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.notNullValue</span>

<span class="annotation">@TestFor</span>(ConsoleController)                                                   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">ConsoleControllerTest</span> {
    <span class="directive">private</span> ConsoleController controller                                      <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> ArtifactManager artifactManager                                   <i class="conum" data-value="3"></i><b>(3)</b>

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> <span class="directive">final</span> GriffonUnitRule griffon = <span class="keyword">new</span> GriffonUnitRule()              <i class="conum" data-value="4"></i><b>(4)</b>

    <span class="annotation">@Test</span>
    <span class="type">void</span> testExecuteScriptAction() {
        <span class="comment">// given:                                                             </span><i class="conum" data-value="5"></i><b>(5)</b>
        ConsoleModel model = artifactManager.newInstance(ConsoleModel.class)
        controller.model = model

        <span class="comment">// when:                                                              </span><i class="conum" data-value="6"></i><b>(6)</b>
        <span class="predefined-type">String</span> input = <span class="string"><span class="delimiter">'</span><span class="content">var = &quot;Griffon&quot;</span><span class="delimiter">'</span></span>
        model.scriptSource = input
        controller.invokeAction(<span class="string"><span class="delimiter">'</span><span class="content">executeScript</span><span class="delimiter">'</span></span>)

        <span class="comment">// then:                                                              </span><i class="conum" data-value="7"></i><b>(7)</b>
        await().atMost(<span class="integer">2</span>, SECONDS)
            .until(fieldIn(model)
            .ofType(<span class="predefined-type">Object</span>)
            .andWithName(<span class="string"><span class="delimiter">'</span><span class="content">scriptResult</span><span class="delimiter">'</span></span>),
            notNullValue())
        <span class="keyword">assert</span> input == model.scriptResult
    }

    <span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">EchoEvaluator</span> <span class="directive">implements</span> Evaluator {                 <i class="conum" data-value="8"></i><b>(8)</b>
        <span class="annotation">@Override</span>
        <span class="predefined-type">Object</span> evaluate(<span class="predefined-type">String</span> input) {
            input
        }
    }

    <span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>)
    <span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">TestModule</span> <span class="directive">extends</span> AbstractTestingModule {
        <span class="annotation">@Override</span>
        <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
            bind(Evaluator)
                .to(EchoEvaluator)
                .asSingleton()
        }
    }

    <span class="annotation">@Nonnull</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;Module&gt; moduleOverrides() {
        [<span class="keyword">new</span> TestModule()]
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Indicate class under test</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by <code>GriffonUnitRule</code> given <em class="conum">1</em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Injected by <code>GriffonUnitRule</code> via JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Instantiates and configures a <code>GriffonAplication</code> for testing</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Setup collaborators</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Stimulus</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Validate after waiting 2 seconds at most</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At the heart we have the <code>@TestFor</code> <em class="conum">1</em> annotation and a JUnit4 rule:
<code>@GriffonUnitRule</code> <em class="conum">4</em>. These two key elements are responsible for
injecting the required behavior to the test case. <code>@TestFor</code> identifies the type of component,
a Controller in this case, that&#8217;s under test; it assumes a suitable private field <em class="conum">2</em>
to be defined in the testcase. This field is used to inject the instance under test.
The <code>GriffonUnitRule</code> is responsible for bootstrapping a barebones application and putting
together all the required bindings. Notice that the test case can participate in dependency
injection too <em class="conum">3</em>.</p>
</div>
<div class="paragraph">
<p>Running tests requires executing the <code>test</code> task</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ ./gradlew test</code></pre>
</div>
</div>
<div class="paragraph">
<p>A similar command can be invoked with Maven</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ mvn test</code></pre>
</div>
</div>
<div class="paragraph">
<p>These are the basics for getting started with a Griffon project.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>3. Application Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_configuration"><a class="anchor" href="#_overview_configuration"></a>3.1. Configuration</h3>
<div class="paragraph">
<p>It may seem odd that in a framework that embraces "convention-over-configuration"
that we tackle this topic now, but since what configuration there is typically a
one off, it is best to get it out the way.</p>
</div>
<div class="sect3">
<h4 id="_basic_configuration"><a class="anchor" href="#_basic_configuration"></a>3.1.1. Basic Configuration</h4>
<div class="paragraph">
<p>For general configuration Griffon provides a file called <code>griffon-app/conf/Config.groovy</code>.
This file uses Groovy&#8217;s ConfigSlurper which is very similar to Java properties files
except it is pure Groovy hence you can re-use variables and use proper Java types!</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a typical configuration file</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/conf/sample/swing/groovy/Config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.swing.groovy

application {
    title = <span class="string"><span class="delimiter">'</span><span class="content">Swing + Groovy</span><span class="delimiter">'</span></span>
    startupGroups = [<span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span>]
    autoShutdown = <span class="predefined-constant">true</span>
}
mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.swing.groovy.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.swing.groovy.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.swing.groovy.SampleController</span><span class="delimiter">'</span></span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can define this file using Java too</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/conf/sample/swing/java/Config.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.util.AbstractMapResourceBundle</span>;
<span class="keyword">import</span> <span class="include">griffon.util.CollectionUtils</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Config</span> <span class="directive">extends</span> AbstractMapResourceBundle {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> initialize(<span class="annotation">@Nonnull</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; entries) {
        CollectionUtils.map(entries)
            .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>, CollectionUtils.map()
                .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Swing + Java</span><span class="delimiter">&quot;</span></span>)
                .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">startupGroups</span><span class="delimiter">&quot;</span></span>, asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">sample</span><span class="delimiter">&quot;</span></span>))
                .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">autoShutdown</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>)
            )
            .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">mvcGroups</span><span class="delimiter">&quot;</span></span>, CollectionUtils.map()
                .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">sample</span><span class="delimiter">&quot;</span></span>, CollectionUtils.map()
                    .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">sample.swing.java.SampleModel</span><span class="delimiter">&quot;</span></span>)
                    .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">view</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">sample.swing.java.SampleView</span><span class="delimiter">&quot;</span></span>)
                    .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">controller</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">sample.swing.java.SampleController</span><span class="delimiter">&quot;</span></span>)
                )
            );
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you prefer properties files then do the following</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/resources/Config.properties</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre>application.title = Swing + Groovy
application.startupGroups = sample
application.autoShutdown = <span class="predefined-constant">true</span>
mvcGroups.sample.model = sample.swing.groovy.SampleModel
mvcGroups.sample.view = sample.swing.groovy.SampleView
mvcGroups.sample.controller = sample.swing.groovy.SampleController</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Take special note that this file must be placed under <code>griffon-app/resources</code> instead.</p>
</div>
<div class="paragraph">
<p>The application&#8217;s runtime configuration is available through the <code>configuration</code> property
of the application instance. This configuration instance is <strong>read-only</strong>, you can&#8217;t modify
its contents in any way.</p>
</div>
</div>
<div class="sect3">
<h4 id="_internationalization_support"><a class="anchor" href="#_internationalization_support"></a>3.1.2. Internationalization Support</h4>
<div class="paragraph">
<p>Configuration files are i18n aware which means you can append
locale specific strings to a configuration file, for example <code>Config_de_CH.groovy</code>.
Locale suffixes are resolved from least to most specific; for a locale with
<code>language = 'de'</code>, <code>country = 'CH'</code> and <code>variant = 'Basel'</code> the following files are loaded in order</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Config.groovy</code></p>
</li>
<li>
<p><code>Config.properties</code></p>
</li>
<li>
<p><code>Config_de.groovy</code></p>
</li>
<li>
<p><code>Config_de.properties</code></p>
</li>
<li>
<p><code>Config_de_CH.groovy</code></p>
</li>
<li>
<p><code>Config_de_CH.properties</code></p>
</li>
<li>
<p><code>Config_de_CH_Basel.groovy</code></p>
</li>
<li>
<p><code>Config_de_CH_Basel.properties</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The current <code>java.util.Locale</code> is used to determine values for language, country and variant.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mutable_configuration"><a class="anchor" href="#_mutable_configuration"></a>3.1.3. Mutable Configuration</h4>
<div class="paragraph">
<p>As mentioned before, the default application configuration is made <strong>read-only</strong>, however there&#8217;s a way to make it
mutable, you simply must wrap the <code><a href="api/griffon/core/Configuration.html" target="_blank">Configuration</a></code> instance with a <code><a href="api/griffon/core/MutableConfiguration.html" target="_blank">MutableConfiguration</a></code>. You can accomplish
this feat using a <code>javax.inject.Provider</code>, for example</p>
</div>
<div class="listingblock">
<div class="title">com.acme.MutableApplicationConfigurationProvider.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Provider</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;
<span class="keyword">import</span> <span class="include">griffon.core.Configuration</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.DelegatingMutableConfiguration</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MutableApplicationConfigurationProvider</span> <span class="directive">implements</span> <span class="predefined-type">Provider</span>&lt;<span class="predefined-type">Configuration</span>&gt; {  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@Inject</span> <span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationConfig-readonly</span><span class="delimiter">&quot;</span></span>)                                           <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="directive">private</span> <span class="predefined-type">Configuration</span> readOnlyAppConfig;

    <span class="directive">public</span> <span class="predefined-type">Configuration</span> get() {
        <span class="keyword">return</span> <span class="keyword">new</span> DelegatingMutableConfiguration(readOnlyAppConfig);                      <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Must return instances of type <code>griffon.core.Configuration</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Link to read-only configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Wrap it with a default implementation of <code>MutableConfiguration</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You&#8217;ll have to register this provider with a module, making sure that the original configuration binding is redirected
another binding, for example</p>
</div>
<div class="listingblock">
<div class="title">com.acme.ApplicationModule.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">com.acme</span>

<span class="namespace">import</span> <span class="namespace">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;
<span class="keyword">import</span> <span class="include">griffon.core.Configuration</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.DefaultConfiguration</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.AnnotationUtils.named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(<span class="predefined-type">Configuration</span>.class)
            .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationConfig-readonly</span><span class="delimiter">&quot;</span></span>))                           <i class="conum" data-value="1"></i><b>(1)</b>
            .to(DefaultConfiguration.class)
            .asSingleton();

        bind(<span class="predefined-type">Configuration</span>.class)                                                          <i class="conum" data-value="2"></i><b>(2)</b>
            .toProvider(MutableApplicationConfigurationProvider.class)
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Provide a binding with a new classifier</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Override original binding with the mutable configuration provider</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a matter of fact you can make any instance of <code><a href="api/griffon/core/Configuration.html" target="_blank">Configuration</a></code> a mutable one if you follow this pattern.
Remember it&#8217;s very important that you override the original configuration binding using the exact same source type
and classifier (if it exists).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_metadata"><a class="anchor" href="#_overview_metadata"></a>3.2. Metadata</h3>
<div class="paragraph">
<p>The Griffon runtime keeps track of useful metadata that can be consumed by applications.
The following sections describe them with more detail.</p>
</div>
<div class="sect3">
<h4 id="_overview_metadata_application"><a class="anchor" href="#_overview_metadata_application"></a>3.2.1. Application Metadata</h4>
<div class="paragraph">
<p>Access to the application&#8217;s metadata file (<code>application.properties</code>) is available by
querying the <code><a href="api/griffon/core/env/Metadata.html" target="_blank">Metadata</a></code> singleton. Here&#8217;s a snippet of code that shows how to
setup a welcome message that displays the application&#8217;s name and version</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/sample/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.core.env.Metadata</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder

    <span class="annotation">@Inject</span> Metadata metadata

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">pack</span>: <span class="predefined-constant">true</span>,
                <span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>]) {
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, I'm </span><span class="inline"><span class="inline-delimiter">${</span>metadata[<span class="string"><span class="delimiter">'</span><span class="content">application.name</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="content">-</span><span class="inline"><span class="inline-delimiter">${</span>metadata[<span class="string"><span class="delimiter">'</span><span class="content">application.version</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are also a few helpful methods found in <code><a href="api/griffon/core/env/Metadata.html" target="_blank">Metadata</a></code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getApplicationName()</code> - same result as <code>meta['application.name']</code></p>
</li>
<li>
<p><code>getApplicationVersion()</code> - same result as <code>meta['application.version']</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_overview_metadata_feature"><a class="anchor" href="#_overview_metadata_feature"></a>3.2.2. Feature</h4>
<div class="paragraph">
<p>A <code><a href="api/griffon/core/env/Feature.html" target="_blank">Feature</a></code> is a boolean flag that determines if a capability is available to
the application at runtime. <code><a href="api/griffon/core/env/Feature.html" target="_blank">Feature</a></code>s are nothing more than a <code>System</code>
property. Here&#8217;s an example of a module that decides if a specific binding
should be applied over another</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/org/opendolphin/demo/DolphinModule.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> org.opendolphin.demo

<span class="keyword">import</span> <span class="include">griffon.core.env.Feature</span>
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>
<span class="keyword">import</span> <span class="include">org.opendolphin.core.client.comm.ClientConnector</span>
<span class="keyword">import</span> <span class="include">org.opendolphin.demo.injection.HttpClientConnectorProvider</span>
<span class="keyword">import</span> <span class="include">org.opendolphin.demo.injection.InMemoryClientConnectorProvider</span>

<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="type">class</span> <span class="class">DolphinModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ClientConnector)
            .toProvider(InMemoryClientConnectorProvider)
            .asSingleton()

        Feature.withFeature(<span class="string"><span class="delimiter">'</span><span class="content">dolphin.remote</span><span class="delimiter">'</span></span>) {
            bind(ClientConnector)
                .toProvider(HttpClientConnectorProvider)
                .asSingleton()
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The remote option can be enabled when running the application with <code>-Ddolphin.remote=true</code>
or adding the following entry to <code>griffon-app/resources/application.properties</code></p>
</div>
<div class="listingblock">
<div class="title">griffon-app/resources/application.properties</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>dolphin.remote=<span class="predefined-constant">true</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_overview_metadata_environment"><a class="anchor" href="#_overview_metadata_environment"></a>3.2.3. Application Environment</h4>
<div class="paragraph">
<p>A Griffon application can run in several environments, default ones being
<code>DEVELOPMENT</code>, <code>TEST</code> and <code>PRODUCTION</code>. Applications can inspect its current running
environment by means of the <code><a href="api/griffon/core/env/Environment.html" target="_blank">Environment</a></code> enum.</p>
</div>
<div class="paragraph">
<p>The following example enhances the previous one by displaying the current running
environment</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/sample/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.core.env.Metadata</span>
<span class="keyword">import</span> <span class="include">griffon.core.env.Environment</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder

    <span class="annotation">@Inject</span> Metadata metadata
    <span class="annotation">@Inject</span> Environment environment

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">pack</span>: <span class="predefined-constant">true</span>,
                <span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>]) {
                gridLayout <span class="key">cols</span>: <span class="integer">1</span>, <span class="key">rows</span>: <span class="integer">2</span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, I'm </span><span class="inline"><span class="inline-delimiter">${</span>metadata[<span class="string"><span class="delimiter">'</span><span class="content">application.name</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="content">-</span><span class="inline"><span class="inline-delimiter">${</span>metadata[<span class="string"><span class="delimiter">'</span><span class="content">application.version</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Current environment is </span><span class="inline"><span class="inline-delimiter">${</span>environment<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The default environment is DEVELOPMENT. A different value can be specified by setting
a proper value for the <code>griffon.env</code> System property. The <code><a href="api/griffon/core/env/Environment.html" target="_blank">Environment</a></code> class
recognizes the following aliases</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dev</code> - short for <code>development</code>.</p>
</li>
<li>
<p><code>prod</code> - short for <code>production</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have the following options to change the environment value if using <a href="#_buildtools_gradle">Gradle</a> as build tool</p>
</div>
<div class="ulist">
<ul>
<li>
<p>specify the value as a project property named <code>griffonEnv</code>.</p>
</li>
<li>
<p>specify the value in the <code>jvmArgs</code> property of the <code>run</code> task.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_overview_metadata_griffon_environment"><a class="anchor" href="#_overview_metadata_griffon_environment"></a>3.2.4. Griffon Environment</h4>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/env/GriffonEnvironment.html" target="_blank">GriffonEnvironment</a></code> gives you access to the following values</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Griffon version</p>
</li>
<li>
<p>Griffon build date &amp; time (<a href="https://en.wikipedia.org/wiki/ISO_8601" target="blank">ISO 8601</a>)</p>
</li>
<li>
<p>JVM version</p>
</li>
<li>
<p>OS version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an example displaying all values</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/sample/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.core.env.Metadata</span>
<span class="keyword">import</span> <span class="include">griffon.core.env.Environment</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.core.env.GriffonEnvironment.*</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder

    <span class="annotation">@Inject</span> Metadata metadata
    <span class="annotation">@Inject</span> Environment environment

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">pack</span>: <span class="predefined-constant">true</span>,
                <span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>]) {
                gridLayout <span class="key">cols</span>: <span class="integer">1</span>, <span class="key">rows</span>: <span class="integer">6</span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, I'm </span><span class="inline"><span class="inline-delimiter">${</span>metadata[<span class="string"><span class="delimiter">'</span><span class="content">application.name</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="content">-</span><span class="inline"><span class="inline-delimiter">${</span>metadata[<span class="string"><span class="delimiter">'</span><span class="content">application.version</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Current environment is </span><span class="inline"><span class="inline-delimiter">${</span>environment<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Griffon version is </span><span class="inline"><span class="inline-delimiter">${</span>getGriffonVersion()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">Build date/time is </span><span class="inline"><span class="inline-delimiter">${</span>getBuildDateTime()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">JVM version is </span><span class="inline"><span class="inline-delimiter">${</span>getJvmVersion()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
                label <span class="string"><span class="delimiter">&quot;</span><span class="content">OS version is </span><span class="inline"><span class="inline-delimiter">${</span>getOsVersion()<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_lifecycle"><a class="anchor" href="#_overview_lifecycle"></a>3.3. Lifecycle</h3>
<div class="paragraph">
<p>Every Griffon application goes through the same lifecycle phases no matter in which
mode they are running, with the exception of applet mode where there is an additional
phase due to the intrinsic nature of applets. The application&#8217;s lifecycle has been
inspired by JSR-296, the Swing Application Framework.</p>
</div>
<div class="paragraph">
<p>Every phase has an associated lifecycle class that will be invoked at the appropriate
time. Class names match each phase name; you&#8217;ll find them inside <code>griffon-app/lifecycle</code>.</p>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_initialize"><a class="anchor" href="#_overview_lifecycle_initialize"></a>3.3.1. Initialize</h4>
<div class="paragraph">
<p>The initialization phase is the first to be called by the application&#8217;s life cycle.
The application instance has just been created and its configuration has been read.</p>
</div>
<div class="paragraph">
<p>This phase is typically used to tweak the application for the current platform,
including its Look &amp; Feel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Initialize</code> lifecycle handler will be called right after the configuration
has been read but before <a href="#_addons">addons</a> and managers are initialized.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_startup"><a class="anchor" href="#_overview_lifecycle_startup"></a>3.3.2. Startup</h4>
<div class="paragraph">
<p>This phase is responsible for instantiating all MVC groups that have been defined
in the application&#8217;s configuration and that also have been marked as startup groups
in the same configuration file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Startup</code> lifecycle handler will be called after all MVC groups have been
initialized.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_ready"><a class="anchor" href="#_overview_lifecycle_ready"></a>3.3.3. Ready</h4>
<div class="paragraph">
<p>This phase will be called right after <code>Startup</code> with the condition that no pending
events are available in the UI queue. The application&#8217;s main window will be displayed
at the end of this phase.</p>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_shutdown"><a class="anchor" href="#_overview_lifecycle_shutdown"></a>3.3.4. Shutdown</h4>
<div class="paragraph">
<p>Called when the application is about to close. Any artifact can invoke the shutdown
sequence by calling <code>shutdown()</code> on the <code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> instance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Shutdown</code> lifecycle handler will be called after all <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code>s and
event handlers interested in the <code><a href="#_events_lifecycle_events">ShutdownStart</a></code> event.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_stop"><a class="anchor" href="#_overview_lifecycle_stop"></a>3.3.5. Stop</h4>
<div class="paragraph">
<p>This phase is only available when running on applet mode. It will be called when the
applet container invokes <code>destroy()</code> on the applet instance.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_modules"><a class="anchor" href="#_overview_modules"></a>3.4. Modules</h3>
<div class="paragraph">
<p><code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code>s define components that can be injected using the JSR-330 API.
Module definitions are highly influenced by the Guice 3.x API however they do not
impose a strict dependency on Guice.</p>
</div>
<div class="sect3">
<h4 id="_overview_module_definition"><a class="anchor" href="#_overview_module_definition"></a>3.4.1. Module Definition</h4>
<div class="paragraph">
<p>All modules must implement the <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> interface shown next</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="directive">public</span> <span class="type">interface</span> <span class="class">Module</span> {
    <span class="annotation">@Nonnull</span>
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Binding</span>&lt;?&gt;&gt; getBindings();

    <span class="type">void</span> configure();
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>They also require to have a well defined name. This can be achieved by annotating the module
class with <code>@javax.inject.Named</code>. If a value for <code>@javax.inject.Named</code> is not defined then
one will be automatically calculated using the fully qualified class name. For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">org.example</span>;

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// bindings</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in a module named <code>org.example.custom</code>, where as the following definition</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">org.example</span>;

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// bindings</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in a module simply called <code>custom</code>. A module may depend on another module; when
that&#8217;s the case then the bindings of this module are processed after their dependencies. This
allows dependent modules to override bindings made by their dependencies. Module dependencies
are specified using the <code><a href="api/griffon/inject/DependsOn.html" target="_blank">@griffon.inject.DependsOn</a></code> annotation, like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">parent-module</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Named</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// bindings</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_overview_module_configuration"><a class="anchor" href="#_overview_module_configuration"></a>3.4.2. Module Configuration</h4>
<div class="paragraph">
<p>Modules perform their duty by defining bindings, of which there are 4 kinds</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="api/griffon/core/injection/InstanceBinding.html" target="_blank">InstanceBinding</a></p>
</li>
<li>
<p><a href="api/griffon/core/injection/TargetBinding.html" target="_blank">TargetBinding</a></p>
</li>
<li>
<p><a href="api/griffon/core/injection/ProviderBinding.html" target="_blank">ProviderBinding</a></p>
</li>
<li>
<p><a href="api/griffon/core/injection/ProviderTypeBinding.html" target="_blank">ProviderTypeBinding</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bindings have an scope, either <code>singleton</code> or <code>prototype</code>. <code>InstanceBinding</code> is the only
binding that has <code>singleton</code> as implicit scope; this setting can&#8217;t be changed.
All bindings accept a <code>classifier</code> or an <code>classifier_type</code>. Classifiers are annotations that
have been annotated with <code>@javax.inject.Qualifier</code>. You must specify one or the other but
not both; <code>classifier</code> has precedence over <code>classifier_type</code>.</p>
</div>
<div class="sect4">
<h5 id="_overview_instance_binding"><a class="anchor" href="#_overview_instance_binding"></a>Instance Binding</h5>
<div class="paragraph">
<p>This binding is used to define explicit and eager singletons, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(Calculator.class)
    .toInstance(<span class="keyword">new</span> GroovyShellCalculator());</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_overview_target_binding"><a class="anchor" href="#_overview_target_binding"></a>Target Binding</h5>
<div class="paragraph">
<p>This binding enables you to specify the <em>source</em> type and <em>target</em> type. Typically the
<em>source</em> is an interface while the <em>target</em> is a concrete implementation. If the <em>target</em>
is omitted then the binding assumes the <em>source</em> to be a concrete type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(Calculator.class)
    .to(GroovyShellCalculator.class);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_overview_provider_binding"><a class="anchor" href="#_overview_provider_binding"></a>Provider Binding</h5>
<div class="paragraph">
<p>This binding behaves like a factory, giving you the power to decide with extreme precision
how the instance should be created. Bindings of this type require an eager instance of
type <code>javax.inject.Provider</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(Calculator.class)
    .toProvider(<span class="keyword">new</span> CalculatorProvider());</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_overview_provider_type_binding"><a class="anchor" href="#_overview_provider_type_binding"></a>Provider Type Binding</h5>
<div class="paragraph">
<p>Finally we have the most flexible binding as it lets you specify a <code>javax.injectProvider</code>
type that will be used to lazily instantiate the provider before obtaining the type instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(Calculator.class)
    .toProvider(CalculatorProvider.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_guice_injector"><a class="anchor" href="#_the_guice_injector"></a>3.4.3. The Guice Injector</h4>
<div class="paragraph">
<p>The dependency <code>griffon-guide-2.2.0</code> uses <a href="https://github.com/google/guice" target="_blank">Google Guice</a> to implement the JSR-330 API
that <code>griffon-core-2.2.0</code> requires. As an additional feature this dependency can automatically
load Guice modules during startup. The only requirement is a metadata file that defines the module class
that should be loaded.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example that reuses the Quartz Scheduler from <a href="http://onami.apache.org/" target="_blank">Apache Onami</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">org.apache.onami.scheduler.QuartzModule</span>;
<span class="keyword">import</span> <span class="include">com.google.inject.Module</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyQuartzModule</span> <span class="directive">extends</span> QuartzModule {
    <span class="annotation">@Override</span>
   <span class="directive">protected</span> <span class="type">void</span> schedule() {
       scheduleJob(MyJobClass.class);
   }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When compiled this class generates a metadata file at <code>META-INF/services/com.google.inject.Module</code> with
contents similar to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="error">#</span> Generated by org.kordamp.jipsy.processor.service.ServiceProviderProcessor (<span class="float">0.4</span><span class="float">.0</span>)
<span class="error">#</span> Thu, <span class="integer">7</span> Aug <span class="integer">2014</span> <span class="integer">21</span>:<span class="octal">02</span>:<span class="integer">58</span> +<span class="octal">0200</span>
com.acme.MyQuartzModule</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course the usage of <code>@ServiceProviderFor</code> is just a convenience, you can generate the metadata file
by other means. The important thing is that the file must be available in the classpath.</p>
</div>
<div class="paragraph">
<p>Guice modules are added after all Griffon modules, this means they have the chance to override any bindings
set by the Griffon modules.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_shutdown_handlers"><a class="anchor" href="#_overview_shutdown_handlers"></a>3.5. Shutdown Handlers</h3>
<div class="paragraph">
<p>Applications have the option to let particular artifacts abort the shutdown sequence
and/or perform a task while the shutdown sequence is in process. Artifacts that desire
to be part of the shutdown sequence should implement the <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code>
interface and register themselves with the application instance.</p>
</div>
<div class="paragraph">
<p>The contract of a <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code> is very simple</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>boolean canShutdown(GriffonApplication application)</code> - return <strong><code>false</code></strong> to abort the shutdown sequence.</p>
</li>
<li>
<p><code>void onShutdown(GriffonApplication application)</code> - called if the shutdown sequence was not aborted.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code>s will be called on the same order as they were registered.</p>
</div>
</div>
<div class="sect2">
<h3 id="_overview_startupargs"><a class="anchor" href="#_overview_startupargs"></a>3.6. Startup Arguments</h3>
<div class="paragraph">
<p>Command line arguments can be passed to the application and be accessed by calling
<code>getStartupArgs()</code> on the application instance. This will return a copy of the args
(if any) defined at the command line.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a typical example of this feature in development mode</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/sample/ApplicationEventHandler.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>
<span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>

<span class="type">class</span> <span class="class">ApplicationEventHandler</span> <span class="directive">implements</span> <span class="predefined-type">EventHandler</span> {
    <span class="type">void</span> onBootstrapStart(GriffonApplication application) {
        println application.startupArgs
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Arguments must be defined in the build file if using Gradle</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">run {
    args = [<span class="string"><span class="delimiter">'</span><span class="content">one</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">two</span><span class="delimiter">'</span></span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the application with <code>run</code> command results in an output similar to the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ gradle run
:compileJava
:compileGroovy
:processResources
:classes
:run
// logging statements elided
[one, two]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_context"><a class="anchor" href="#_overview_context"></a>3.7. Context</h3>
<div class="paragraph">
<p>A <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> is like a <code>Map</code>, it&#8217;s a storage for key/value pairs that can be used to keep track of any
kind of data. However, unlike regular <code>Map</code>s, <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code>s are hierarchical. Keys found in a child
<code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> have precedence over keys existing in its parent, e.g, a child <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> has the ability
to shadow keys that may be defined up the chain.</p>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> has a default <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> whose parent is set to <code>null</code>. This is the only
case where this property will be null, as the runtime makes sure that a child context will have the right value
set in its parent property when instantiated.</p>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> plays an integral role in <a href="#_mvc_mvc_group_context">MVC Groups</a> and
<a href="#_controllers_context">controller actions</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mvc"><a class="anchor" href="#_mvc"></a>4. The MVC Pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Griffon applications operate with a basic unit called the MVC group. An MVC group
is comprised of 3 member parts: <a href="#_models">Models</a>, <a href="#_views">Views</a> and <a href="#_controllers">Controllers</a>.
However it is possible to add (or even remove) members from an MVC group by carefully
choosing a suitable configuration.</p>
</div>
<div class="paragraph">
<p>MVC groups configuration is setup in <code>Config.groovy</code> located inside <code>griffon-app/conf</code> (or
<code>Config.java</code> if using Java as main language). This file holds an entry for every MVC group
that the application has (not counting those provided by <a href="#_addons">Addons</a>).</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how a typical MVC group configuration looks like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The definition order is very important, it determines the order in which each member
will be initialized. In the previous example both <code>model</code> and <code>view</code> will be initialized
before the <code>controller</code>. Do not mistake initialization for instantiation, as initialization
relies on calling <code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code> on the group member.</p>
</div>
<div class="paragraph">
<p>MVC group configurations accept a special key that defines additional configuration
for that group, as it can be seen in the following snippet</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
    }

    <span class="comment">// MVC Group for &quot;foo&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.FooModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.FooView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.FooController</span><span class="delimiter">'</span></span>
        config {
            key = <span class="string"><span class="delimiter">'</span><span class="content">bar</span><span class="delimiter">'</span></span>
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Values placed under this key become available to MVC members during the call to
<code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code>, as part of the arguments sent to that method. Here&#8217;s how
the <code>FooController</code> can reach the key defined in the configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">FooController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        println args.configuration.config.key
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>While being able to set additional values under this key is certainly an advantage
it would probably be better if those values could be mutated or tweaked, probably
treating them as variables, effectively making a group configuration work as a template.
For that we&#8217;ll have to discuss the <code>MVCGroupManager</code> first.</p>
</div>
<div class="sect2">
<h3 id="_mvc_mvcmanager"><a class="anchor" href="#_mvc_mvcmanager"></a>4.1. The MVCGroupManager</h3>
<div class="paragraph">
<p>This class is responsible for holding the configuration of all MVC groups no matter
how they were defined, which can be either in <code>Config.groovy</code> or in an <a href="#_addon">addon</a> descriptor.</p>
</div>
<div class="paragraph">
<p>During the startup sequence an instance of <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code> will be created
and initialized. Later the application will instruct this instance to create all startup
groups as required. <code>MVCGroupManager</code> has a handful set of methods that deal with
MVC group configuration alone; however those that deal with group instantiation come
in 3 versions, with 2 flavors each (one Groovy, the other Java friendly).</p>
</div>
<div class="paragraph">
<p>Locating a group configuration is easily done by specifying the name you&#8217;re interested in finding</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">MVCGroupConfiguration configuration = application.mvcGroupManager.findConfiguration(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have a configuration reference you can instantiate a group with it by calling
any of the variants of the <code>create</code> method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">MVCGroupConfiguration configuration = application.mvcGroupManager.findConfiguration(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
MVCGroup group1 = configuration.create(<span class="string"><span class="delimiter">'</span><span class="content">foo1</span><span class="delimiter">'</span></span>)
MVCGroup group2 = configuration.create(<span class="string"><span class="delimiter">'</span><span class="content">foo2</span><span class="delimiter">'</span></span>, [<span class="key">someKey</span>: <span class="string"><span class="delimiter">'</span><span class="content">someValue</span><span class="delimiter">'</span></span>])
<span class="comment">// the following will make the group's id match its name</span>
MVCGroup group3 = configuration.create()
MVCGroup group4 = configuration.create(<span class="key">someKey</span>: <span class="string"><span class="delimiter">'</span><span class="content">someValue</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that creating groups with the same name is usually not a good idea. The
default <code>MVCGroupManager</code> will complain when this happens and will automatically spit
out an exception. This behavior may be changed by setting a configuration key in <code>Config.groovy</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">griffon.mvcid.collision = <span class="string"><span class="delimiter">'</span><span class="content">warning</span><span class="delimiter">'</span></span> <span class="comment">// accepted values are 'warning', 'exception' (default)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The manager will log a warning and destroy the previously existing group before instantiating
the new one when 'warning' is the preferred strategy .</p>
</div>
<div class="paragraph">
<p>Now, even though you can create group instances based on their configurations the preferred
way is to call any of <code><a href="api/griffon/core/mvc/MVCGroupManager.html#createMVC()" target="_blank">createMVC()</a></code>,
<code><a href="api/griffon/core/mvc/MVCGroupManager.html#createMVCGroup()" target="_blank">createMVCGroup()</a></code>, <code><a href="api/griffon/core/mvc/MVCGroupManager.html#withMVCGroup()" target="_blank">withMVCGroup()</a></code> or
<code><a href="api/griffon/core/mvc/MVCGroupManager.html#withMVC()" target="_blank">withMVC()</a></code> methods. Any class annotated with the
<a href="#_mvc_mvcaware_transformation">@griffon.transform.MVCAware</a> will also gain access to these methods.</p>
</div>
<div class="paragraph">
<p>Groups will be available by id regardless of how they were instantiated. You can ask
the <code>MVCGroupManager</code> for a particular group at any time, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="keyword">def</span> g1 = application.mvcGroupManager.groups.foo1
<span class="keyword">def</span> g2 = application.mvcGroupManager.findGroup(<span class="string"><span class="delimiter">'</span><span class="content">foo1</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> g3 = application.mvcGroupManager.foo1
<span class="keyword">assert</span> g1 == g2
<span class="keyword">assert</span> g1 == g3</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to query all models, views, controllers and builders on their own.
Say you&#8217;d want to inspect all currently instantiated models, this is how it can be done</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">application.mvcGroupManager.models.each { model -&gt;
    <span class="comment">// do something with model</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mvc_mvcgroups"><a class="anchor" href="#_mvc_mvcgroups"></a>4.2. MVC Groups</h3>
<div class="paragraph">
<p>Now that we know which are the different ways to instantiate MVC groups we can go
back to customizing them.</p>
</div>
<div class="paragraph">
<p>The simplest way is to pass in new values as part of the arguments map that
<code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code> receives, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">MVCGroup group = application.mvcGroupManager.createMVCGroup(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, [<span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>However is you wish to use the special <code>config</code> key that every MVC group configuration
 may have then you must instantiate the group in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">MVCGroupConfiguration configuration = application.mvcGroupManager
                                          .cloneMVCConfiguration(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, [<span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">someValue</span><span class="delimiter">'</span></span>])
MVCGroup group = configuration.create()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can still send custom arguments to the <code>create()</code> method.</p>
</div>
<div class="sect3">
<h4 id="_mvc_configuring_mvc_groups"><a class="anchor" href="#_mvc_configuring_mvc_groups"></a>4.2.1. Configuring MVC Groups</h4>
<div class="paragraph">
<p>The following options are available to all MVC groups as long as you use the <code>config</code> key.</p>
</div>
<div class="sect4">
<h5 id="_disabling_lifecycle_events"><a class="anchor" href="#_disabling_lifecycle_events"></a>Disabling Lifecycle Events</h5>
<div class="paragraph">
<p>Every MVC group triggers a few events during the span of its lifetime. These events
will be sent to the event bus even if no component is interested in handling them.
There may be times when you don&#8217;t want these events to be placed in the event bus
in order to speed up group creation/destruction. Use the following configuration to
gain this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                lifecycle = <span class="predefined-constant">false</span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following events will be disabled with this setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#_events_application_events">InitializeMVCGroup</a></code></p>
</li>
<li>
<p><code><a href="#_events_application_events">CreateMVCGroup</a></code></p>
</li>
<li>
<p><code><a href="#_events_application_events">DestroyMVCGroup</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_instantiation_events"><a class="anchor" href="#_disabling_instantiation_events"></a>Disabling Instantiation Events</h5>
<div class="paragraph">
<p>The Griffon runtime will trigger an event for every artifact it manages. As with
the previous events this one will be sent to the event bus even if no component handles
it. Skipping publication of this event may result in a slight increase of speed during
group instantiation. Use the following configuration to gain this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                instantiation = <span class="predefined-constant">false</span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following events will be disabled with this setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#_events_application_events">NewInstance</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_destruction_events"><a class="anchor" href="#_disabling_destruction_events"></a>Disabling Destruction Events</h5>
<div class="paragraph">
<p>This is the counterpart of the <code>NewInstance</code> event. Skipping publication of this event
may result in a slight increase of speed when a group or any artifact instance is destroyed.
Use the following configuration to gain this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                destruction = <span class="predefined-constant">false</span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following events will be disabled with this setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#_events_application_events">DestroyInstance</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_controllers_as_application_event_listeners"><a class="anchor" href="#_disabling_controllers_as_application_event_listeners"></a>Disabling Controllers as Application Event Listeners</h5>
<div class="paragraph">
<p>Controllers are registered as application event handlers by default when a group is
instantiated. This makes it very convenient to have them react to events placed in
the application&#8217;s event bus. However you may want to avoid this automatic registration
altogether, as it can lead to performance improvements. You can disable this feature
with the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                listener = <span class="predefined-constant">false</span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can still manually register a controller as an application event handler at any time,
with the caveat that it&#8217;s now your responsibility to unregister it when the time is
appropriate, most typically during the group&#8217;s destroy sequence when <code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupDestroy()" target="_blank">mvcGroupDestroy()</a></code>
is invoked.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mvc_mvc_group_relationships"><a class="anchor" href="#_mvc_mvc_group_relationships"></a>4.2.2. MVC Group Relationships</h4>
<div class="paragraph">
<p>Instances of <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a> can be created at any time by any other instance. If an <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a> instance is
created explicitly by another <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a> instance <em>or</em> by an MVC member (such as a <a href="#_controllers">Controller</a>)
then a special link is established: the newly created <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a> will have access to its parent <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example. Assuming the following <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a> configuration is in place</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="string"><span class="delimiter">'</span><span class="content">app</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">org.example.AppModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">org.example.AppView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">org.example.AppController</span><span class="delimiter">'</span></span>
    },
    <span class="string"><span class="delimiter">'</span><span class="content">tab</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">org.example.TabModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">org.example.TabView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">org.example.TabController</span><span class="delimiter">'</span></span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>An instance of the <code>app</code> <a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a> can be used to instantiate <code>tab</code> in this way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">MVCGroup appGroup = createMVCGroup(<span class="string"><span class="delimiter">'</span><span class="content">app</span><span class="delimiter">'</span></span>)
MVCGroup tabGroup = appGroup.createMVCGroup(<span class="string"><span class="delimiter">'</span><span class="content">tab</span><span class="delimiter">'</span></span>)
<span class="keyword">assert</span> appGroup == tabGroup.parentGroup</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parent-child relationships are established right after MVC members have been instantiated and can be accessed immediately
inside life-cycle methods such as <code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code>; this comes in handy when a child group adds new UI content to
the parent&#8217;s, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="type">class</span> <span class="class">TabView</span> {
    <span class="directive">private</span> <span class="predefined-type">JComponent</span> tab

    <span class="type">void</span> initUI() {
        tab = ... <span class="comment">// initialize</span>
    }

    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        group.parentGroup.view.tabContainer.addTab(group.mvcId, tab)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a shortcut you may specify additional MVC members as properties using a <code>parent</code> prefix; when this happens the matching
parent MVC members will be injected into the child MVC member. The previous example can be rewritten as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="type">class</span> <span class="class">TabView</span> {
    <span class="directive">private</span> <span class="predefined-type">JComponent</span> tab
    AppView parentView

    <span class="type">void</span> initUI() {
        tab = ... <span class="comment">// initialize</span>
    }

    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        parentView.tabContainer.addTab(group.mvcId, tab)
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
like with the default <code>model</code>, <code>view</code> and <code>controller</code> MVC properties, the <em>parent</em> prefix can only be combined to
form <code>parentModel</code>, <code>parentView</code> and <code>parentController</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_mvc_mvc_group_context"><a class="anchor" href="#_mvc_mvc_group_context"></a>4.2.3. MVC Group Context</h4>
<div class="paragraph">
<p>An <code><a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a></code> has its own <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code>. The parent of this context is set to the context of the owner of this
<code><a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a></code>; thus the parent of all startup <code><a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a></code>s is the application&#8217;s <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code>. In the
previous examples, the context of the <code>app</code> group is set as the parent of the context of the <code>tab</code> group.</p>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> of an <code><a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a></code> has the same lifetime of its owning group, that is, once the owning
<code><a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a></code> is destroyed so is the <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mvc_mvcaware_transformation"><a class="anchor" href="#_mvc_mvcaware_transformation"></a>4.3. The @MVCAware Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to create and destroy MVC groups through a <code>MVCGroupManager</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/MVCAware.html" target="_blank">@griffon.transform.MVCAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/mvc/MVCHandler.html" target="_blank">MVCHandler</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to work with MVC groups</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.MVCAware
<span class="type">class</span> <span class="class">Bean</span> {
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="type">void</span> buildSecondary(<span class="predefined-type">String</span> groupName) {
        <span class="keyword">def</span> (m, v, c) = bean.createMVC(groupName)
        <span class="comment">// do something with m, v and c</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_models"><a class="anchor" href="#_models"></a>5. Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describe models and all binding options.</p>
</div>
<div class="paragraph">
<p>Models are very simple in nature. Their responsibility is to hold data that can be
used by both Controller and View to communicate with each other. In other words,
Models are <strong>not</strong> equivalent to domain classes.</p>
</div>
<div class="sect2">
<h3 id="_models_binding_swing"><a class="anchor" href="#_models_binding_swing"></a>5.1. Swing Binding</h3>
<div class="paragraph">
<p>Binding in Griffon is achieved by leveraging Java Beans' <code>java.beans.PropertyChangeEvent</code>
and their related classes, thus binding will work with any class that fires this type of
event, regardless of its usage of <code><a href="api/griffon/transform/Observable.html" target="_blank">@griffon.transform.Observable</a></code> or not.</p>
</div>
<div class="sect3">
<h4 id="_groovy_bindings"><a class="anchor" href="#_groovy_bindings"></a>5.1.1. Groovy Bindings</h4>
<div class="paragraph">
<p>The following options are available for writing bindings using the <code>bind</code> node when Groovy is the source language</p>
</div>
<div class="paragraph">
<div class="title">Long</div>
<p>The most complete of all three, you must specify both ends of the binding explicitly. The following snippet sets an
unidirectional binding from <code>bean1.prop1</code> to <code>bean2.prop2</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">bind(<span class="key">source</span>: bean1, <span class="key">sourceProperty</span>: <span class="string"><span class="delimiter">'</span><span class="content">prop1</span><span class="delimiter">'</span></span>,
     <span class="key">target</span>: bean2, <span class="key">targetProperty</span>: <span class="string"><span class="delimiter">'</span><span class="content">prop2</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Contextual</div>
<p>This type of binding can assume either the sources or the targets depending on the context. The following snippets
set an unidirectional binding from <code>bean1.prop1</code> to <code>bean2.prop2</code></p>
</div>
<div class="listingblock">
<div class="title">Implicit Source</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">bean(bean1, <span class="key">prop1</span>: bind(<span class="key">target</span>: bean2, <span class="key">targetProperty</span>: <span class="string"><span class="delimiter">'</span><span class="content">prop2</span><span class="delimiter">'</span></span>))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Implicit Target</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">bean(bean2, <span class="key">prop2</span>: bind(<span class="key">source</span>: bean1, <span class="key">sourceProperty</span>: <span class="string"><span class="delimiter">'</span><span class="content">prop1</span><span class="delimiter">'</span></span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>When used in this way, either <code>sourceProperty:</code> or <code>targetProperty:</code> can be omitted; the bind node&#8217;s value will become
the property name, in other words</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">bean(bean1, <span class="key">prop1</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">prop2</span><span class="delimiter">'</span></span>, <span class="key">target</span>: bean2))</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Short</div>
<p>This type of binding is only useful for setting implicit targets. It expects a closure as the definition of the binding value</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">bean(bean2, <span class="key">prop2</span>: bind{ bean1.prop1 })</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following properties can be used with either the <strong>long</strong> or <strong>contextual</strong> binding syntax</p>
</div>
<div class="paragraph">
<div class="title">mutual</div>
<p>Bindings are usually setup in one direction. If this property is specified with a value of <code>true</code> then a bidirectional
binding will be created instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>
<span class="keyword">import</span> <span class="include">groovy.swing.SwingBuilder</span>

<span class="type">class</span> <span class="class">MyModel</span> {
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> value
}

<span class="keyword">def</span> model = <span class="keyword">new</span> MyModel()
<span class="keyword">def</span> swing  = <span class="keyword">new</span> SwingBuilder()
swing.edt {
    frame(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Binding</span><span class="delimiter">'</span></span>, <span class="key">pack</span>: <span class="predefined-constant">true</span>, <span class="key">visible</span>: <span class="predefined-constant">true</span>) {
        gridLayout(<span class="key">cols</span>: <span class="integer">2</span>, <span class="key">rows</span>: <span class="integer">3</span>)
        label <span class="string"><span class="delimiter">'</span><span class="content">Normal</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">target</span>: model))
        label <span class="string"><span class="delimiter">'</span><span class="content">Bidirectional</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">target</span>: model, <span class="key">mutual</span>: <span class="predefined-constant">true</span>))
        label <span class="string"><span class="delimiter">'</span><span class="content">Model</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">source</span>: model))
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Typing text on textfield #2 pushes the value to model, which in turns updates textfield #2 and #3, demonstrating that
textfield #2 listens top model updates. Typing text on textfield #2 pushes the value to textfield #3 but not #1,
emonstrating that textfield #1 is not a bidirectional binding.</p>
</div>
<div class="paragraph">
<div class="title">converter</div>
<p>Transforms the value before it is sent to event listeners.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>
<span class="keyword">import</span> <span class="include">groovy.swing.SwingBuilder</span>

<span class="type">class</span> <span class="class">MyModel</span> {
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> value
}

<span class="keyword">def</span> convertValue = { val -&gt;
    <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> * val?.size()
}

<span class="keyword">def</span> model = <span class="keyword">new</span> MyModel()
<span class="keyword">def</span> swing  = <span class="keyword">new</span> SwingBuilder()
swing.edt {
    frame(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Binding</span><span class="delimiter">'</span></span>, <span class="key">pack</span>: <span class="predefined-constant">true</span>, <span class="key">visible</span>: <span class="predefined-constant">true</span>) {
        gridLayout(<span class="key">cols</span>: <span class="integer">2</span>, <span class="key">rows</span>: <span class="integer">3</span>)
        label <span class="string"><span class="delimiter">'</span><span class="content">Normal</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">target</span>: model))
        label <span class="string"><span class="delimiter">'</span><span class="content">Converter</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">target</span>: model, <span class="key">converter</span>: convertValue))
        label <span class="string"><span class="delimiter">'</span><span class="content">Model</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>:  bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">source</span>: model))
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Typing text on textfield #1 pushes the value to the model as expected, which you can inspect by looking at textfield #3.
Typing text on textfield #2 however transform&#8217;s every keystroke into an '*' character.</p>
</div>
<div class="paragraph">
<div class="title">reverseConverter</div>
<p>Transforms the value from the target to the source.</p>
</div>
<div class="paragraph">
<div class="title">validator</div>
<p>Guards the trigger. Prevents the event from being sent if the return value is <code>false</code> or <code>null</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>
<span class="keyword">import</span> <span class="include">groovy.swing.SwingBuilder</span>

<span class="type">class</span> <span class="class">MyModel</span> {
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> value
}

<span class="keyword">def</span> isNumber = { val -&gt;
    <span class="keyword">if</span>(!val) <span class="keyword">return</span> <span class="predefined-constant">true</span>
    <span class="keyword">try</span> {
        <span class="predefined-type">Double</span>.parseDouble(val)
    } <span class="keyword">catch</span>(<span class="exception">NumberFormatException</span> e) {
        <span class="predefined-constant">false</span>
    }
}

<span class="keyword">def</span> model = <span class="keyword">new</span> MyModel()
<span class="keyword">def</span> swing  = <span class="keyword">new</span> SwingBuilder()
swing.edt {
    frame(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Binding</span><span class="delimiter">'</span></span>, <span class="key">pack</span>: <span class="predefined-constant">true</span>, <span class="key">visible</span>: <span class="predefined-constant">true</span>) {
        gridLayout(<span class="key">cols</span>: <span class="integer">2</span>, <span class="key">rows</span>: <span class="integer">3</span>)
        label <span class="string"><span class="delimiter">'</span><span class="content">Normal</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">target</span>: model))
        label <span class="string"><span class="delimiter">'</span><span class="content">Converter</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>: bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">target</span>: model, <span class="key">validator</span>: isNumber))
        label <span class="string"><span class="delimiter">'</span><span class="content">Model</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>:  bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">source</span>: model))
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can type any characters on textfield #1 and see the result in textfield #3. You can only type numbers on
textfield #2 and see the result in textfield #3</p>
</div>
<div class="paragraph">
<p>{note}
This type of validation is not suitable for semantic validation (a.k.a. constraints in domain classes).
{note}</p>
</div>
<div class="paragraph">
<div class="title">sourceEvent</div>
<p>Maps a different event type, instead of <code>PropertyChangeEvent</code>.</p>
</div>
<div class="paragraph">
<div class="title">sourceValue</div>
<p>Specify a value that may come from a different source. Usually found in partnership with <code>sourceEvent</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>
<span class="keyword">import</span> <span class="include">groovy.swing.SwingBuilder</span>

<span class="type">class</span> <span class="class">MyModel</span> {
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> value
}

<span class="keyword">def</span> model = <span class="keyword">new</span> MyModel()
<span class="keyword">def</span> swing  = <span class="keyword">new</span> SwingBuilder()
swing.edt {
    frame(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Binding</span><span class="delimiter">'</span></span>, <span class="key">pack</span>: <span class="predefined-constant">true</span>, <span class="key">visible</span>: <span class="predefined-constant">true</span>) {
        gridLayout(<span class="key">cols</span>: <span class="integer">2</span>, <span class="key">rows</span>: <span class="integer">3</span>)
        label <span class="string"><span class="delimiter">'</span><span class="content">Text</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">tf1</span><span class="delimiter">'</span></span>)
        label <span class="string"><span class="delimiter">'</span><span class="content">Trigger</span><span class="delimiter">'</span></span>
        button(<span class="string"><span class="delimiter">'</span><span class="content">Copy Text</span><span class="delimiter">'</span></span>, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">bt1</span><span class="delimiter">'</span></span>)
        bind(<span class="key">source</span>: bt1,
             <span class="key">sourceEvent</span>: <span class="string"><span class="delimiter">'</span><span class="content">actionPerformed</span><span class="delimiter">'</span></span>,
             <span class="key">sourceValue</span>: {tf1.text},
             <span class="key">target</span>: model,
             <span class="key">targetProperty</span>: <span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>)
        label <span class="string"><span class="delimiter">'</span><span class="content">Model</span><span class="delimiter">'</span></span>
        textField(<span class="key">columns</span>: <span class="integer">20</span>, <span class="key">text</span>:  bind(<span class="string"><span class="delimiter">'</span><span class="content">value</span><span class="delimiter">'</span></span>, <span class="key">source</span>: model))
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>A contrived way to copy text from one textfield to another. The copy is performed by listening to `ActionEvent`s
pumped by the button.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_models_binding_javafx"><a class="anchor" href="#_models_binding_javafx"></a>5.2. JavaFX Binding</h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect2">
<h3 id="_models_observable_transformation"><a class="anchor" href="#_models_observable_transformation"></a>5.3. The @Observable AST Transformation</h3>
<div class="paragraph">
<p>The <code><a href="api/griffon/transform/Observable.html" target="_blank">@griffon.transform.Observable</a></code> transformation will inject the behavior of <code><a href="api/griffon/core/Observable.html" target="_blank">Observable</a></code>
into the annotated class. It basically injects an instance of <code>java.beans.PropertyChangeSupport</code>
and all methods required to make the model an observable class. It will also make sure that
a <code>java.beans.PropertyChangeEvent</code> is fired for each observable property whenever said
property changes value.</p>
</div>
<div class="paragraph">
<p>The following is a list of all methods added by <code><a href="api/griffon/transform/Observable.html" target="_blank">@griffon.transform.Observable</a></code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>void addPropertyChangeListener(PropertyChangeListener listener)</p>
</li>
<li>
<p>void addPropertyChangeListener(String propertyName, PropertyChangeListener listener)</p>
</li>
<li>
<p>void removePropertyChangeListener(PropertyChangeListener listener)</p>
</li>
<li>
<p>void removePropertyChangeListener(String propertyName, PropertyChangeListener listener)</p>
</li>
<li>
<p>PropertyChangeListener[] getPropertyChangeListeners()</p>
</li>
<li>
<p>PropertyChangeListener[] getPropertyChangeListeners(String propertyName)</p>
</li>
<li>
<p>void firePropertyChange(String propertyName, Object oldValue, Object newValue)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_models_vetoable_transformation"><a class="anchor" href="#_models_vetoable_transformation"></a>5.4. The @Vetoable AST Transformation</h3>
<div class="paragraph">
<p>The <code><a href="api/griffon/transform/Vetoable.html" target="_blank">@griffon.transform.Vetoable</a></code> transformation will inject the behavior of <code><a href="api/griffon/core/Vetoable.html" target="_blank">Vetoable</a></code>
into the annotated class. It basically injects an instance of <code>java.beans.VetoableChangeSupport</code>
and all methods required to make the model a vetoable class. It will also make sure that
a <code>java.beans.PropertyChangeEvent</code> is fired for each vetoable property whenever said
property changes value.</p>
</div>
<div class="paragraph">
<p>The following is a list of all methods added by <code><a href="api/griffon/transform/Vetoable.html" target="_blank">@griffon.transform.Vetoable</a></code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>void addVetoableChangeListener(VetoableChangeListener listener)</p>
</li>
<li>
<p>void addVetoableChangeListener(String propertyName, VetoableChangeListener listener)</p>
</li>
<li>
<p>void removeVetoableChangeListener(VetoableChangeListener listener)</p>
</li>
<li>
<p>void removeVetoableChangeListener(String propertyName, VetoableChangeListener listener)</p>
</li>
<li>
<p>VetoableChangeListener[] getVetoableChangeListeners()</p>
</li>
<li>
<p>VetoableChangeListener[] getVetoableChangeListeners(String propertyName)</p>
</li>
<li>
<p>void fireVetoableChange(String propertyName, Object oldValue, Object newValue)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_models_property_listener_transformation"><a class="anchor" href="#_models_property_listener_transformation"></a>5.5. The @PropertyListener AST Transformation</h3>
<div class="paragraph">
<p>The <code><a href="api/griffon/transform/PropertyListener.html" target="_blank">@griffon.transform.PropertyListener</a></code> helps you to register <code>PropertyChangeListener</code>s
without so much effort. The following code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.transform.PropertyListener</span>
<span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonModel)
<span class="annotation">@PropertyListener</span>(snoopAll)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="keyword">def</span> controller
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> name

    <span class="annotation">@Observable</span>
    <span class="annotation">@PropertyListener</span>({controller.someAction(<span class="local-variable">it</span>)})
    <span class="predefined-type">String</span> lastname

    <span class="keyword">def</span> snoopAll = { evt -&gt; ... }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to this one</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">java.beans.PropeetyChangeListener</span>
<span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonModel)
<span class="annotation">@PropertyListener</span>(snoopAll)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="keyword">def</span> controller
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> name
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> lastname

    <span class="keyword">def</span> snoopAll = { evt -&gt; ... }

    <span class="predefined-type">SampleModel</span>() {
        addPropertyChangeListener(snoopAll <span class="keyword">as</span> <span class="predefined-type">PropertyChangeListener</span>)
        addPropertyChangeListener(<span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>, {
            controller.someAction(<span class="local-variable">it</span>)
        } <span class="keyword">as</span> <span class="predefined-type">PropertyChangeListener</span>)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><code><a href="api/griffon/transform/PropertyListener.html" target="_blank">@griffon.transform.PropertyListener</a></code> accepts the following values</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in-place definition of a closure</p>
</li>
<li>
<p>reference of a closure property defined in the same class</p>
</li>
<li>
<p>a List of any of the previous two</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_models_fxobservable_transformation"><a class="anchor" href="#_models_fxobservable_transformation"></a>5.6. The @FXObservable AST Transformation</h3>
<div class="paragraph">
<p>The <code><a href="api/griffon/transform/FXObservable.html" target="_blank">@griffon.transform.FXObservable</a></code> transformation modifies a class in such a way that plain fields become
JavaFX bindable properties. Each field generates mutators and accessors that accept the plain type
and the JavaFX property type. For example</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/org/example/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> org.example

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.FXObservable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@FXObservable</span> <span class="predefined-type">String</span> input = <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Is functionally equivalent to</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/org/example/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> org.example

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">javafx.beans.property.SimpleStringProperty</span>
<span class="keyword">import</span> <span class="include">javafx.beans.property.StringProperty</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="directive">private</span> StringProperty input

    <span class="directive">final</span> StringProperty getInputProperty() {
        inputProperty()
    }

    <span class="directive">final</span> StringProperty inputProperty() {
        <span class="keyword">if</span> (input == <span class="predefined-constant">null</span>) {
            input = <span class="keyword">new</span> SimpleStringProperty(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
        }
        input
    }

    <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        inputProperty().set(input)
    }

    <span class="predefined-type">String</span> getInput() {
        <span class="keyword">return</span> input == <span class="predefined-constant">null</span> ? <span class="predefined-constant">null</span> : inputProperty().get()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is a list of field types that <code><a href="api/griffon/transform/FXObservable.html" target="_blank">@griffon.transform.FXObservable</a></code> can transform</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">JavaFX Property</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.BooleanProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.BooleanProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property. DoubleProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.DoubleProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.FloatProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.FloatProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.IntProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.IntProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.LongProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.LongProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.IntProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.IntProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.IntProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte.TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.IntProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.StringProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.ListProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.MapProperty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.beans.property.SetProperty</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_controllers"><a class="anchor" href="#_controllers"></a>6. Controllers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controllers are the entry point for your application&#8217;s logic. Each controller has
access to their <code>model</code> and <code>view</code> instances from their respective MVC group.</p>
</div>
<div class="paragraph">
<p>Controller actions are defined as public methods on a controller class, for example
in Groovy you&#8217;d write</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> click() {
        model.clickCount++
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The corresponding code for Java 8 would be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> click() {
        runInsideUIAsync(() -&gt; {
            model.setClickCount(model.getClickCount() + <span class="integer">1</span>);
        });
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Actions must follow these rules in order to be considered as such:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>must have public visibility modifier.</p>
</li>
<li>
<p>name does not match an event handler, i.e, it does not begin with <code>on</code>.</p>
</li>
<li>
<p>must pass <code><a href="api/griffon/util/GriffonClassUtils.html#isPlainMethod" target="_blank">GriffonClassUtils.isPlainMethod()</a></code>.</p>
</li>
<li>
<p>must have <code>void</code> as return type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The application&#8217;s <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code> will automatically configure an <code><a href="api/griffon/core/controller/Action.html" target="_blank">Action</a></code>
instance for each matching controller action. These <code>Action</code> instances can be later used
within Views to link them to UI components. The following example shows a Swing View
making use of the configured <code>clickAction</code> from <code>SampleController</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder
    <span class="predefined-type">SampleModel</span> model

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Clicker</span><span class="delimiter">'</span></span>, <span class="key">pack</span>: <span class="predefined-constant">true</span>)) {
                button(clickAction, <span class="key">label</span>: bind { model.clickCount })
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Controllers can perform other tasks too:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>listen to <a href="#_events_application_events">application events</a>.</p>
</li>
<li>
<p>react to MVC initialization/destruction via a pair of methods (<code>mvcGroupInit()</code>, <code>mvcGroupDestroy()</code>).</p>
</li>
<li>
<p>hold references to <a href="#_services">services</a>.</p>
</li>
<li>
<p>participate in dependency injection (members must be annotated with <code>@javax.inject.Inject</code>).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_controllers_actions_and_threads"><a class="anchor" href="#_controllers_actions_and_threads"></a>6.1. Actions and Threads</h3>
<div class="paragraph">
<p>A key aspect that you must always keep in mind is proper <a href="#_threading">threading</a>.
Often times controller actions will be bound in response to an event driven by the UI.
Those actions will usually be invoked in the same thread that triggered the event,
which would be the UI thread. When that happens you must make sure that the executed
code is short and that it quickly returns control to the UI thread. Failure to do so
may result in unresponsive applications.</p>
</div>
<div class="paragraph">
<p>The following example is the typical usage one finds out there</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">groovy.sql.Sql</span>
<span class="keyword">import</span> <span class="include">java.awt.event.ActionEvent</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">BadController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> badAction(<span class="predefined-type">ActionEvent</span> evt = <span class="predefined-constant">null</span>) {
        <span class="keyword">def</span> sql = Sql.newInstance(
            application.configuration.datasource.url,
            model.username,
            model.password,
            application.configuration.datasource.driver
        )
        model.products.clear()
        sql.eachRow(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from products</span><span class="delimiter">&quot;</span></span>) { product -&gt;
            model.products &lt;&lt; [product.id, product.name, product.price]
        }
        sql.close()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>What&#8217;s wrong with this code? It&#8217;s very likely that this action is triggered by clicking
on a button, in which case its body will be executed inside the UI thread. This means
the database query will be executed on the UI thread too. The model is also updated,
once could assume the model is bound to an UI component. This update should happen inside
the UI thread, but clearly that&#8217;s not what&#8217;s happening here.</p>
</div>
<div class="paragraph">
<p>In order to simplify things the Griffon runtime (via the <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code>) assumes
by default that all actions will be invoked <strong>outside</strong> of the UI thread. This solves the
first problem, that of realizing a database operation on the wrong thread. The second
problem, updating the model, can be solved in the following manner</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">groovy.sql.Sql</span>
<span class="keyword">import</span> <span class="include">java.awt.event.ActionEvent</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">GoodController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> goodAction(<span class="predefined-type">ActionEvent</span> evt = <span class="predefined-constant">null</span>) {                           <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">def</span> sql = Sql.newInstance(
            application.configuration.datasource.url,
            model.username,
            model.password,
            application.configuration.datasource.driver
        )

        <span class="keyword">try</span> {
            <span class="predefined-type">List</span> results = <span class="type">[]</span>
            sql.eachRow(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from products</span><span class="delimiter">&quot;</span></span>) { product -&gt;
                results &lt;&lt; [product.id, product.name, product.price]
            }

            runInsideUIAsync {                                          <i class="conum" data-value="2"></i><b>(2)</b>
                model.products.clear()
                model.products.addAll(results)
            }
        } <span class="keyword">finally</span> {
            sql.close()
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Executed outside the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Go back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are other options at your disposal to make sure the code behaves properly according to
the specific threading rules of a particular UI toolkit. These options are covered in
the <a href="#_threading">threading</a> chapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_controllers_actionmanager"><a class="anchor" href="#_controllers_actionmanager"></a>6.2. The ActionManager</h3>
<div class="paragraph">
<p>Controller actions may automatically be wrapped and exposed as toolkit specific actions;
this greatly simplifies how actions can be configured based on i18n concerns.</p>
</div>
<div class="paragraph">
<p>At the heart of this feature lies the <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code>. This component is responsible
for instantiating, configuring and keeping references to all actions per controller.
It will automatically harvest all action candidates from a Controller once it has been
instantiated. Each action has all of its properties configured following this strategy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>match <code>&lt;controller.class.name&gt;</code>.action.<code>&lt;action.name&gt;</code>.<code>&lt;key&gt;</code></p>
</li>
<li>
<p>match application.action.<code>&lt;action.name&gt;</code>.<code>&lt;key&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>&lt;action.name&gt;</code> should be properly capitalized. In other words, you can configure action
properties specifically per Controller or application wide. Available keys are</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Swing</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Natural name minus the <code>Action</code> suffix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accelerator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long_description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short_description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mnemonic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">small_icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">large_icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">selected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. JavaFX</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Natural name minus the <code>Action</code> suffix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accelerator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long_description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short_description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mnemonic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">selected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Pivot</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Natural name minus the <code>Action</code> suffix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Lanterna</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Natural name minus the <code>Action</code> suffix</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Icon keys should point to an URL available in the classpath or they may use the following notation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>iconClassName|constructorArg</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example using the <a href="https://github.com/griffon-plugins/griffon-fontawesome-plugin" target="_blank">griffon-fontawesome-plugin</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">org.example.AppController.action.Preferences.icon=griffon.swing.support.fontawesome.FontAwesomeIcon|fa-gear</code></pre>
</div>
</div>
<div class="paragraph">
<p>Values must be placed in resources files following the <a href="#_resources">internationalization</a> guidelines.</p>
</div>
<div class="sect3">
<h4 id="_configuration_examples"><a class="anchor" href="#_configuration_examples"></a>6.2.1. Configuration Examples</h4>
<div class="paragraph">
<p>The following Controller defines 2 actions, one of them uses the <code>Action</code> suffix because its name clashes
with a known Java keyword.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">java.awt.event.ActionEvent</span>

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="type">void</span> close(<span class="predefined-type">ActionEvent</span> evt) { ... }
    <span class="type">void</span> newAction(<span class="predefined-type">ActionEvent</span> evt) { ... }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code> will generate and configure the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>newAction</code></p>
</li>
<li>
<p><code>closeAction</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following keys are expected to be available in the application&#8217;s i18n resources (i.e. <code>griffon-app/i18n/messages.properties</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>sample.SampleController.action.New.name = New
sample.SampleController.action.Open.name = Open
sample.SampleController.action.Close.name = Close
sample.SampleController.action.Delete.name = Delete
<span class="error">#</span> additional keys per action elided</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the case that you&#8217;d like the close action to be customized for all controllers, say using
the Spanish language, then you&#8217;ll have to provide a file named <code>griffon-app/i18n/messages_es.properties</code>
with the following keys</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>application.action.Close.name = Cerrar</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure to remove any controller specific keys when reaching for application wide configuration.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controllers_action_handlers"><a class="anchor" href="#_controllers_action_handlers"></a>6.3. Action Handlers</h3>
<div class="paragraph">
<p><code><a href="api/griffon/core/controller/ActionHandler.html" target="_blank">ActionHandler</a></code>s open a new set of possibilities by allowing developers
and <a href="#_addons">addon</a> authors to define code that should be executed before and after
any controller action is invoked by the framework. For example, you may want to protect
the execution of a particular action given specific permissions; the <code>shiro</code> plugin uses
annotations that are handled by an <code>ActionHandler</code>, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.plugins.shiro.annotation.*</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="annotation">@RequiresAuthentication</span>
<span class="type">class</span> <span class="class">PrinterController</span> {
   <span class="annotation">@RequiresPermission</span>(<span class="string"><span class="delimiter">'</span><span class="content">printer:print</span><span class="delimiter">'</span></span>)
   <span class="type">void</span> print () { ... }

   <span class="annotation">@RequiresRoles</span>(<span class="string"><span class="delimiter">'</span><span class="content">administrator</span><span class="delimiter">'</span></span>)
   <span class="type">void</span> configure() { ... }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>scaffolding</code> plugin on the other hand modifies the arguments sent to the action.
Take the following snippet for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.plugins.shiro.annotation.*</span>
<span class="keyword">import</span> <span class="include">org.apache.shiro.authc.UsernamePasswordToken</span>
impprt org.apache.shiro.subject.Subject
<span class="keyword">import</span> <span class="include">javax.swing.JOptionPane</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">StrutsController</span> {
    <span class="annotation">@Inject</span>
    <span class="directive">private</span> <span class="predefined-type">Subject</span> subject

    <span class="annotation">@RequiresGuest</span>
    <span class="type">void</span> login(LoginCommandObject cmd) {
        <span class="keyword">try</span> {
            subject.login(<span class="keyword">new</span> UsernamePasswordToken(cmd.username, cmd.password))
        } <span class="keyword">catch</span>(<span class="exception">Exception</span> e) {
            <span class="predefined-type">JOptionPane</span>.showMessageDialog(
                app.windowManager.findWindow(<span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>),
                <span class="string"><span class="delimiter">'</span><span class="content">Invalid username and/or password</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">Security Failure</span><span class="delimiter">'</span></span>, <span class="predefined-type">JOptionPane</span>.ERROR_MESSAGE)
        }
    }

    <span class="annotation">@RequiresAuthentication</span>
    <span class="type">void</span> logout() {
        subject.logout()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>login</code> action requires an instance of <code>LoginCommandObject</code>. The <code>scaffolding</code>
plugin is aware of this fact; it will create an instance of said class, wire up an scaffolded
view in a dialog and present it to the user. The <code>LoginCommandObject</code> instance will be set
as the action&#8217;s arguments if it validates successfully, otherwise action execution is aborted.</p>
</div>
<div class="sect3">
<h4 id="_implementing_an_action_handler"><a class="anchor" href="#_implementing_an_action_handler"></a>6.3.1. Implementing an Action Handler</h4>
<div class="paragraph">
<p>Action handlers must implement the <code><a href="api/griffon/core/controller/ActionHandler.html" target="_blank">ActionHandler</a></code> interface. There&#8217;s a
handy base class (<code>org.codehaus.griffon.runtime.core.controller.AbstractActionHandler</code>)
that provides sensible defaults. Say you&#8217;d want to know how much time it took for an action
to be executed, also if an exception occurred during its execution. This handler could
be implemented as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.controller.Action</span>
<span class="keyword">import</span> <span class="include">griffon.core.controller.ActionExecutionStatus</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.controller.AbstractActionHandler</span>

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>

<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">'</span><span class="content">tracer</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">TracerActionHandler</span> <span class="directive">extends</span> AbstractActionHandler {
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Long</span>&gt; TIMES = [:]

    <span class="predefined-type">Object</span><span class="type">[]</span> before(<span class="predefined-type">Action</span> action, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
        TIMES[action.fullyQuallifiedName] = <span class="predefined-type">System</span>.currentTimeMillis()
        <span class="keyword">return</span> <span class="local-variable">super</span>.before(controller, actionName, args)
    }

    <span class="type">void</span> after(ActionExecutionStatus status, <span class="predefined-type">Action</span> action, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
        <span class="type">long</span> time = <span class="predefined-type">System</span>.currentTimeMillis() - TIMES[action.fullyQuallifiedName]
        println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Action </span><span class="inline"><span class="inline-delimiter">${</span>action.fullyQuallifiedName<span class="inline-delimiter">}</span></span><span class="content"> took </span><span class="inline"><span class="inline-delimiter">${</span>time<span class="inline-delimiter">}</span></span><span class="content"> ms [</span><span class="inline"><span class="inline-delimiter">${</span>status<span class="inline-delimiter">}</span></span><span class="content">]</span><span class="delimiter">&quot;</span></span>)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/controller/ActionHandler.html" target="_blank">ActionHandler</a></code>  interface defines a handful of methods that are invoked
by the <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code> at very specific points during the lifetime and execution
of controller actions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">void configure(Action action, Method method)</dt>
<dd>
<p>The <code>configure()</code> method is called during
the configuration phase, when the <code>ActionManager</code> creates the actions. This method is
called once in the lifetime of an action.</p>
</dd>
<dt class="hdlist1">void update(Action action)</dt>
<dd>
<p>The <code>update()</code> method can be called at any time. Its responsibility
is to update the action&#8217;s properties, such as the enabled state, given the current state
of the application.</p>
</dd>
<dt class="hdlist1">Object[] before(Action action, Object[] args)</dt>
<dd>
<p>The <code>before()</code> method is executed every
time an action is about to be invoked. This method is responsible for adjusting the
arguments (if needed) or aborting the action execution altogether. Any exception thrown
by an handler in this method will halt action execution however only <code><a href="api/griffon/core/controller/AbortActionExecution.html" target="_blank">AbortActionExecution</a></code>
is interpreted as a graceful abort.</p>
</dd>
<dt class="hdlist1">boolean exception(Exception exception, Action action, Object[] args)</dt>
<dd>
<p>The <code>exception()</code>
method is invoked only when an exception occurred during the action&#8217;s execution.
Implementors must return <code>true</code> if the exception was handled successfully. The exception will
be rethrown by the <code>ActionManager</code> if no handler handled the exception. This happens as the
last step of the action interception procedure.</p>
</dd>
<dt class="hdlist1">void after(ActionExecutionStatus status, Action axtion, Object[] args)</dt>
<dd>
<p>The <code>after()</code> method
is called after an action has been executed. Any exceptions occurred during the action&#8217;s
execution should have been handled by <code>exception()</code>. The <code>status</code> argument specifies if
the action was successfully executed (<code>OK</code>), if it was aborted by an handler (<code>ABORTERD</code>)
or if an exception occurred during its execution (<code>EXCEPTION</code>).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Action handlers can participate in Dependency Injection.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration"><a class="anchor" href="#_configuration"></a>6.3.2. Configuration</h4>
<div class="paragraph">
<p>Action Handlers must be registered within a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> in order to be picked
up by the <code>ActionManager</code>. The following example shows how the previous <code>TracerActionHandler</code>
can be registered in a <code>Module</code></p>
</div>
<div class="listingblock">
<div class="title">src/main/com/acme/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.core.controller.ActionHandler</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>

<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ActionHandler)
            .to(TracerActionHandler)
            .asSingleton()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>An Handler may define a dependency on another handler; use the <code><a href="api/griffon/inject/DependsOn.html" target="_blank">@griffon.inject.DependsOn</a></code>
annotation to express the relationship.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to globally override the order of execution of handlers, or
define and order when handlers are orthogonal. Take for example the <code>security</code>
handler provided by the <code>shiro</code> plugin and the <code>scaffolding</code> handler provided by
<code>scaffolding</code> plugin. These handlers know nothing about each other however <code>security</code>
should be called before <code>scaffolding</code>. This can be accomplished by adding the following
snippet to <code>Config.groovy</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">griffon.controller.action.handler.order = [<span class="string"><span class="delimiter">'</span><span class="content">security</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">scaffolding</span><span class="delimiter">'</span></span>]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controllers_context"><a class="anchor" href="#_controllers_context"></a>6.4. Actions and Contexts</h3>
<div class="paragraph">
<p>Actions have direct access to their controller&#8217;s <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> which means they can retrieve and store information
at any time. It&#8217;s also possible to define that the arguments of an action should be matched against keys that may
exist in a <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code>, this enables <code><a href="#_controllers_action_handlers">ActionHandlers</a></code> to decorate the value
without directly affecting the <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> itself.</p>
</div>
<div class="paragraph">
<p>The following example shows a different implementation of a controller whose login action expects an instance of
<code>org.apache.shiro.authc.UsernamePasswordToken</code>. This instance has been created somewhere else and stored in the group&#8217;s
context using the "<em>credentials</em>" key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.plugins.shiro.annotation.*</span>
<span class="keyword">import</span> <span class="include">org.apache.shiro.authc.UsernamePasswordToken</span>
impprt org.apache.shiro.subject.Subject
<span class="keyword">import</span> <span class="include">javax.swing.JOptionPane</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>
<span class="keyword">import</span> <span class="include">griffon.inject.Contextual</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">StrutsController</span> {
    <span class="annotation">@Inject</span>
    <span class="directive">private</span> <span class="predefined-type">Subject</span> subject

    <span class="annotation">@RequiresGuest</span>
    <span class="type">void</span> login(<span class="annotation">@Contextual</span>(<span class="string"><span class="delimiter">'</span><span class="content">credentials</span><span class="delimiter">'</span></span>) UsernamePasswordToken token) {
        <span class="keyword">try</span> {
            subject.login(token)
        } <span class="keyword">catch</span>(<span class="exception">Exception</span> e) {
            <span class="predefined-type">JOptionPane</span>.showMessageDialog(
                app.windowManager.findWindow(<span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>),
                <span class="string"><span class="delimiter">'</span><span class="content">Invalid username and/or password</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">Security Failure</span><span class="delimiter">'</span></span>, <span class="predefined-type">JOptionPane</span>.ERROR_MESSAGE)
        }
    }

    <span class="annotation">@RequiresAuthentication</span>
    <span class="type">void</span> logout() {
        subject.logout()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the <code>org.apache.shiro.authc.UsernamePasswordToken</code> resides on the context it can now be shared with other
actions that need it, something that could not be done with the previous example because the <code>LoginCommandObject</code> existed
only for the action that declared it as argument.</p>
</div>
<div class="paragraph">
<p>Another interesting thing is that the instance of <code>org.apache.shiro.authc.UsernamePasswordToken</code> could have been added
by the parent <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code>, or the application&#8217;s <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> (remember that contexts are hierarchical), thus
the value can be shared with more than one controller or with the whole application, as needed.</p>
</div>
<div class="paragraph">
<p>If the <code>@Contextual</code> argument does not have <code>@Named</code> qualifier then the fully qualified class name of the argument&#8217;s
type will be used as a key. This means that the key "org.apache.shiro.authc.UsernamePasswordToken" would be used to
search for the argument if <code>@Named('credentials')</code> were to be ommitted.</p>
</div>
<div class="paragraph">
<p>It&#8217;s worth noting that failure to resolve a <code>@Contextual</code> argument does not result in an immediate exception; if the key
could not be found in the <code><a href="api/griffon/core/Context.html" target="_blank">Context</a></code> then a <code>null</code> value will be set as the argument&#8217;s value. It&#8217;s the action&#8217;s
job to check if it received the correct arguments.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_services"><a class="anchor" href="#_services"></a>7. Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Services are responsible for the application logic that does not belong to a single
controller. They are meant to be treated as singletons, injected to MVC members by
following a naming convention. Services must be located inside the <code>griffon-app/services</code></p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you want to create a Math service. A trivial implementation of an addition
operation performed by the <code>MathService</code> would look like the following snippet</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/services/sample/MathService.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonService)
<span class="type">class</span> <span class="class">MathService</span> {
    <span class="keyword">def</span> <span class="function">addition</span>(a, b) { a + b }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using this service from a Controller is a straight forward task, you just have to
define an injection point and annotated it with <code>@javax.inject.Inject</code></p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controllers/sample/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span>
    <span class="predefined-type">SampleModel</span> model

    <span class="annotation">@javax</span>.inject.Inject
    <span class="directive">private</span> MathService mathService

    <span class="type">void</span> calculate(evt = <span class="predefined-constant">null</span>) {
        model.result = mathService.addition model.a, model.b
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Given that services are inherently treated as singletons they are also automatically
registered as application event listeners. Be aware that services will be instantiated
lazily which means that some events might not reach a particular service if it has not
been instantiated by the framework by the time of event publication. It&#8217;s also discouraged
to use Groovy&#8217;s <code>@Singleton</code> annotation on a Service class as it will cause trouble with
the automatic singleton management Griffon has in place.</p>
</div>
<div class="sect2">
<h3 id="_life_cycle"><a class="anchor" href="#_life_cycle"></a>7.1. Life Cycle</h3>
<div class="paragraph">
<p>Services do not have a well-defined lifecycle like other MVC artifacts because they do
implement the <code><a href="api/griffon/core/artifact/GriffonMvcArtifact.html" target="_blank">GriffonMvcArtifact</a></code> interface. However you may annotate service
methods with <code>@javax.annotation.PostConstruct</code> and <code>@javax.annotation.PreDestroy</code>.</p>
</div>
<div class="paragraph">
<p>The Griffon runtime guarantees that methods annotated with <code>@javax.annotation.PostConstruct</code>
will be invoked right after the instance has been created by the <code><a href="api/griffon/core/injection/Injector.html" target="_blank">Injector</a></code>.
Likewise it will invoke all methods annotated with <code>@javax.annotation.PreDestroy</code> when the
<code><a href="api/griffon/core/injection/Injector.html" target="_blank">Injector</a></code> is closed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Only one method of the same class can be annotated with  <code>@javax.annotation.PostConstruct</code>
or <code>@javax.annotation.PreDestroy</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_views"><a class="anchor" href="#_views"></a>8. Views</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_views_windowmanager"><a class="anchor" href="#_views_windowmanager"></a>8.1. The WindowManager</h3>
<div class="paragraph">
<p>Although the following API refers directly to <code>Swing</code> in all examples it&#8217;s possible to use
the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> with other toolkits such as <code>JavaFX</code>, <code>Pivot</code> and <code>Lanterna</code> as
there are specific <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> implementations plus helper classes for those
UI toolkits too.</p>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> class is responsible for keeping track of all the windows
managed by the application. It also controls how these windows are displayed (via a
pair of methods: <code>show</code>, <code>hide</code>). <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> relies on an instance of
<code><a href="api/griffon/core/view/WindowDisplayHandler.html" target="_blank">WindowDisplayHandler</a></code> to actually show or hide a window. The default implementation
simple shows and hide windows directly, however you can change this behavior by setting
a different implementation of <code><a href="api/griffon/core/view/WindowDisplayHandler.html" target="_blank">WindowDisplayHandler</a></code> on the application instance.</p>
</div>
<div class="sect3">
<h4 id="_views_windowmanager_dsl"><a class="anchor" href="#_views_windowmanager_dsl"></a>8.1.1. WindowManager DSL</h4>
<div class="paragraph">
<p>This configuration can be set in <code>griffon-app/conf/Config.groovy</code> file, here is how it looks</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/conf/Config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>windowManager {
    myWindowName = [
        <span class="key">show</span>: {name, window -&gt; ... },
        <span class="key">hide</span>: {name, window -&gt; ... }
    ]
    myOtherWindowName = [
        <span class="key">show</span>: {name, window -&gt; ... }
    ]
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of each entry must match the value of the Window&#8217;s <code>name:</code> property (if supported)
or the name used to register the Window with the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code>. Each entry may
have any the following options</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
show
</td>
<td class="hdlist2">
<p>Used to show the window to the screen. It must be a closure that takes two
parameters: the name of the window and the window to be displayed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
hide
</td>
<td class="hdlist2">
<p>Used to hide the window from the screen. It must be a closure that takes two
parameters: the name of the window and the window to be hidden.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
handler
</td>
<td class="hdlist2">
<p>A custom <code><a href="api/griffon/core/view/WindowDisplayHandler.html" target="_blank">WindowDisplayHandler</a></code> instance.</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must use <code><a href="api/griffon/core/CallableWithArgs.html" target="_blank">CallableWithArgs</a></code> instead of closures if using the Java version
of the <code>Config</code> file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The first two options have priority over the third one. If one is missing then the
<code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> will invoke the default behavior. There is one last option
that can be used to override the default behavior provided to all windows</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/conf/Config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>windowManager {
    defaultHandler = <span class="keyword">new</span> MyCustomWindowDisplayHandler()
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can go a bit further by specifying a global show or hide behavior as shown in the
following example</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/conf/Config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre>windowManager {
    <span class="key">defaultShow</span>: {name, window -&gt; ... },
    myWindowName = [
        <span class="key">show</span>: {name, window -&gt; ... },
        <span class="key">hide</span>: {name, window -&gt; ... }
    ]
    myOtherWindowName = [
        <span class="key">show</span>: {name, window -&gt; ... }
    ]
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_views_windowmanager_starting_window"><a class="anchor" href="#_views_windowmanager_starting_window"></a>8.1.2. Starting Window</h4>
<div class="paragraph">
<p>By default the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> picks the first available window from the managed
windows list to be the starting window. However, this behavior can be configured,
by means of the WindowManager DSL. Simply specify a value for <code>windowManager.startingWindow</code>,
like this</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/conf/Config.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>windowManager {
    startingWindow = <span class="string"><span class="delimiter">'</span><span class="content">primary</span><span class="delimiter">'</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration flag accepts two types of values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a String that defines the name of the Window. You must make sure the Window has a
matching name property or was attached to the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> with the
same name</p>
</li>
<li>
<p>a Number that defines the index of the Window in the list of managed windows.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If no match is found then the default behavior will be executed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_views_windowmanager_display_handlers"><a class="anchor" href="#_views_windowmanager_display_handlers"></a>8.1.3. Custom WindowDisplayHandlers</h4>
<div class="paragraph">
<p>The following example shows how you can center on screen all managed windows</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/sample/CenteringWindowDisplayHandler.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.swing.DefaultSwingWindowDisplayHandler</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">java.awt.Window</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.swing.support.SwingUtils.centerOnScreen</span>

<span class="type">class</span> <span class="class">CenteringWindowDisplayHandler</span> <span class="directive">extends</span> DefaultSwingWindowDisplayHandler {
    <span class="annotation">@Override</span>
    <span class="type">void</span> show(<span class="annotation">@Nonnull</span> <span class="predefined-type">String</span> name, <span class="annotation">@Nonnull</span> <span class="predefined-type">Window</span> window) {
        centerOnScreen(window)
        <span class="local-variable">super</span>.show(name, window)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can register <code>CenteringWindowDisplayHandler</code> using the WindowManager DSL. Alternatively
you may use a <a href="#_overview_modules">Module</a> to register the class/instance.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/sample/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>
<span class="keyword">import</span> <span class="include">griffon.swing.SwingWindowDisplayHandler</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.AnnotationUtils.named</span>

<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">'</span><span class="content">swing</span><span class="delimiter">'</span></span>)
<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(SwingWindowDisplayHandler)
            .withClassifier(named(<span class="string"><span class="delimiter">'</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">'</span></span>))
            .to(CenteringWindowDisplayHandler)
            .asSingleton()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This example is equivalent to defining a <code><a href="api/griffon/core/view/WindowDisplayHandler.html" target="_blank">WindowDisplayHandler</a></code> for all windows.
You may target specific windows, by define multiple bindings, making sure that the name
of the classifier matches the window name. Notice the explicit dependency on the <code>swing</code> module.
If this dependency is left out it&#8217;s very likely that the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> will fail
to pick the correct <code><a href="api/griffon/core/view/WindowDisplayHandler.html" target="_blank">WindowDisplayHandler</a></code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_views_builder_customizers"><a class="anchor" href="#_views_builder_customizers"></a>8.2. BuilderCustomizers</h3>
<div class="paragraph">
<p>Recall from the <a href="#_getting_started_console_example_view">ConsoleView</a> sample application
that you can use a Groovy DSL for building View components when the main language
of the application is Groovy. This DSL is configured with default nodes that are
tightly coupled with the chosen UI toolkit.</p>
</div>
<div class="sect3">
<h4 id="_extending_the_ui_dsl"><a class="anchor" href="#_extending_the_ui_dsl"></a>8.2.1. Extending the UI DSL</h4>
<div class="paragraph">
<p>The UI DSL can be extended by registering new <code><a href="api/griffon/util/BuilderCustomizer.html" target="_blank">BuilderCustomizer</a></code>s with the application
using a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code>. The <code><a href="api/griffon/util/BuilderCustomizer.html" target="_blank">BuilderCustomizer</a></code> instance defines methods
that can be used to configure every aspect of <code>groovy.factory.FactoryBuilderSupport</code>.
Here&#8217;s an example of the <code>miglayout-swing</code> extension</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/griffon/builder/swing/MiglayoutSwingBuilderCustomizer.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">griffon.builder.swing</span>;

<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">groovy.swing.factory.LayoutFactory</span>;
<span class="keyword">import</span> <span class="include">net.miginfocom.swing.MigLayout</span>;
<span class="keyword">import</span> <span class="include">groovy.util.Factory</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.groovy.view.AbstractBuilderCustomizer</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;
<span class="keyword">import</span> <span class="include">java.util.LinkedHashMap</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">swing</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout-swing</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MiglayoutSwingBuilderCustomizer</span> <span class="directive">extends</span> AbstractBuilderCustomizer {
    <span class="directive">public</span> MiglayoutSwingBuilderCustomizer() {
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, Factory&gt; factories = <span class="keyword">new</span> <span class="predefined-type">LinkedHashMap</span>&lt;&gt;();
        factories.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">migLayout</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> LayoutFactory(MigLayout.class));
        setFactories(factories);
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This customizer registers a single factory, <code>miglayout</code>. It also defines a dependency
on the <code>swing</code> customizer in order for its customizations to be applied after <code>swing</code>'s.
The customizer is registered using the following <a href="api/griffon/core/injection/Module.html" target="_blank">Module</a>.</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/codehaus/griffon/runtime/miglayout/MiglayoutSwingGroovyModule.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">org.codehaus.griffon.runtime.miglayout</span>;

<span class="keyword">import</span> <span class="include">griffon.builder.swing.MiglayoutSwingBuilderCustomizer</span>;
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">griffon.util.BuilderCustomizer</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">swing-groovy</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout-swing-groovy</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MiglayoutSwingGroovyModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(BuilderCustomizer.class)
            .to(MiglayoutSwingBuilderCustomizer.class)
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This module is loaded before <code>swing-groovy</code>, as per the <code><a href="api/griffon/inject/DependsOn.html" target="_blank">@griffon.inject.DependsOn</a></code> definition;
thus ensuring that the customizations from this customizer are applied after.</p>
</div>
</div>
<div class="sect3">
<h4 id="_default_dsl_nodes"><a class="anchor" href="#_default_dsl_nodes"></a>8.2.2. Default DSL Nodes</h4>
<div class="paragraph">
<p>The <code>griffon-groovy</code> dependency delivers the following nodes</p>
</div>
<div class="sect4">
<h5 id="_root"><a class="anchor" href="#_root"></a>Root</h5>
<div class="paragraph">
<p>Identifies the top level node of a secondary View script. View scripts are expected
to return the top level node, however there may be times when further customizations
prevent this from happening, for example wiring up a custom listener. When that happens
the result has to be made explicit otherwise the script will return the wrong value.
Using the <code>root()</code> node avoids forgetting this fact while also providing an alias for
the node.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/com/acme/Secondary.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>root(
    tree(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mytree</span><span class="delimiter">'</span></span>)
)

mytree.addTreeSelectionModel(<span class="keyword">new</span> <span class="predefined-type">DefaultTreeSelectionModel</span>() { <span class="comment">/* ... */</span> })</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/com/acme/PrimaryView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">PrimaryView</span> {
    <span class="keyword">def</span> builder

    <span class="type">void</span> initUI() {
        builder.with {
            build(Secondary)
            application(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Sample</span><span class="delimiter">'</span></span>) {
                borderLayout()
                label <span class="string"><span class="delimiter">'</span><span class="content">Options</span><span class="delimiter">'</span></span>, <span class="key">constraints</span>: NORTH
                widget root(SampleSecondary)
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This node accepts an additional parameter <code>name</code> that can be used to override the
default alias assigned to the node. If you specify a value for this parameter when
the node is built then you&#8217;ll need to use it again to retrieve the node.</p>
</div>
</div>
<div class="sect4">
<h5 id="_metacomponent"><a class="anchor" href="#_metacomponent"></a>MetaComponent</h5>
<div class="paragraph">
<p>Enables the usage of a meta-component as a View node. Meta-components are MVC groups
that contain additional configuration, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre>mvcGroups {
    <span class="string"><span class="delimiter">'</span><span class="content">custom</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.CustomModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.CustomView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.CustomController</span><span class="delimiter">'</span></span>
        config {
            component = <span class="predefined-constant">true</span>
            title = <span class="string"><span class="delimiter">'</span><span class="content">My Default Title</span><span class="delimiter">'</span></span>
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>metaComponent()</code> node instantiates the MVC group and attaches the top node from
the groups' View member into the current hierarchy. Using the previous group definition
in a View is straight forward</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">metaComponent(<span class="string"><span class="delimiter">'</span><span class="content">custom</span><span class="delimiter">'</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Another Title</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_views_swing"><a class="anchor" href="#_views_swing"></a>8.3. Swing Specific</h3>
<div class="paragraph">
<p>Refer to the <a href="#_builder_nodes_swing">list of nodes</a> that become available when
the <code>griffon-swing-groovy-2.2.0.jar</code> is added as a dependency.</p>
</div>
</div>
<div class="sect2">
<h3 id="_views_javafx"><a class="anchor" href="#_views_javafx"></a>8.4. JavaFX Specific</h3>
<div class="paragraph">
<p>Refer to the <a href="#_builder_nodes_javafx">list of nodes</a> that become available when
the <code>griffon-javafx-groovy-2.2.0.jar</code> is added as a dependency.</p>
</div>
</div>
<div class="sect2">
<h3 id="_views_lanterna"><a class="anchor" href="#_views_lanterna"></a>8.5. Lanterna Specific</h3>
<div class="paragraph">
<p><a href="http://code.google.com/p/lanterna/" target="_blank">Lanterna</a> is a Java library allowing you to write easy semi-graphical user interfaces
in a text-only environment, very similar to the C library curses but with more
functionality. Lanterna supports xterm compatible terminals and terminal emulators
such as konsole, gnome-terminal, putty, xterm and many more. One of the main benefits
of lanterna is that it&#8217;s not dependent on any native library but runs 100% in pure Java.</p>
</div>
<div class="paragraph">
<p>Refer to the <a href="#_builder_nodes_lanterna">list of nodes</a> that become available when
the <code>griffon-lanterna-groovy-2.2.0.jar</code> is added as a dependency.</p>
</div>
</div>
<div class="sect2">
<h3 id="_views_pivot"><a class="anchor" href="#_views_pivot"></a>8.6. Pivot Specific</h3>
<div class="paragraph">
<p>Apache <a href="http://pivot.apache.org" target="_blank">Pivot</a> is an open-source platform for building installable Internet applications (IIAs).
It combines the enhanced productivity and usability features of a modern user interface toolkit
with the robustness of the Java platform.</p>
</div>
<div class="paragraph">
<p>Pivot has a deep listener hierarchy as opposed to the simple one found in Swing.
This listener hierarchy does not follow the conventions set forth by the JavaBeans
Conventions, thus making it difficult to extrapolate synthetic properties based
on event methods when using Groovy builders, as it happens with Swing classes.
However this plugin applies a convention for wiring up listeners. Take for example
<code>Button</code> and <code>ButtonPressListener</code>, the following example shows how to wire up a
<code>buttonPressed</code> event handler.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">button(<span class="string"><span class="delimiter">'</span><span class="content">Click me!</span><span class="delimiter">'</span></span>) {
    buttonPressListener {
        buttonPressed = { source -&gt; println <span class="string"><span class="delimiter">&quot;</span><span class="content">You pressed on button </span><span class="inline"><span class="inline-delimiter">${</span>source<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">&quot;</span></span> }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For each listener in the Pivot listener list there&#8217;s a corresponding node matching
their name. For each method of such listener interface there&#8217;s a variable matching
its name that may have a closure assigned to it. The closure must match the same
arguments as the method.</p>
</div>
<div class="paragraph">
<p>Refer to the <a href="#_builder_nodes_pivot">list of nodes</a> that become available when
the <code>griffon-pivot-groovy-2.2.0.jar</code> is added as a dependency.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_threading"><a class="anchor" href="#_threading"></a>9. Threading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building a well behaved multi-threaded desktop application has been a hard task for
many years, however it does not have to be that way anymore. The following sections
explain the threading facilities exposed by the Griffon framework.</p>
</div>
<div class="sect2">
<h3 id="_threading_sync"><a class="anchor" href="#_threading_sync"></a>9.1. Synchronous Calls</h3>
<div class="paragraph">
<p>Synchronous calls inside the UI thread are made by invoking the <code>runInsideUISync</code> method.
This method results in the same behavior as calling <code>SwingUtilities.invokeAndWait()</code> when
using Swing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">java.awt.event.ActionEvent</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> work(evt = <span class="predefined-constant">null</span>) {
        <span class="comment">// will be invoked outside of the UI thread by default</span>
        <span class="keyword">def</span> value = model.value
        <span class="comment">// do some calculations</span>
        runInsideUISync {
            <span class="comment">// back inside the UI thread</span>
            model.result = ...
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_threading_async"><a class="anchor" href="#_threading_async"></a>9.2. Asynchronous Calls</h3>
<div class="paragraph">
<p>Similarly to synchronous calls, asynchronous calls inside the UI thread are made by
invoking the <code>runInsideUIAsync</code> method. This method results in the same behavior as
calling <code>SwingUtilities.invokeLater()</code> when using Swing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">java.awt.event.ActionEvent</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> work(evt = <span class="predefined-constant">null</span>) {
        <span class="comment">// will be invoked outside of the UI thread by default</span>
        <span class="keyword">def</span> value = model.value
        <span class="comment">// do some calculations</span>
        runInsideUIAsync {
            <span class="comment">// back inside the UI Thread</span>
            model.result = ...
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_threading_outside"><a class="anchor" href="#_threading_outside"></a>9.3. Outside Calls</h3>
<div class="paragraph">
<p>Making sure a block of code is executed outside the UI thread is made by invoking
the <code>execOutsideUI</code> method. This method is smart enough to figure out if the unit
of work is already outside of the UI thread; otherwise it instructs the Griffon
runtime to runt he unit in a different thread. This is usually performed by a
helper <code>java.util.concurrent.ExecutorService</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">java.awt.event.ActionEvent</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> work(evt = <span class="predefined-constant">null</span>) {
        <span class="comment">// will be invoked outside of the UI thread by default</span>
        <span class="keyword">def</span> value = model.value
        <span class="comment">// do some calculations</span>
        runInsideUIAsync {
            <span class="comment">// back inside the UI thread</span>
            model.result = ...
            runOutsideUI {
                <span class="comment">// do more calculations</span>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_threading_additional_methods"><a class="anchor" href="#_threading_additional_methods"></a>9.4. Additional Threading Methods</h3>
<div class="paragraph">
<p>There are two additional methods that complement the generic threading facilities
that Griffon exposes to the application and its artifacts</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">isUIThread()</dt>
<dd>
<p>Returns <code>true</code> if the current thread is the UI thread, <code>false</code> otherwise.
Functionally equivalent to calling <code>SwingUtilities.isEventDispatchThread()</code> in Swing.</p>
</dd>
<dt class="hdlist1">runFuture(ExecutorService s, Callable c)</dt>
<dd>
<p>schedules a callable on the target <code>ExecutorService</code>.
The executor service can be left unspecified, if so a default Thread pool executor will be used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_threading_annotation"><a class="anchor" href="#_threading_annotation"></a>9.5. The @Threading Annotation</h3>
<div class="paragraph">
<p>The <code><a href="api/griffon/transform/Threading.html" target="_blank">@griffon.transform.Threading</a></code> annotation can be used to alter the default behavior of
executing a controller action outside of the UI thread. There are 4 possible values
that can be specified for this annotation</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
INSIDE_UITHREAD_SYNC
</td>
<td class="hdlist2">
<p>Executes the code in a synchronous call inside the UI thread.
Equivalent to wrapping the code with <code>runInsideUISync</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
INSIDE_UITHREAD_ASYNC
</td>
<td class="hdlist2">
<p>Executes the code in an asynchronous call inside the UI thread.
Equivalent to wrapping the code with <code>runInsideUIAsync</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
OUTSIDE_UITHREAD
</td>
<td class="hdlist2">
<p>Executes the code outside of the UI thread. Equivalent to wrapping
the code with <code>runOutsideUI</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SKIP
</td>
<td class="hdlist2">
<p>Executes the code in the same thread as the invoker, whichever it may be.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This annotation can be usend as an AST transformation on any other component that&#8217;s not
a controller. Any component may gain the ability to execute code in a particular thread,
following the selected UI toolkit&#8217;s execution rules.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom component that&#8217;s able to call its methods in different
threads</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.transform.Threading</span>

<span class="type">class</span> <span class="class">Sample</span> {
    <span class="annotation">@Threading</span>
    <span class="type">void</span> doStuff() {
        <span class="comment">// executed outside of the UI thread</span>
    }

    <span class="annotation">@Threading</span>(Threading.Policy.INSIDE_UITHREAD_SYNC)
    <span class="type">void</span> moreStuff() {
        <span class="comment">// executed synchronously inside the UI thread</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You must annotate a method with <code><a href="api/griffon/transform/Threading.html" target="_blank">@griffon.transform.Threading</a></code>. Annotated methods must conform to these rules</p>
</div>
<div class="ulist">
<ul>
<li>
<p>must be public.</p>
</li>
<li>
<p>name does not match an event handler.</p>
</li>
<li>
<p>must pass <code><a href="api/griffon/util/GriffonClassUtils.html#isPlainMethod" target="_blank">GriffonClassUtils.isPlainMethod()</a></code>.</p>
</li>
<li>
<p>must have @void@ as return type.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_threading_transformation"><a class="anchor" href="#_threading_transformation"></a>9.6. The @ThreadingAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to execute code in a particular thread, following
the selected UI toolkit&#8217;s execution rules. It injects the behavior of <code><a href="api/griffon/core/threading/ThreadingHandler.html" target="_blank">ThreadingHandler</a></code>
into the annotated class.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the <code>UIThreadManager</code> instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom component that&#8217;s able to call its methods in different
threads</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="annotation">@griffon</span>.transform.ThreadingAware
<span class="type">class</span> <span class="class">Sample</span> {
    <span class="type">void</span> doStuff() {
        runOutsideUIThread {
            <span class="comment">// executed outside of the UI thread</span>
        }
    }

    <span class="type">void</span> moreStuff() {
        runInsideUIAsync {
            <span class="comment">// executed asynchronously inside the UI thread</span>
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_events"><a class="anchor" href="#_events"></a>10. Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applications have the ability to publish events from time to time to communicate
that something of interest has happened at runtime. Events will be triggered by
the application during each of its life cycle phases, also when MVC groups are
created and destroyed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All application event handlers are guaranteed to be called in the same thread
that originated the event.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_events_publishing"><a class="anchor" href="#_events_publishing"></a>10.1. Publishing Events</h3>
<div class="paragraph">
<p>Any instance that obtains a reference to an <code><a href="api/griffon/core/event/EventRouter.html" target="_blank">EventRouter</a></code> can publish events.
<code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> exposes the application wide <code>EventRouter</code> via a read-only
property. You may use Dependency Injection to inject an <code>EventRouter</code> to any class too.</p>
</div>
<div class="paragraph">
<p>Publishing an event can be done synchronously on the current thread, asynchronously to
the current thread, or asynchronously relative to the UI thread. For example, the following
snippet will trigger an event that will be handled in the same thread, which could be the
UI thread itself</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">application.eventRouter.publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">MyEventName</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">arg0</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arg1</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Whereas the following snippet guarantees that all event handlers that are interested in
an event of type <code>MyEventName</code> will be called outside of the UI thread</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">application.eventRouter.publishEventOutsideUI(<span class="string"><span class="delimiter">'</span><span class="content">MyEventName</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">arg0</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arg1</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, if you&#8217;d want event notification to be handed in a thread that is not the current
one (regardless if the current one is the UI thread or not) then use the following method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">application.eventRouter.publishEventAsync(<span class="string"><span class="delimiter">'</span><span class="content">MyEventName</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">arg0</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arg1</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you may specify an instance of a subclass of <code><a href="api/griffon/core/event/Event.html" target="_blank">Event</a></code> as the sole
argument to any of these methods. The event instance will be the single argument sent
to the event handlers when the <code>event</code> methods are invoked in this way.</p>
</div>
<div class="paragraph">
<p>There may be times when event publishing must be stopped for a while. If that&#8217;s the
case then you can instruct the application to stop delivering events by invoking the
following code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">application.eventRouter.eventPublishingEnabled = <span class="predefined-constant">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Any events sent through the application&#8217;s event bus will be discarded after that call;
there&#8217;s no way to get them back or replay them. When it&#8217;s time to enable the event bus
again simply call</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">application.eventRouter.eventPublishingEnabled = <span class="predefined-constant">true</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_events_consuming"><a class="anchor" href="#_events_consuming"></a>10.2. Consuming events</h3>
<div class="paragraph">
<p>Any artifact or class that abides to the following conventions can be registered as
an application listener, those conventions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is a Map, a <code><a href="api/griffon/core/CallableWithArgs.html" target="_blank">CallableWithArgs</a></code> or an Object.</p>
</li>
<li>
<p>in the case of a Map, each key maps to <code>&lt;EventName&gt;</code>, the value must be a CallableWithArgs.</p>
</li>
<li>
<p>in the case of object, public methods whose name matches <code>on&lt;EventName&gt;</code> will be used
as event handlers.</p>
</li>
<li>
<p>Objects and maps can be registered/unregistered by calling
<code>addApplicationListener()</code>/<code>removeApplicationListener()</code> on the <code>EventRouter</code> instance.</p>
</li>
<li>
<p>CallableWithArgs event handlers must be registered with an overloaded version of
<code>addApplicationListener()</code>/<code>removeApplicationListener()</code> that takes <code>&lt;EventName&gt;</code>
as the first parameter, and the callable itself as the second parameter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is a global, per-application event handler that can be registered. If you want
to take advantage of this feature you must define a class that implements the
<code><a href="api/griffon/core/event/EventHandler.html" target="_blank">EventHandler</a></code> interface. This class must be registered with a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code>.
Lastly both Controller and Service instances are automatically registered as application
event listeners.</p>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a>10.2.1. Examples</h4>
<div class="paragraph">
<p>These are some examples of event handlers:</p>
</div>
<div class="paragraph">
<p>Display a message right before default MVC groups are instantiated</p>
</div>
<div class="listingblock">
<div class="title">src/main/com/acme/ApplicationEventHandler.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>
<span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>

<span class="type">class</span> <span class="class">ApplicationEventHandler</span> <span class="directive">implements</span> <span class="predefined-type">EventHandler</span> {
    <span class="type">void</span> onBootstrapEnd(GriffonApplication application) {
        println <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
            Application configuration has finished loading.
            MVC Groups will be initialized now.
        </span><span class="delimiter">&quot;&quot;&quot;</span></span>.stripIndent(<span class="integer">12</span>)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/com/acme/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(<span class="predefined-type">EventHandler</span>)
            .to(ApplicationEventHandler)
            .asSingleton()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Print the name of the application plus a short message when the application is about to shut down.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> onShutdownStart(application)
        println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="content"> is shutting down</span><span class="delimiter">&quot;</span></span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Print a message every time the event "Foo" is published</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        application.eventRouter.addEventListener([
            <span class="key">Foo</span>: { println <span class="string"><span class="delimiter">'</span><span class="content">got foo!</span><span class="delimiter">'</span></span> } <span class="keyword">as</span> CallableWithArgs
        ])
    }

    <span class="type">void</span> fooAction() {
        <span class="comment">// do something</span>
        application.eventRouter.publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">Foo</span><span class="delimiter">'</span></span>)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>An alternative to the previous example using a <code>CallableWithArgs</code> event handler</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        application.eventRouter.addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">Foo</span><span class="delimiter">'</span></span>,
            { println <span class="string"><span class="delimiter">'</span><span class="content">got foo!</span><span class="delimiter">'</span></span> } <span class="keyword">as</span> CallableWithArgs
        ])
    }

    <span class="type">void</span> fooAction() {
        <span class="comment">// do something</span>
        application.eventRouter.publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">Foo</span><span class="delimiter">'</span></span>)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>An alternative to the previous example using a custom event class</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        application.eventRouter.addListener(Foo) { e -&gt; <span class="keyword">assert</span> e <span class="keyword">instanceof</span> Foo }
    }

    <span class="type">void</span> fooAction() {
        <span class="comment">// do something</span>
        application.eventRouter.publishEvent(<span class="keyword">new</span> MyController.Foo(<span class="local-variable">this</span>))
    }

    <span class="directive">static</span> <span class="type">class</span> <span class="class">Foo</span> <span class="directive">extends</span> griffon.core.Event {
        Foo(<span class="predefined-type">Object</span> source) { <span class="local-variable">super</span>(source) }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_events_application_events"><a class="anchor" href="#_events_application_events"></a>10.3. Application Events</h3>
<div class="paragraph">
<p>The following events will be triggered by the application when dealing with artifacts</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
NewInstance(Class klass, Object instance)
</td>
<td class="hdlist2">
<p>When a new artifact is created.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
DestroyInstance(Class klass, Object instance)
</td>
<td class="hdlist2">
<p>When an artifact instance is destroyed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
LoadAddonsStart(GriffonApplication application)
</td>
<td class="hdlist2">
<p>Before any <a href="#_addons">addons</a> are
initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
LoadAddonsEnd(GriffonApplication application, Map&lt;String, GriffonAddon&gt; addons)
</td>
<td class="hdlist2">
<p>After
all <a href="#_addons">addons</a> have been initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
LoadAddonStart(String name, GriffonAddon addon, GriffonApplication application)
</td>
<td class="hdlist2">
<p>Before
an addon is initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
LoadAddonEnd(String name, GriffonAddon addon, GriffonApplication application)
</td>
<td class="hdlist2">
<p>After
an addon has been initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These events will be triggered when dealing with MVC groups</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
InitializeMVCGroup(MVCGroupConfiguration configuration, MVCGroup group)
</td>
<td class="hdlist2">
<p>When a new MVC
group is initialized.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
CreateMVCGroup(MVCGroup group)
</td>
<td class="hdlist2">
<p>When a new MVC group is created.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
DestroyMVCGroup(MVCGroup group)
</td>
<td class="hdlist2">
<p>When an MVC group is destroyed.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_events_lifecycle_events"><a class="anchor" href="#_events_lifecycle_events"></a>10.4. Lifecycle Events</h3>
<div class="paragraph">
<p>The following events will be triggered by the application during each one of its phases</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
BootstrapStart(GriffonApplication application)
</td>
<td class="hdlist2">
<p>After logging configuration has
been setup, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
BootstrapEnd(GriffonApplication application)
</td>
<td class="hdlist2">
<p>At the end of the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
StartupStart(GriffonApplication application)
</td>
<td class="hdlist2">
<p>At the beginning of the <a href="#_overview_lifecycle_startup">Startup</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
StartupEnd(GriffonApplication application)
</td>
<td class="hdlist2">
<p>At the end of the <a href="#_overview_lifecycle_startup">Startup</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ReadyStart(GriffonApplication application)
</td>
<td class="hdlist2">
<p>At the beginning of the <a href="#_overview_lifecycle_ready">Ready</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ReadyEnd(GriffonApplication application)
</td>
<td class="hdlist2">
<p>At the end of the <a href="#_overview_lifecycle_ready">ready</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ShutdownRequested(GriffonApplication application)
</td>
<td class="hdlist2">
<p>Before the <a href="#_overview_lifecycle_shutdown">Shutdown</a> begins.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ShutdownAborted(GriffonApplication application)
</td>
<td class="hdlist2">
<p>If a <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code> prevented
the application from entering the <a href="#_overview_lifecycle_shutdown">Shutdown</a> phase.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ShutdownStart(GriffonApplication application)
</td>
<td class="hdlist2">
<p>At the beginning of the <a href="#_overview_lifecycle_shutdown">Shutdown</a> phase.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_events_miscellaneous_events"><a class="anchor" href="#_events_miscellaneous_events"></a>10.5. Miscellaneous Events</h3>
<div class="paragraph">
<p>These events will be triggered when a specific condition is reached</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
WindowShown(W window)
</td>
<td class="hdlist2">
<p>Triggered by the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> when a window is shown.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
WindowHidden(W window)
</td>
<td class="hdlist2">
<p>Triggered by the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> when a window is hidden.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
WindowAttached(String name, W window)
</td>
<td class="hdlist2">
<p>Triggered by the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> when a window is attached to it.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
WindowDetached(String name, W window)
</td>
<td class="hdlist2">
<p>Triggered by the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> when a window is detached from it.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_events_eventpublisher_transformation"><a class="anchor" href="#_events_eventpublisher_transformation"></a>10.6. The @EventPublisher AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to publish events through an <code><a href="api/griffon/core/event/EventRouter.html" target="_blank">EventRouter</a></code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/EventPublisher.html" target="_blank">@griffon.transform.EventPublisher</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/event/EventPublisher.html" target="_blank">EventPublisher</a></code>.</p>
</div>
<div class="paragraph">
<p>The following example shows a trivial usage of this feature</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.EventPublisher
<span class="type">class</span> <span class="class">Publisher</span> {
   <span class="type">void</span> doit(<span class="predefined-type">String</span> name) {
      publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">arg</span><span class="delimiter">'</span></span>, [name])
   }

   <span class="type">void</span> doit() {
      publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">empty</span><span class="delimiter">'</span></span>)
   }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The application&#8217;s event router will be used by default. If you&#8217;d like your custom
event publisher to use a private <code><a href="api/griffon/core/event/EventRouter.html" target="_blank">EventRouter</a></code> then you must define a binding
for it using a specific name, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.core.event.EventRouter</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.event.DefaultEventRouter</span>

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.AnnotationUtils.named</span>

<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="annotation">@Named</span>
<span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(EventRouter)
            .withClassifier(named(<span class="string"><span class="delimiter">'</span><span class="content">my-private-event-router</span><span class="delimiter">'</span></span>))
            .to(DefaultEventRouter)
            .asSingleton()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next specify the named <code><a href="api/griffon/core/event/EventRouter.html" target="_blank">EventRouter</a></code> as a parameter on the <code><a href="api/griffon/transform/EventPublisher.html" target="_blank">@griffon.transform.EventPublisher</a></code>
transformation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.EventPublisher(<span class="string"><span class="delimiter">'</span><span class="content">my-private-event-router</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Publisher</span> {
   <span class="type">void</span> doit(<span class="predefined-type">String</span> name) {
      publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">arg</span><span class="delimiter">'</span></span>, [name])
   }

   <span class="type">void</span> doit() {
      publishEvent(<span class="string"><span class="delimiter">'</span><span class="content">empty</span><span class="delimiter">'</span></span>)
   }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_internationalization"><a class="anchor" href="#_internationalization"></a>11. Internationalization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes Internationalization (<code>I18N</code>) features available to all applications.</p>
</div>
<div class="sect2">
<h3 id="_internationalization_message_source"><a class="anchor" href="#_internationalization_message_source"></a>11.1. MessageSource</h3>
<div class="paragraph">
<p>Applications have the ability to resolve internationalizable messages by leveraging
the behavior exposed by <code><a href="api/griffon/core/i18n/MessageSource.html" target="_blank">MessageSource</a></code>. This interface exposes the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>String getMessage(String key)</p>
</li>
<li>
<p>String getMessage(String key, Locale locale)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args, Locale locale)</p>
</li>
<li>
<p>String getMessage(String key, List args)</p>
</li>
<li>
<p>String getMessage(String key, List args, Locale locale)</p>
</li>
<li>
<p>String getMessage(String key, Map args)</p>
</li>
<li>
<p>String getMessage(String key, Map args, Locale locale)</p>
</li>
<li>
<p>Object resolveMessageValue(String key, Locale locale)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first set throws <code>NoSuchMessageException</code> if a message could not be resolved given
the key sent as argument. The following methods take and additional <code>defaultMessage</code>
parameter that may be used if no configured message is found. If this optional parameter
were to be null then the <code>key</code> is used as the message; in other words, these methods
never throw <code>NoSuchMessageException</code> nor return <code>null</code> unless the passed in <code>key</code> is null.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>String getMessage(String key, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Locale locale, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args, Locale locale, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, List args, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, List args, Locale locale, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Map args, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Map args, Locale locale, String defaultMessage)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The simplest way to resolve a message thus results like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">'</span><span class="content">some.key</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The set of methods that take a <code>List</code> as arguments are meant to be used from Groovy
code whereas those that take an <code>Object[]</code> are meant for Java code; this leads to
better idiomatic code as the following examples reveal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">getApplication().getMessageSource()
                .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">groovy.message</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">apples</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">bananas</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">getApplication().getMessageSource()
                .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">java.message</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">unicorns</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">rainbows</span><span class="delimiter">&quot;</span></span>});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course you may also use <code>List</code> versions in Java, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">getApplication().getMessageSource()
                .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">hybrid.message</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">bells</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">whistles</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_message_formats"><a class="anchor" href="#_message_formats"></a>11.1.1. Message Formats</h4>
<div class="paragraph">
<p>There are three types of message formats supported by default. Additional formats may
be supported if the right plugins are installed. Resources may be configured using
either properties files or Groovy scripts, please refer to the
<a href="#_internationalization_message_source_configuration">configuration</a> section.</p>
</div>
<div class="sect4">
<h5 id="_standard_format"><a class="anchor" href="#_standard_format"></a>Standard Format</h5>
<div class="paragraph">
<p>The first set of message formats are those supported by the JDK&#8217;s
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html">MessageFormat</a></code>
facilities. These formats work with all versions of the <code>getMessage()</code> method that
take a <code>List</code> or an <code>Object[]</code> as arguments. Examples follow. First the messages
stored in a properties file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>healthy.proverb = An {<span class="integer">0</span>} a day keeps the {<span class="integer">1</span>} away
yoda.says = {<span class="integer">0</span>} is the path to the dark side. {<span class="integer">0</span>} leads to {<span class="integer">1</span>}. {<span class="integer">1</span>} leads to {<span class="integer">2</span>}. {<span class="integer">2</span>} leads to suffering.</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the code used to resolve them</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">healthy.proverb</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">apple</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">doctor</span><span class="delimiter">'</span></span>])
<span class="keyword">assert</span> quote == <span class="string"><span class="delimiter">'</span><span class="content">An apple a day keeps the doctor away</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">yoday.says</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">Fear</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Anger</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Hate</span><span class="delimiter">&quot;</span></span>});
assertEquals(quote, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fear is the path to the dark side. Fear leads to Anger. Anger leads to Hate. Hate leads to suffering</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_map_format"><a class="anchor" href="#_map_format"></a>Map Format</h5>
<div class="paragraph">
<p>The following format is non-standard (i.e, not supported by <code>MessageFormat</code>) and can
only be resolved by Griffon. This format uses symbols instead of numbers as placeholders
for arguments. Thus the previous messages can be rewritten as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>healthy.proverb = An {:fruit} a day keeps the {:occupation} away
yoda.says = {:foo} is the path to the dark side. {:foo} leads to {:bar}. {:bar} leads to {:foobar}. {:foobar} leads to suffering.</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which may be resolved in this manner</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">healthy.proverb</span><span class="delimiter">'</span></span>, [<span class="key">fruit</span>: <span class="string"><span class="delimiter">'</span><span class="content">apple</span><span class="delimiter">'</span></span>, <span class="key">occupation</span>: <span class="string"><span class="delimiter">'</span><span class="content">doctor</span><span class="delimiter">'</span></span>])
<span class="keyword">assert</span> quote == <span class="string"><span class="delimiter">'</span><span class="content">An apple a day keeps the doctor away</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.CollectionUtils.map</span>;
<span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">yoday.says</span><span class="delimiter">&quot;</span></span>, map().e(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fear</span><span class="delimiter">&quot;</span></span>)
                                                              .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Anger</span><span class="delimiter">&quot;</span></span>)
                                                              .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">foobar</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Hate</span><span class="delimiter">&quot;</span></span>));
assertEquals(quote, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fear is the path to the dark side. Fear leads to Anger. Anger leads to Hate. Hate leads to suffering</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groovy_format"><a class="anchor" href="#_groovy_format"></a>Groovy format</h5>
<div class="paragraph">
<p>Groovy scripts have one advantage over properties files as you can embed custom logic
that may conditionally resolve a message based on environmental values or generate a
message on the fly. In order to accomplish this feat messages must be defined as
closures and must return a String value; if they do not then their return value will
be translated to a String. The following message uses the value of the current running
environment to determine the text of a warning to be displayed on a label</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.util.Environment</span>

warning.label = { args -&gt;
    <span class="keyword">if</span> (Environment.current == Environment.PRODUCTION) {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">The application has encountered an error: </span><span class="inline"><span class="inline-delimiter">$</span>args</span><span class="delimiter">&quot;</span></span>
    } <span class="keyword">else</span> {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">Somebody setup us the bomb! </span><span class="inline"><span class="inline-delimiter">$</span>args</span><span class="delimiter">&quot;</span></span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reference_keys"><a class="anchor" href="#_reference_keys"></a>11.1.2. Reference Keys</h4>
<div class="paragraph">
<p>There may be times where you would want to have a 2 keys reference the same value,
as if one key were an alias for the other. <code>MessageSource</code> supports the notion of
referenced keys for this matter. In order to achieve this, the value of the alias
key must define the aliased key with a special format, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>famous.quote = This is {<span class="integer">0</span>}!
hello.world = <span class="error">@</span>[famous.quote]</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Resolving those keys results in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="keyword">assert</span> getApplication()
           .getMessageSource()
           .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">famous.quote</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">Sparta</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">This is Sparta!</span><span class="delimiter">'</span></span>

<span class="keyword">assert</span> getApplication()
          .getMessageSource()
          .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">hello.world</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">Griffon</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">This is Griffon!</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_internationalization_message_source_configuration"><a class="anchor" href="#_internationalization_message_source_configuration"></a>11.2. MessageSource Configuration</h3>
<div class="paragraph">
<p>Messages may be configured in either properties files or Groovy scripts.
Groovy scripts have precedence over properties files should there be two files that
match the same <code>basename</code>. The default configured <code>basename</code> is &#8220;messages&#8221;, thus
the application will search for the following resources in the classpath.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>messages.properties</p>
</li>
<li>
<p>messages.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of course Groovy scripts are only enabled if you add a dependency to the <code>griffon-groovy</code>
module to your project. The default <code>basename</code> may be changed to some other value,
or additional basenames may be specified too; it&#8217;s just a matter of configuring a
<a href="api/griffon/core/injection/Module.html" target="_blank">Module</a> override</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">core</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(MessageSource.class)
            .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationMessageSource</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_basename</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both properties files and Groovy scripts are subject locale aware loading mechanism
described next. For a Locate set to <code>de_CH_Basel</code> the following resources will be
searched for and loaded</p>
</div>
<div class="ulist">
<ul>
<li>
<p>messages.properties</p>
</li>
<li>
<p>messages.groovy</p>
</li>
<li>
<p>messages_de.properties</p>
</li>
<li>
<p>messages_de.groovy</p>
</li>
<li>
<p>messages_de_CH.properties</p>
</li>
<li>
<p>messages_de_CH.groovy</p>
</li>
<li>
<p>messages_de_CH_Basel.properties</p>
</li>
<li>
<p>messages_de_CH_Basel.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Properties files and Groovy scripts used for internationalization purposes are usually
placed under <code>griffon-app/i18n</code> The default <code>messages.properties</code> file is placed in
this directory upon creating an application using the standard project templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_internationalization_message_source_transformation"><a class="anchor" href="#_internationalization_message_source_transformation"></a>11.3. The @MessageSourceAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to resolve messages through a <code>MessageSource</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/MessageSourceAware.html" target="_blank">@griffon.transform.MessageSourceAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/i18n/MessageSource.html" target="_blank">MessageSource</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to resolve messages</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.MessageSourceAware
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="predefined-type">String</span> lookupValues(<span class="predefined-type">String</span> arg) {
        bean.name = arg
        bean.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">some.message.key</span><span class="delimiter">'</span></span>, [bean.name])
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The application&#8217;s <code>MessageSource</code> will be injected to annotated beans if no name is
specified as an argument to <code>MessageSourceAware</code>. You may define multiple <code>MessageSource</code>
bindings as long as you qualify them with a distinct name, such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(MessageSource.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">foofile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();

        bind(MessageSource.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">barfile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then make use of any of these bindings like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.MessageSourceAware(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a>12. Resource Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes resource management and injection features available to all applications.</p>
</div>
<div class="sect2">
<h3 id="_resources_locating_resources"><a class="anchor" href="#_resources_locating_resources"></a>12.1. Locating Classpath Resources</h3>
<div class="paragraph">
<p>Resources can be loaded form the classpath using the standard mechanism provided by the
Java runtime, that is, ask a <code>ClassLoader</code> instance to load a resource <code>URL</code> or obtain
an <code>InputStream</code> that points to the resource.</p>
</div>
<div class="paragraph">
<p>But the code can get quite verbose, take for example the following view code that locates
a text file and displays it on a text component</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">scrollPane {
    textArea(<span class="key">columns</span>: <span class="integer">40</span>, <span class="key">rows</span>: <span class="integer">20</span>,
        <span class="key">text</span>: <span class="local-variable">this</span>.class.classLoader.getResource(<span class="string"><span class="delimiter">'</span><span class="content">someTextFile.txt</span><span class="delimiter">'</span></span>).text)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to reduce visual clutter, also to provide an abstraction over resource location,
applications rely on <code><a href="api/griffon/core/resources/ResourceHandler.html" target="_blank">ResourceHandler</a></code>, which exposes the following contract</p>
</div>
<div class="ulist">
<ul>
<li>
<p>URL getResourceAsURL(String name)</p>
</li>
<li>
<p>InputStream getResourceAsStream(String name)</p>
</li>
<li>
<p>List&lt;URL&gt; getResources(String name)</p>
</li>
<li>
<p>ClassLoader classloader()</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus, the previous example can be rewritten in this way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">scrollPane {
    textArea(<span class="key">columns</span>: <span class="integer">40</span>, <span class="key">rows</span>: <span class="integer">20</span>,
        <span class="key">text</span>: application.resourceHandler.getResourceAsURL(<span class="string"><span class="delimiter">'</span><span class="content">someTextFile.txt</span><span class="delimiter">'</span></span>).text)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the future Griffon may switch to a modularized runtime, this abstraction will shield
you from any problems when the underlying mechanism changes, such as picking the correct
<code>ClassLoader</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resources_aware_transformation"><a class="anchor" href="#_resources_resources_aware_transformation"></a>12.2. The @ResourcesAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to locate resources through a <code>ResourceHandler</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/ResourcesAware.html" target="_blank">@griffon.transform.ResourcesAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/resources/ResourceHandler.html" target="_blank">ResourceHandler</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to locate resources</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.ResourcesAware
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="predefined-type">InputStream</span> fetchResource(<span class="predefined-type">String</span> arg) {
        bean.name = arg
        bean.getResourceAsStream(bean.name)
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resource_resolver"><a class="anchor" href="#_resources_resource_resolver"></a>12.3. ResourceResolver</h3>
<div class="paragraph">
<p>Applications have the ability to resolve internationalizable messages by leveraging
the behavior exposed by <code><a href="api/griffon/core/resources/ResourceResolver.html" target="_blank">ResourceResolver</a></code>. This interface exposes the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Object resolveResource(String key)</p>
</li>
<li>
<p>Object resolveResource(String key, Locale locale)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args, Locale locale)</p>
</li>
<li>
<p>Object resolveResource(String key, List args)</p>
</li>
<li>
<p>Object resolveResource(String key, List args, Locale locale)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args, Locale locale)</p>
</li>
<li>
<p>Object resolveResorceValue(String key, Locale locale)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first set throws <code>NoSuchResourceException</code> if a message could not be resolved given
the key sent as argument. The following methods take and additional <code>defaultValue</code>
parameter that may be used if no configured resource is found. If this optional parameter
were to be null then the <code>key</code> is used as the literal value of the resource; in other words,
these methods never throw <code>NoSuchResourceException</code> nor return <code>null</code> unless the passed
in <code>key</code> is null.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Object resolveResource(String key, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Locale locale, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args, Locale locale, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, List args, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, List args, Locale locale, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args, Locale locale, Object defaultValue)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The simplest way to resolve a message thus results like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">getApplication().getResourceResolver().resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The set of methods that take a <code>List</code> as arguments are meant to be used from Groovy
code whereas those that take an <code>Object[]</code> are meant for Java code; this leads to
better idiomatic code as the following examples reveal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">getApplication().getResourceResolver()
                .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">groovy.icon.resource</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">small</span><span class="delimiter">'</span></span>]))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">getApplication().getResourceResolver()
                .resolveResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">java.icon.resource</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">large</span><span class="delimiter">&quot;</span></span>});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course you may also use <code>List</code> versions in Java, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">getApplication().getResourceResolver()
                .resolveResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">hybrid.icon.resource</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">medium</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_message_formats_2"><a class="anchor" href="#_message_formats_2"></a>12.3.1. Message Formats</h4>
<div class="paragraph">
<p>There are three types of resource formats supported by default. Additional formats may
be supported if the right plugins are installed. Resources may be configured using
either properties files or Groovy scripts, please refer to the
<a href="#_resources_resource_resolver_configuration">configuration</a> section.</p>
</div>
<div class="sect4">
<h5 id="_standard_format_2"><a class="anchor" href="#_standard_format_2"></a>Standard Format</h5>
<div class="paragraph">
<p>The first set of resource formats are those supported by the JDK&#8217;s
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html">MessageFormat</a></code>
facilities. These formats work with all versions of the <code>resolveResource()</code> method that
take a <code>List</code> or an <code>Object[]</code> as arguments. Examples follow. First the resource
definitions stored in a properties file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>menu.icon = /img/icons/menu-{<span class="integer">0</span>}.png</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming there are three icon files stored at <code>griffon-app/resources/img/icons</code> whose
filenames are <code>menu-small.png</code>, <code>menu-medium.png</code> and <code>menu-large.png</code>, a component may
resolve any of them with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="predefined-type">Object</span> icon = getApplication().getResourceResolver()
                              .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">large</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_map_format_2"><a class="anchor" href="#_map_format_2"></a>Map Format</h5>
<div class="paragraph">
<p>The following format is non-standard (i.e, not supported by <code>MessageFormat</code>) and can
only be resolved by Griffon. This format uses symbols instead of numbers as placeholders
for arguments. Thus the previous messages can be rewritten as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>menu.icon = /img/icons/menu-{:size}.png</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which may be resolved in this manner</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="predefined-type">Object</span> icon = getApplication().getResourceResolver()
                              .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>, [<span class="key">size</span>: <span class="string"><span class="delimiter">'</span><span class="content">large</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groovy_format_2"><a class="anchor" href="#_groovy_format_2"></a>Groovy format</h5>
<div class="paragraph">
<p>Groovy scripts have one advantage over properties files as you can embed custom logic
that may conditionally resolve a resource based on environmental values or generate a
message on the fly. In order to accomplish this feat resources must be defined as
closures. The following message uses the value of the current running environment
to determine the text of a warning to be displayed on a label</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">java.awt.Rectangle</span>

direct.instance = <span class="keyword">new</span> <span class="predefined-type">Rectangle</span>(<span class="integer">10</span>i, <span class="integer">20</span>i, <span class="integer">30</span>i, <span class="integer">40</span>i)
computed.instance = { x, y, w, h -&gt;
    <span class="keyword">new</span> <span class="predefined-type">Rectangle</span>(x, y, w, h)
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_conversion"><a class="anchor" href="#_type_conversion"></a>12.3.2. Type Conversion</h4>
<div class="paragraph">
<p>Note that the return value of <code>resolveResource</code> is marked as <code>Object</code> but you&#8217;ll get
a <code>String</code> from the first two formats. You&#8217;ll have to rely on <a href="#_resources_property_editors">property editors</a>
in order to transform the value into the correct type. <a href="#_resources_injected_resources">Injected resources</a>
are automatically transformed to the expected type.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how it can be done</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">javax.swing.Icon</span>
<span class="keyword">import</span> <span class="include">java.beans.PropertyEditor</span>
<span class="keyword">import</span> <span class="include">java.beans.PropertyEditorManager</span>
...
Object iconValue = getApplication().getResourceResolver()
                                   .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">large</span><span class="delimiter">'</span></span>])
<span class="predefined-type">PropertyEditor</span> propertyEditor = <span class="predefined-type">PropertyEditorManager</span>.findEditor(<span class="predefined-type">Icon</span>)
propertyEditor.setAsText(<span class="predefined-type">String</span>.valueOf(iconValue))
<span class="predefined-type">Icon</span> icon = propertyEditor.getValue()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reference_keys_2"><a class="anchor" href="#_reference_keys_2"></a>12.3.3. Reference Keys</h4>
<div class="paragraph">
<p>There may be times where you would want to have a 2 keys reference the same value,
as if one key were an alias for the other. <code>ResourceResolver</code> supports the notion of
referenced keys for this matter. In order to achieve this, the value of the alias
key must define the aliased key with a special format, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>action.icon = /img/icons/action-{<span class="integer">0</span>}.png
hello.icon = <span class="error">@</span>[action.icon]</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Resolving those keys results in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><span class="keyword">assert</span> getApplication()
           .getResourceResolver()
           .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">action.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">copy</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">/img/icons/action-copy.png</span><span class="delimiter">'</span></span>

<span class="keyword">assert</span> getApplication()
           .getResourceResolver()
           .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">hello.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">paste</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">/img/icons/action-paste.png</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resource_resolver_configuration"><a class="anchor" href="#_resources_resource_resolver_configuration"></a>12.4. ResourceResolver Configuration</h3>
<div class="paragraph">
<p>Resources may be configured in either properties files or Groovy scripts.
Groovy scripts have precedence over properties files should there be two files that
match the same <code>basename</code>. The default configured <code>basename</code> is &#8220;resources&#8221;, thus
the application will search for the following resources in the classpath.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resources.properties</p>
</li>
<li>
<p>resources.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of course Groovy scripts are only enabled if you add a dependency to the <code>griffon-groovy</code>
module to your project. The default <code>basename</code> may be changed to some other value,
or additional basenames may be specified too; it&#8217;s just a matter of configuring a
<a href="api/griffon/core/injection/Module.html" target="_blank">Module</a> override</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">core</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ResourceResolver.class)
            .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceResolver</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_basename</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both properties files and Groovy scripts are subject locale aware loading mechanism
described next. For a Locate set to <code>de_CH_Basel</code> the following resources will be
searched for and loaded</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resources.properties</p>
</li>
<li>
<p>resources.groovy</p>
</li>
<li>
<p>resources_de.properties</p>
</li>
<li>
<p>resources_de.groovy</p>
</li>
<li>
<p>resources_de_CH.properties</p>
</li>
<li>
<p>resources_de_CH.groovy</p>
</li>
<li>
<p>resources_de_CH_Basel.properties</p>
</li>
<li>
<p>resources_de_CH_Basel.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Properties files and Groovy scripts used for internationalization purposes are usually
placed under <code>griffon-app/resources</code> The default <code>resources.properties</code> file is placed in
this directory upon creating an application using the standard project templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resource_resolver_transformation"><a class="anchor" href="#_resources_resource_resolver_transformation"></a>12.5. The @ResourceResolverAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to resolve resources through a <code>ResourceResolver</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/ResourceResolverAware.html" target="_blank">@griffon.transform.ResourceResolverAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/resources/ResourceResolver.html" target="_blank">ResourceResolver</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to resolve resources</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.ResourceResolverAware
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="predefined-type">String</span> lookupValues(<span class="predefined-type">String</span> arg) {
        bean.name = arg
        bean.resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">some.resource.key</span><span class="delimiter">'</span></span>, [bean.name])
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The application&#8217;s <code>ResourceResolver</code> will be injected to annotated beans if no name is
specified as an argument to <code>ResourceResolverAware</code>. You may define multiple <code>ResourceResolver</code>
bindings as long as you qualify them with a distinct name, such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ResourceResolver.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">foofile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();

        bind(ResourceResolver.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">barfile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then make use of any of these bindings like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="annotation">@griffon</span>.transform.ResourceResolverAware(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_injected_resources"><a class="anchor" href="#_resources_injected_resources"></a>12.6. Resource Injection</h3>
<div class="paragraph">
<p>Resources may be automatically injected to any instance created via the application&#8217;s
<code>Injector</code>. Injection points must be annotated with <code><a href="api/griffon/core/resources/InjectedResource.html" target="_blank">@griffon.core.resources.InjectedResource</a></code>
which can be set on properties (Groovy), fields (Java and Groovy) and setter methods (Java and Groovy).
@InjectedResource is a perfect companion to <a href="#_models">models</a> as the following example shows</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/resources/resources.properties</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>sample.SampleModel.griffonLogo = /griffon-logo-<span class="integer">48</span>x48.png
logo = /griffon-logo-{<span class="integer">0</span>}x{<span class="integer">0</span>}.png</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/sample/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.resources.InjectedResource</span>
<span class="keyword">import</span> <span class="include">javax.swing.Icon</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@InjectedResource</span> <span class="predefined-type">Icon</span> griffonLogo
    <span class="annotation">@InjectedResource</span>(key=<span class="string"><span class="delimiter">'</span><span class="content">logo</span><span class="delimiter">'</span></span>, args=[<span class="string"><span class="delimiter">'</span><span class="content">16</span><span class="delimiter">'</span></span>]) <span class="predefined-type">Icon</span> smallGriffonLogo
    <span class="annotation">@InjectedResource</span>(key=<span class="string"><span class="delimiter">'</span><span class="content">logo</span><span class="delimiter">'</span></span>, args=[<span class="string"><span class="delimiter">'</span><span class="content">64</span><span class="delimiter">'</span></span>]) <span class="predefined-type">Icon</span> largeGriffonLogo
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@InjectedResource</code> assumes a naming convention in order to determine the resource key
to use. These are the rules applied by the default by <code><a href="api/griffon/core/resources/ResourcesInjector.html" target="_blank">ResourcesInjector</a></code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a value is specified for the <code>key</code> argument then use it as is.</p>
</li>
<li>
<p>otherwise construct a key based in the field name prefixed with the full qualified
class name of the field&#8217;s owner.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may also specify a default value if the resource definition is not found, however
be aware that this value must be set as a String thus guaranteeing a type conversion.
An optional <code>format</code> value may be specified as a hint to the PropertyEditor used during
value conversion, for example</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/sample/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.resources.InjectedResource</span>
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@InjectedResource</span>(defaultValue=<span class="string"><span class="delimiter">'</span><span class="content">10.04.2013 2:30 PM</span><span class="delimiter">'</span></span>, format=<span class="string"><span class="delimiter">'</span><span class="content">dd.MM.yyyy h:mm a</span><span class="delimiter">'</span></span>)
    <span class="predefined-type">Date</span> date
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_property_editors"><a class="anchor" href="#_resources_property_editors"></a>12.7. Property Editors</h3>
<div class="paragraph">
<p>Resource injection makes use of the <a href="http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyEditor.html">PropertyEditor</a>
mechanism provided by the <code>java.beans</code> package. The default <code><a href="api/griffon/core/resources/ResourcesInjector.html" target="_blank">ResourcesInjector</a></code> queries
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyEditorManager.html">PropertyEditorManager</a></code>
whenever a resource value must be transformed to a target type.</p>
</div>
<div class="paragraph">
<p>PropertyEditorManager provides methods for registering custom PropertyEditors, it also
follows a class name convention to load PropertyEditors should a custom one is not
programmatically registered. Griffon applications will automatically load and register
PropertyEditors from the following classpath resource: <code>/META-INF/services/java.beans.PropertyEditor</code>.
Each line follows the format</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>target.type = full.qualified.classname</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table enumerates the default PropertyEditors loaded by Griffon at startup.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Core PropertyEditor mappings</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Editor Class</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.StringPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.io.File</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.FilePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.net.URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.URLPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.net.URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.URIPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.math.BigDecimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BigDecimalPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.math.BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BigIntegerPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BooleanPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'boolean', 'query', 'switch'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BytePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.ShortPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.IntegerPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.LongPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.FloatPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.DoublePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'currency', 'percent'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Calendar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.CalendarPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.DatePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Where the following apply</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'currency' and 'percent' are literal values.</p>
</li>
<li>
<p>'boolean' accepts <code>true</code> and <code>false</code> as values.</p>
</li>
<li>
<p>'query' accepts <code>yes</code> and <code>no</code> as values.</p>
</li>
<li>
<p>'switch' accepts <code>on</code> and <code>off</code> as values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Core UI Toolkit dependencies, such as <code>griffon-swing</code> and <code>griffon-javafx</code>, deliver
additional PropertyEditors. The following tables summarize these additions</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 6. Swing PropertyEditor mappings</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Editor Class</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.awt.Color</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.ColorPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#RGB ; #RGBA ; #RRGGBB; #RRGGBBAA ; Color constant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Dimension</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.DimensionPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Font</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.swing.editors.FontPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">family-style-size</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.GradientPaint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.GradientPaintPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x1, y1, #RGB, x2, y2, #RGB, CYCLIC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.ImagePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path/to/image_file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Insets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.InsetsPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">top, left, bottom, right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.LinearGradientPaint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.LinearGradientPaintPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xy, y1, x2, x2, [0.0, 1.0], [#RGB, #RGB], REPEAT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.PointPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Polygon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.PolygonPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x1, y1, x2, y2, &#8230;&#8203;, xn, yn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.RadialGradientPaint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.RadialGradientPaintPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xy, y1, r, fx, fy, [0.0, 1.0], [#RGB, #RGB], REPEAT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.Rectangle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.RectanglePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y, width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.geom.Point2D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.Point2DPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.geom.Rectangle2D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.Rectangle2DPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y, width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> java.awt.image.BufferedImage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.swing.editors.BufferedImagePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path/to/image_file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> javax.swing.Icon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.swing.editors.IconPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path/to/image_file</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Where the following apply</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>R</code>, <code>G</code>, <code>B</code> and <code>A</code> represent an hexadecimal number.</p>
</li>
<li>
<p>CYCLIC may be <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p>REPEAT must be one of <code>MultipleGradientPaint.CycleMethod</code>.</p>
</li>
<li>
<p>GradientPaint supports another format: x1, y1 | x2, y2, | #RGB, #RGB | CYCLIC</p>
</li>
<li>
<p>Color supports all color constants defined by <code>griffon.swing.support.Colors</code>.</p>
</li>
<li>
<p>All color formats are supported by gradient editors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following styles are supported by <code>FontPropertyEditor</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>BOLD</p>
</li>
<li>
<p>ITALIC</p>
</li>
<li>
<p>BOLDITALIC</p>
</li>
<li>
<p>PLAIN</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. JavaFX PropertyEditor mappings</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Editor Class</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> javafx.geometry.Dimension2D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.javafx.editors.Dimension2DPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.geometry.Insets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.javafx.editors.InsetsPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">top, left, bottom, right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.geometry.Point2D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.javafx.editors.Point2DPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.geometry.Rectangle2D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.javafx.editors.Rectangle2DPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y , width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.image.Image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.javafx.editors.ImagePropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">path/to/image_file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> javafx.scene.paint.Color</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.javafx.editors.ColorPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#RGB ; #RGBA ; #RRGGBB; #RRGGBBAA ; Color constant</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Where the following apply</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>R</code>, <code>G</code>, <code>B</code> and <code>A</code> represent an hexadecimal number.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. Pivot PropertyEditor mappings</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Editor Class</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.awt.Color</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.pivot.editors.ColorPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#RGB ; #RGBA ; #RRGGBB; #RRGGBBAA ; Color constant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> org.apache.pivot.wtk.Bounds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.pivot.editors.BoundsPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y , width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Dimensions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.pivot.editors.DimensionsPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">width, height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Insets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.pivot.editors.InsetsPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">top, left, right, bottom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> org.apache.pivot.wtk.Point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.pivot.editors.PointPropertyEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x, y</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Where the following apply</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>R</code>, <code>G</code>, <code>B</code> and <code>A</code> represent an hexadecimal number.</p>
</li>
<li>
<p>Color supports all color constants defined by <code>griffon.pivot.support.Colors</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_addons"><a class="anchor" href="#_addons"></a>13. Addons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Addons allow plugin authors to perform the following tasks</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Perform initialization code during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</li>
<li>
<p>Supply additional configuration that can be used to define new <code><a href="api/griffon/core/mvc/MVCGroupConfiguration.html" target="_blank">MVCGroupConfiguration</a></code>s.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Addons are automatically registered as <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code>s with the application
instance. They are also registered as <a href="#_events_consuming">event handlers</a> with the application&#8217;s
<code><a href="api/griffon/core/event/EventRouter.html" target="_blank">EventRouter</a></code>.</p>
</div>
<div class="paragraph">
<p>Addons must be registered with a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> in order to be discovered by the runtime.
Here&#8217;s a simple example of a custom Addon that prints out the name of an <code><a href="api/griffon/core/mvc/MVCGroup.html" target="_blank">MVCGroup</a></code>
when said group is initialized</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">griffon.core.mvc.MVCGroup</span>;
<span class="keyword">import</span> <span class="include">griffon.core.mvc.MVCGroupConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.addon.AbstractGriffonAddon</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">inspector</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">InspectorAddon</span> <span class="directive">extends</span> AbstractGriffonAddon {
    <span class="directive">public</span> <span class="type">void</span> onInitializeMVCGroup(<span class="annotation">@Nonnull</span> MVCGroupConfiguration configuration, <span class="annotation">@Nonnull</span> MVCGroup group) {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">MVC group </span><span class="delimiter">&quot;</span></span> + group.getMvcType() + <span class="string"><span class="delimiter">&quot;</span><span class="content"> initialized</span><span class="delimiter">&quot;</span></span>);
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is how it can be registered with a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">griffon.core.addon.GriffonAddon</span>;
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">inspector</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">InspectorModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(GriffonAddon.class)
            .to(InspectorAddon.class)
            .asSingleton();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_addons-addonmanager"><a class="anchor" href="#_addons-addonmanager"></a>13.1. The AddonManager</h3>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/addon/AddonManager.html" target="_blank">AddonManager</a></code> is responsible for keeping track of instantiated
<code><a href="api/griffon/core/addon/GriffonAddon.html" target="_blank">GriffonAddon</a></code>s. You may use this manager to query which addons have been
registered with the application, thus conditionally enable further features
if a particular addon is instantiated or not.</p>
</div>
<div class="paragraph">
<p>The name of a <code><a href="api/griffon/core/addon/GriffonAddon.html" target="_blank">GriffonAddon</a></code> is used as the key to register it with the <code><a href="api/griffon/core/addon/AddonManager.html" target="_blank">AddonManager</a></code>,
in other words, the previous <strong>inspector</strong> addon can be queried in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">GriffonAddon addon = application.getAddonManager().findAddon(<span class="string"><span class="delimiter">&quot;</span><span class="content">inspector</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a>14. Testing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_testing_unit"><a class="anchor" href="#_testing_unit"></a>14.1. Unit Testing</h3>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
<div class="sect3">
<h4 id="_the_griffonunit_junit_rule"><a class="anchor" href="#_the_griffonunit_junit_rule"></a>14.1.1. The GriffonUnit JUnit Rule</h4>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
<div class="sect4">
<h5 id="_overriding_module_bindings"><a class="anchor" href="#_overriding_module_bindings"></a>Overriding Module Bindings</h5>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
<div class="sect5">
<h6 id="_defining_specific_modules"><a class="anchor" href="#_defining_specific_modules"></a>Defining Specific Modules</h6>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
</div>
<div class="sect5">
<h6 id="_overriding_existing_modules"><a class="anchor" href="#_overriding_existing_modules"></a>Overriding Existing Modules</h6>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
</div>
<div class="sect5">
<h6 id="_defining_bindings_on_the_testcase"><a class="anchor" href="#_defining_bindings_on_the_testcase"></a>Defining Bindings on the TestCase</h6>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
<h7 id="_inner_classes" class="discrete">Inner Classes</h7>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
<h7 id="_fields" class="discrete">Fields</h7>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_testfor_annotation"><a class="anchor" href="#_the_testfor_annotation"></a>14.1.2. The @TestFor Annotation</h4>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_integration"><a class="anchor" href="#_testing_integration"></a>14.2. Integration Testing</h3>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
<div class="sect3">
<h4 id="_swing"><a class="anchor" href="#_swing"></a>14.2.1. Swing</h4>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
</div>
<div class="sect3">
<h4 id="_pivot"><a class="anchor" href="#_pivot"></a>14.2.2. Pivot</h4>
<div class="paragraph">
<p>lorem ipsum</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_buildtools"><a class="anchor" href="#_buildtools"></a>15. Build Tools</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_buildtools_gvm"><a class="anchor" href="#_buildtools_gvm"></a>15.1. GVM</h3>
<div class="paragraph">
<p>From <a href="http://gvmtool.net">GVM&#8217;s</a> website</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>GVM is a tool for managing parallel Versions of multiple Software Development Kits
on most Unix based systems. It provides a convenient command line interface for
installing, switching, removing and listing Candidates.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>GVM can be used to install and keep up to date other build tools that make your life
easier when developing Griffon projects. These tools are <code>lazybones</code> and <code>gradle</code>.
Installing GVM itself is as easy as typing the following on a command prompt</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ curl -s get.gvmtool.net | bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next install the latest versions of <code>lazybones</code> and <code>gradle</code> by invoking</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ gvm install lazybones
$ gvm install gradle</code></pre>
</div>
</div>
<div class="paragraph">
<p>GVM works on POSIX compliant environments, event on Windows if <a href="https://www.cygwin.com/">Cygwin</a>
is installed. We recommend you to install <a href="http://babun.github.io/">Babun shell</a> as it enables
much more features than plain Cygwin. There&#8217;s also a Power Shell alternative:
<a href="https://github.com/flofreud/posh-gvm">posh-gvm</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_buildtools_lazybones"><a class="anchor" href="#_buildtools_lazybones"></a>15.2. Lazybones</h3>
<div class="paragraph">
<p><a href="https://github.com/pledbrook/lazybones" target="_blank">Lazybones</a> allows you to create a new project structure for any framework or
library for which the tool has a template.</p>
</div>
<div class="sect3">
<h4 id="_configuration_2"><a class="anchor" href="#_configuration_2"></a>15.2.1. Configuration</h4>
<div class="paragraph">
<p>All standard Griffon templates are published to <a href="https://bintray.com/griffon/griffon-lazybones-templates" class="bare">https://bintray.com/griffon/griffon-lazybones-templates</a>
You must configure this repository with Lazybones settings file. Edit <code>$USER_HOME/.lazybones/config.groovy</code>
and paste the following content</p>
</div>
<div class="listingblock">
<div class="title">$USER_HOME/.lazybones/config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>bintrayRepositories = [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">griffon/griffon-lazybones-templates</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">pledbrook/lazybones-templates</span><span class="delimiter">&quot;</span></span>
]</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Invoking the <code>lazybones list</code> command should result in all currently available Griffon project
templates to be displayed in the output.</p>
</div>
</div>
<div class="sect3">
<h4 id="_templates"><a class="anchor" href="#_templates"></a>15.2.2. Templates</h4>
<div class="paragraph">
<p>The following templates are available at the standard template repository</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
griffon-swing-java
</td>
<td class="hdlist2">
<p>A template that initializes an application with Swing and Java.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-swing-groovy
</td>
<td class="hdlist2">
<p>A template that initializes an application with Swing and Groovy.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-javafx-ava
</td>
<td class="hdlist2">
<p>A template that initializes an application with JavaFX and Java.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-javafx-groovy
</td>
<td class="hdlist2">
<p>A template that initializes an application with JavaFX and Groovy.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-pivot-java
</td>
<td class="hdlist2">
<p>A template that initializes an application with Pivot and Java.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-pivot-groovy
</td>
<td class="hdlist2">
<p>A template that initializes an application with Pivot and Groovy.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-lanterna-java
</td>
<td class="hdlist2">
<p>A template that initializes an application with Lanterna and Java.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-lanterna-groovy
</td>
<td class="hdlist2">
<p>A template that initializes tan application with Lanterna and Groovy.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
griffon-plugin
</td>
<td class="hdlist2">
<p>A template that initializes a Griffon plugin project.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All application project templates include a subtemplate named <strong>artifact</strong> that provides the
following artifact templates</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
model
</td>
<td class="hdlist2">
<p>A standard Model artifact.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
view
</td>
<td class="hdlist2">
<p>A toolkit specific View artifact.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
controller
</td>
<td class="hdlist2">
<p>A standard Controller artifact.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
service
</td>
<td class="hdlist2">
<p>A standard Service artifact.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
test
</td>
<td class="hdlist2">
<p>A standard unit Test artifact.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
mvcgroup
</td>
<td class="hdlist2">
<p>Initializes Model, View, Controller, Test and IntegrationTest artifacts for a single MVC group.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>swing</code> and <code>pivot</code> <strong>artifact</strong> templates provided additional artifact templates</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
integrationTest
</td>
<td class="hdlist2">
<p>A standard integration Test artifact.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can invoke any of these templates in the following ways</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ lazybones generate artifact::controller</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command creates a new <em>Controller</em> artifact. You&#8217;ll be asked for a package and
a class name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ lazybones generate artifact::mvcgroup::com.acme::group</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command creates an <em>MVC Group</em> whose package is <em>com.acme</em> and class name is
<em>group</em>. There will be 5 new artifacts in total.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buildtools_gradle"><a class="anchor" href="#_buildtools_gradle"></a>15.3. Gradle</h3>
<div class="paragraph">
<p><a href="http://www.gradle.org/" target="_blank">Gradle</a> is the preferred build tool for a Griffon project. The <a href="#_buildtools_lazybones">Lazybones</a>
templates create a default <code>build.gradle</code> file that contains the minimum configuration
to build, test and package a Griffon application or plugin.</p>
</div>
<div class="sect3">
<h4 id="_the_griffon_plugin"><a class="anchor" href="#_the_griffon_plugin"></a>15.3.1. The "griffon" Plugin</h4>
<div class="paragraph">
<p>The Griffon plugin adds default dependencies and conventional configuration to a Griffon
project. This configuration follows the standard Griffon project layout.</p>
</div>
<div class="sect4">
<h5 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h5>
<div class="paragraph">
<p>To use the Griffon plugin, include in your build script:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.codehaus.griffon:gradle-griffon-plugin:2.2.0'
    }
}

apply plugin: 'org.codehaus.griffon.griffon'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This plugin performs the following configurations when applied to a project</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register <em>jcenter()</em> , <em><a href="http://dl.bintray.com/griffon/griffon-plugins" class="bare">http://dl.bintray.com/griffon/griffon-plugins</a></em> and <em>mavenLocal()</em> as default repositories.</p>
</li>
<li>
<p>Apply the following plugins: <code>idea</code>, <code>java</code>, <code>application</code>.</p>
</li>
<li>
<p>Create additional compile-time only configurations: <em>compileOnly</em>, <em>testCompileOnly</em>.</p>
</li>
<li>
<p>Resolve plugin dependencies using the <em>griffon</em> configuration.</p>
</li>
<li>
<p>Adjusts javadoc/groovydoc/idea/eclipse classpaths given the new configurations.</p>
</li>
<li>
<p>Configures standard source directories with <code>main</code> and <code>test</code> source sets.</p>
</li>
<li>
<p>Adjusts how <code>main</code> and <code>test</code> resource processing is performed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following dependencies are added by default too</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on <code>compile</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-core:2.2.0</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>compileOnly</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-core-compile:2.2.0</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>testCompile</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-core-test:2.2.0</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>testCompileOnly</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-core-compile:2.2.0</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <strong>toolkit</strong> conventional property is defined (plugins may opt to skip it) then
the following dependencies are added</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on <code>compile</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-&lt;toolkit&gt;:2.2.0</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>groovy</code> plugin is applied then the following dependencies are also added</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on <code>compile</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-groovy:2.2.0</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>compile</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-&lt;toolkit&gt;-groovy:2.2.0</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>compileOnly</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-groovy-compile:2.2.0</p>
</li>
</ul>
</div>
</li>
<li>
<p>on <code>testCompileOnly</code></p>
<div class="ulist">
<ul>
<li>
<p>org.codehaus.griffon:griffon-groovy-compile:2.2.0</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>griffon</code> configuration can be used to resolve dependencies using <a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" target="_blank">BOM</a> files.
Assume for a moment that the <code>griffon-scaffolding-plugin</code> is comprised of the following
modules</p>
</div>
<div class="ulist">
<ul>
<li>
<p>griffon-scaffolding - the core of the plugin, UI toolkit agnostic.</p>
</li>
<li>
<p>griffon-scaffolding-swing - Swing specific additions.</p>
</li>
<li>
<p>griffon-scaffolding-javafx-groovy - Groovy enhancements via <code><a href="api/griffon/util/BuilderCustomizer.html" target="_blank">BuilderCustomizer</a></code>.</p>
</li>
<li>
<p>griffon-scaffolding-javafx - JavaFX specific additions.</p>
</li>
<li>
<p>griffon-scaffolding-javafx-groovy - Groovy enhancements via <code><a href="api/griffon/util/BuilderCustomizer.html" target="_blank">BuilderCustomizer</a></code>.</p>
</li>
<li>
<p>griffon-scaffolding-groovy-compile - AST transformations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As you can appreciate those are quite the set. You can manually define any of these
dependencies on the build file, but given the many combinations it may be a bit hard
to determine which dependencies should be added and which shouldn&#8217;t. The <em>griffon</em>
configuration can make this decision for you; you just have to use it in the following
way</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">dependencies {
    griffon <span class="string"><span class="delimiter">'</span><span class="content">org.codehaus.griffon.plugins:griffon-scaffolding-plugin:0.0.0-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will add all required dependencies to your build by taking into account the project&#8217;s
choice of UI toolkit and whether the <code>groovy</code> plugin has been applied or not. This
behavior can be configured and/or disabled by using the conventional properties
describe in the next section.</p>
</div>
</div>
<div class="sect4">
<h5 id="_convention_properties"><a class="anchor" href="#_convention_properties"></a>Convention properties</h5>
<div class="paragraph">
<p>The Griffon plugin adds some properties to the project, which you can use to configure its behaviour.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 9. Griffon plugin - properties</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disableDependencyResolution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable automatic inclusion of dependencies defined with the <em>griffon</em> configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeGroovyDependencies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> -</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Force inclusion of Groovy dependencies defined with the <em>griffon</em> configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toolkit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> _</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The UI toolkit to use. May be left unset. Valid values are <code>swing</code>, <code>javafx</code>, <code>pivot</code>, <code>lanterna</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 2.2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Griffon version to use for Griffon core dependencies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applicationIconName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.icns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application icon to display on OSX&#8217;s dock. Icon file must reside inside <code>src/media</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <strong>includeGroovyDependencies</strong> property has 3 states: <code>unset</code>, <code>false</code> and <code>true</code>.
Groovy dependencies will be added automatically to the project <strong>only</strong> if the value
of <strong>includeGroovyDependencies</strong> is <code>unset</code> (default) and the <code>groovy</code> plugin has been
applied to the project or if the value of <strong>includeGroovyDependencies</strong> is set to <code>true</code>.
When the value of <strong>includeGroovyDependencies</strong> is set to <code>false</code> then Groovy dependencies
will not be added, even if the <code>groovy</code> plugin has been applied. This is useful for
Java projects that use <a href="http://spockframework.org/" target="_blank">Spock</a> for testing, as you need the <code>groovy</code> plugin in
order to compile Spock specifications but you wouldn&#8217;t want Groovy dependencies to
be pulled in for compilation.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_griffon_build_plugin"><a class="anchor" href="#_the_griffon_build_plugin"></a>15.3.2. The "griffon-build" Plugin</h4>
<div class="paragraph">
<p>The Griffon Build plugin enables useful tasks required for plugin authors, such as
the aggregation of Cobertura data files and reports; generation of a plugin BOM file,
and more.</p>
</div>
<div class="sect4">
<h5 id="_usage_2"><a class="anchor" href="#_usage_2"></a>Usage</h5>
<div class="paragraph">
<p>To use the Griffon Build plugin, include in your build script:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.codehaus.griffon:gradle-griffon-build-plugin:2.2.0'
    }
}

apply plugin: 'org.codehaus.griffon.griffon-build'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tasks"><a class="anchor" href="#_tasks"></a>Tasks</h5>
<div class="paragraph">
<p>The Griffon Build plugin adds a number of tasks to your project, as shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 10. Griffon Build plugin - tasks</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Task name</th>
<th class="tableblock halign-left valign-top">Depends on</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">aggregateCoberturaMerge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> <code>AggregateCoberturaMergeTask</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aggregates all cobertura data files found in the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">aggregateCoberturaReport</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> <code>AggregateCoberturaReport</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates a project-wide Cobertura report.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GenerateBomTask</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> <code>GenerateBomTask</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generates a BOM file that includes all subprojects.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_convention_properties_2"><a class="anchor" href="#_convention_properties_2"></a>Convention Properties</h5>
<div class="paragraph">
<p>The Griffon Build plugin adds a number of convention properties to the project, shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. Griffon Build plugin - tasks</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">coverageOutputDatafile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> <em>buildDir</em>/cobertura/cobertura.ser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the data file to produce during instrumentation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">coverageReportDir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> <em>reportsDir</em>/cobertura</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to report directory for coverage report.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies"><a class="anchor" href="#_dependencies"></a>15.3.3. Dependencies</h4>
<div class="paragraph">
<p>Whether you&#8217;re using the <code>griffon</code> plugin or not it&#8217;s very important you take special
note of the dependencies ending with <code>-compile</code>. As an application developer these
dependencies belong to either <em>compileOnly</em> or <em>testCompileOnly</em> configurations, as these
dependencies contain functionality that should not be exposed at runtime, such as compile-time
metadata generation via <a href="https://github.com/aalmiray/jipsy" target="_blank">Jipsy</a>, <a href="https://github.com/aalmiray/gipsy" target="_blank">Gipsy</a> and other AST transformations.</p>
</div>
<div class="paragraph">
<p>The only reason for a <code>-compile</code> dependency to appear on a <em>compile</em> or <em>testCompile</em> configuration
is for testing out new compile-time metadata generators. This task is usually performed in
plugin projects.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buildtools_maven"><a class="anchor" href="#_buildtools_maven"></a>15.4. Maven</h3>
<div class="paragraph">
<p>Application projects can also be built using <a href="http://maven.apache.org/" target="_blank">Maven</a>. The <a href="#_buildtools_lazybones">Lazybones</a>
templates create a default <code>pom.xml</code> file that contains the minimum configuration
to build, test and package a Griffon application. The bulk of the conventions is performed by
the <a href="http://dl.bintray.com/griffon/griffon/org/codehaus/griffon/application-master-pom/{application-pom}/application-master-pom-{application-pom}.pom" target="_blank">application-master-pom.pom</a>.</p>
</div>
<div class="sect3">
<h4 id="_plugins"><a class="anchor" href="#_plugins"></a>15.4.1. Plugins</h4>
<div class="paragraph">
<p>The <code>application-master-pom</code> configures the following plugins</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 12. application-master-pom - plugins</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Group</th>
<th class="tableblock halign-left valign-top">ArtifactId</th>
<th class="tableblock halign-left valign-top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.mojo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">build-helper-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.mojo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cobertura-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.eluder.coveralls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">coveralls-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.mojo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">exec-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.mojo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">findbugs-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.gmavenplus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gmavenplus-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.jacoco</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jacoco-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.3.201502191951</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.zenjava</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.mojo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdepend-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-appassembler-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.8.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-antrun-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-assembly-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-compiler-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-checkstyle-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.12.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-dependency-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-javadoc-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.9.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-jxr-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.bsc.maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-processor-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-project-info-reports-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-release-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-shade-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-site-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-surefire-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.17</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.maven.plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maven-surefire-report-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.17</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.codehaus.mojo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versions-maven-plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Of which the following are applied by default</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
</pre></td>
  <td class="code"><pre><span class="tag">&lt;plugins&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.codehaus.gmavenplus<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>gmavenplus-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.bsc.maven<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-processor-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-site-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-checkstyle-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>findbugs-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>versions-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-release-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.jacoco<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jacoco-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.eluder.coveralls<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>coveralls-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
<span class="tag">&lt;/plugins&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies_2"><a class="anchor" href="#_dependencies_2"></a>15.4.2. Dependencies</h4>
<div class="paragraph">
<p>All Griffon core dependencies have benn added using a <code>&lt;dependencyManagement&gt;</code> block as shown next</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
76
77
78
79
<strong>80</strong>
81
82
83
84
85
86
87
88
89
<strong>90</strong>
91
92
93
94
95
96
97
98
99
<strong>100</strong>
101
102
103
104
105
106
107
108
109
<strong>110</strong>
111
112
</pre></td>
  <td class="code"><pre><span class="tag">&lt;dependencyManagement&gt;</span>
    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-core<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-core-compile<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-core-test<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-groovy<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-groovy-compile<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-swing<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-swing-groovy<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-fest-test<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-javafx<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-javafx-groovy<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-lanterna<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-lanterna-groovy<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-pivot<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-pivot-groovy<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>compile<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-pivot-test<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.griffon<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>griffon-guice<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${griffon.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>runtime<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.groovy<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>groovy-all<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${groovy.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.spockframework<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>spock-core<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${spock.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span>
<span class="tag">&lt;/dependencyManagement&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s very important you take special note of the dependencies ending with <code>-compile</code>. As an
application developer these dependencies belong to the <em>provided</em> scope, as these
dependencies contain functionality that should not be exposed at runtime, such as
compile-time metadata generation via <a href="https://github.com/aalmiray/jipsy" target="_blank">Jipsy</a>, <a href="https://github.com/aalmiray/gipsy" target="_blank">Gipsy</a> and other AST transformations.</p>
</div>
<div class="paragraph">
<p>You must exclude these dependencies from the <code>maven-surefire-plugin</code>. The following is the
default configuration provided by the master pom</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;plugin&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>maven-surefire-plugin<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>${plugin.surefire.version}<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;inherited&gt;</span>true<span class="tag">&lt;/inherited&gt;</span>
    <span class="tag">&lt;configuration&gt;</span>
        <span class="tag">&lt;includes&gt;</span>
            <span class="tag">&lt;include&gt;</span>**/*Test.*<span class="tag">&lt;/include&gt;</span>
            <span class="tag">&lt;include&gt;</span>**/*Spec.*<span class="tag">&lt;/include&gt;</span>
        <span class="tag">&lt;/includes&gt;</span>
        <span class="tag">&lt;classpathDependencyExcludes&gt;</span>
            <span class="tag">&lt;classpathDependencyExclude&gt;</span>
                org.codehaus.griffon:griffon-core-compile
            <span class="tag">&lt;/classpathDependencyExclude&gt;</span>
            <span class="tag">&lt;classpathDependencyExclude&gt;</span>
                org.codehaus.griffon:griffon-groovy-compile
            <span class="tag">&lt;/classpathDependencyExclude&gt;</span>
        <span class="tag">&lt;/classpathDependencyExcludes&gt;</span>
    <span class="tag">&lt;/configuration&gt;</span>
<span class="tag">&lt;/plugin&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_repositories"><a class="anchor" href="#_repositories"></a>15.4.3. Repositories</h4>
<div class="paragraph">
<p>The following repositories are added by default</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;repositories&gt;</span>
    <span class="tag">&lt;repository&gt;</span>
        <span class="tag">&lt;id&gt;</span>jcenter<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;url&gt;</span>http://jcenter.bintray.com/<span class="tag">&lt;/url&gt;</span>
    <span class="tag">&lt;/repository&gt;</span>
    <span class="tag">&lt;repository&gt;</span>
        <span class="tag">&lt;id&gt;</span>griffon-plugins<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;url&gt;</span>http://dl.bintray.com/griffon/griffon-plugins/<span class="tag">&lt;/url&gt;</span>
    <span class="tag">&lt;/repository&gt;</span>
<span class="tag">&lt;/repositories&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_profiles"><a class="anchor" href="#_profiles"></a>15.4.4. Profiles</h4>
<div class="paragraph">
<p>The master pom enables a few profiles to take care of special tasks.</p>
</div>
<div class="sect4">
<h5 id="_run"><a class="anchor" href="#_run"></a>Run</h5>
<div class="paragraph">
<p>This profile compiles and runs the application. Enable it with <code>maven -Prun</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
</pre></td>
  <td class="code"><pre><span class="tag">&lt;profile&gt;</span>
    <span class="tag">&lt;id&gt;</span>run<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;defaultGoal&gt;</span>process-classes<span class="tag">&lt;/defaultGoal&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>exec-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>${plugin.exec.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;inherited&gt;</span>true<span class="tag">&lt;/inherited&gt;</span>
                <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;mainClass&gt;</span>${application.main.class}<span class="tag">&lt;/mainClass&gt;</span>
                    <span class="tag">&lt;systemProperties&gt;</span>
                        <span class="tag">&lt;systemProperty&gt;</span>
                            <span class="tag">&lt;key&gt;</span>griffon.env<span class="tag">&lt;/key&gt;</span>
                            <span class="tag">&lt;value&gt;</span>dev<span class="tag">&lt;/value&gt;</span>
                        <span class="tag">&lt;/systemProperty&gt;</span>
                    <span class="tag">&lt;/systemProperties&gt;</span>
                <span class="tag">&lt;/configuration&gt;</span>
                <span class="tag">&lt;executions&gt;</span>
                    <span class="tag">&lt;execution&gt;</span>
                        <span class="tag">&lt;id&gt;</span>run-app<span class="tag">&lt;/id&gt;</span>
                        <span class="tag">&lt;phase&gt;</span>process-classes<span class="tag">&lt;/phase&gt;</span>
                        <span class="tag">&lt;goals&gt;</span>
                            <span class="tag">&lt;goal&gt;</span>java<span class="tag">&lt;/goal&gt;</span>
                        <span class="tag">&lt;/goals&gt;</span>
                    <span class="tag">&lt;/execution&gt;</span>
                <span class="tag">&lt;/executions&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
<span class="tag">&lt;/profile&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_binary"><a class="anchor" href="#_binary"></a>Binary</h5>
<div class="paragraph">
<p>This profile packages the application using the <code>maven-appassembler-plugin</code>.
Enable it with <code>maven -Pbinary</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
</pre></td>
  <td class="code"><pre><span class="tag">&lt;profile&gt;</span>
    <span class="tag">&lt;id&gt;</span>binary<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;defaultGoal&gt;</span>package<span class="tag">&lt;/defaultGoal&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>appassembler-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>${plugin.appassembler.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;assembleDirectory&gt;</span>${project.build.directory}/binary<span class="tag">&lt;/assembleDirectory&gt;</span>
                    <span class="tag">&lt;repositoryLayout&gt;</span>flat<span class="tag">&lt;/repositoryLayout&gt;</span>
                    <span class="tag">&lt;repositoryName&gt;</span>lib<span class="tag">&lt;/repositoryName&gt;</span>
                    <span class="tag">&lt;extraJvmArguments&gt;</span>-Dgriffon.env=prod<span class="tag">&lt;/extraJvmArguments&gt;</span>
                    <span class="tag">&lt;programs&gt;</span>
                        <span class="tag">&lt;program&gt;</span>
                            <span class="tag">&lt;mainClass&gt;</span>${application.main.class}<span class="tag">&lt;/mainClass&gt;</span>
                            <span class="tag">&lt;id&gt;</span>${project.artifactId}<span class="tag">&lt;/id&gt;</span>
                        <span class="tag">&lt;/program&gt;</span>
                    <span class="tag">&lt;/programs&gt;</span>
                <span class="tag">&lt;/configuration&gt;</span>
                <span class="tag">&lt;executions&gt;</span>
                    <span class="tag">&lt;execution&gt;</span>
                        <span class="tag">&lt;id&gt;</span>make-distribution<span class="tag">&lt;/id&gt;</span>
                        <span class="tag">&lt;phase&gt;</span>package<span class="tag">&lt;/phase&gt;</span>
                        <span class="tag">&lt;goals&gt;</span>
                            <span class="tag">&lt;goal&gt;</span>assemble<span class="tag">&lt;/goal&gt;</span>
                        <span class="tag">&lt;/goals&gt;</span>
                    <span class="tag">&lt;/execution&gt;</span>
                <span class="tag">&lt;/executions&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
<span class="tag">&lt;/profile&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_distribution"><a class="anchor" href="#_distribution"></a>Distribution</h5>
<div class="paragraph">
<p>This profile packages the application using the <code>maven-assembly-plugin</code>.
Enable it with <code>maven -Pdistribution</code>. You must execute the <code>binary</code>
profile before running the <code>distribution</code> profile. You <strong>CAN NOT</strong> combine
both profiles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre><span class="tag">&lt;profile&gt;</span>
    <span class="tag">&lt;id&gt;</span>distribution<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;defaultGoal&gt;</span>package<span class="tag">&lt;/defaultGoal&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>${plugin.assembly.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;descriptors&gt;</span>
                        <span class="tag">&lt;descriptor&gt;</span>maven/assembly-descriptor.xml<span class="tag">&lt;/descriptor&gt;</span>
                    <span class="tag">&lt;/descriptors&gt;</span>
                    <span class="tag">&lt;outputDirectory&gt;</span>${project.build.directory}/distributions<span class="tag">&lt;/outputDirectory&gt;</span>
                    <span class="tag">&lt;workDirectory&gt;</span>${project.build.directory}/assembly/work<span class="tag">&lt;/workDirectory&gt;</span>
                <span class="tag">&lt;/configuration&gt;</span>
                <span class="tag">&lt;executions&gt;</span>
                    <span class="tag">&lt;execution&gt;</span>
                        <span class="tag">&lt;id&gt;</span>make-distribution<span class="tag">&lt;/id&gt;</span>
                        <span class="tag">&lt;phase&gt;</span>package<span class="tag">&lt;/phase&gt;</span>
                        <span class="tag">&lt;goals&gt;</span>
                            <span class="tag">&lt;goal&gt;</span>assembly<span class="tag">&lt;/goal&gt;</span>
                        <span class="tag">&lt;/goals&gt;</span>
                    <span class="tag">&lt;/execution&gt;</span>
                <span class="tag">&lt;/executions&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
<span class="tag">&lt;/profile&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_izpack"><a class="anchor" href="#_izpack"></a>Izpack</h5>
<div class="paragraph">
<p>This profile creates an universal installer using <a href="http://izpack.org/" target="_blank">IzPack</a>.
Enable it with <code>maven -Pizpack</code>. You must execute the <code>distribution</code>
profile before running the <code>izpack</code> profile. You <strong>CAN NOT</strong> combine
both profiles.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
</pre></td>
  <td class="code"><pre><span class="tag">&lt;profile&gt;</span>
    <span class="tag">&lt;id&gt;</span>izpack<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.codehaus.izpack<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>izpack-standalone-compiler<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${izpack-standalone.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;optional&gt;</span>true<span class="tag">&lt;/optional&gt;</span>
            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;defaultGoal&gt;</span>process-sources<span class="tag">&lt;/defaultGoal&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>${plugin.antrun.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;executions&gt;</span>
                    <span class="tag">&lt;execution&gt;</span>
                        <span class="tag">&lt;id&gt;</span>process-sources<span class="tag">&lt;/id&gt;</span>
                        <span class="tag">&lt;phase&gt;</span>process-sources<span class="tag">&lt;/phase&gt;</span>
                        <span class="tag">&lt;goals&gt;</span>
                            <span class="tag">&lt;goal&gt;</span>run<span class="tag">&lt;/goal&gt;</span>
                        <span class="tag">&lt;/goals&gt;</span>
                        <span class="tag">&lt;configuration&gt;</span>
                            <span class="tag">&lt;target&gt;</span>
                                <span class="tag">&lt;ant</span> <span class="attribute-name">antfile</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">maven/prepare-izpack.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                            <span class="tag">&lt;/target&gt;</span>
                        <span class="tag">&lt;/configuration&gt;</span>
                    <span class="tag">&lt;/execution&gt;</span>
                <span class="tag">&lt;/executions&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
<span class="tag">&lt;/profile&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_shade"><a class="anchor" href="#_shade"></a>Shade</h5>
<div class="paragraph">
<p>This profile crates a single JAR by combining the application&#8217;s classes
and its dependencies. Enable it with <code>maven -Pshade</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
</pre></td>
  <td class="code"><pre><span class="tag">&lt;profile&gt;</span>
    <span class="tag">&lt;id&gt;</span>shade<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;defaultGoal&gt;</span>package<span class="tag">&lt;/defaultGoal&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>maven-shade-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>${plugin.shade.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;inherited&gt;</span>true<span class="tag">&lt;/inherited&gt;</span>
                <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;transformers&gt;</span>
                        <span class="tag">&lt;transformer</span>
                            <span class="attribute-name">implementation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.apache.maven.plugins.shade.resource.ManifestResourceTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;manifestEntries&gt;</span>
                                <span class="tag">&lt;Main-Class&gt;</span>${application.main.class}<span class="tag">&lt;/Main-Class&gt;</span>
                            <span class="tag">&lt;/manifestEntries&gt;</span>
                        <span class="tag">&lt;/transformer&gt;</span>
                        <span class="tag">&lt;transformer</span> <span class="attribute-name">implementation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.kordamp.shade.resources.ServicesResourceTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                        <span class="tag">&lt;transformer</span> <span class="attribute-name">implementation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.kordamp.shade.resources.ServicesResourceTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;path&gt;</span>META-INF/griffon<span class="tag">&lt;/path&gt;</span>
                        <span class="tag">&lt;/transformer&gt;</span>
                        <span class="tag">&lt;transformer</span> <span class="attribute-name">implementation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.kordamp.shade.resources.ServicesResourceTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;path&gt;</span>META-INF/types<span class="tag">&lt;/path&gt;</span>
                        <span class="tag">&lt;/transformer&gt;</span>
                        <span class="tag">&lt;transformer</span> <span class="attribute-name">implementation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.kordamp.shade.resources.PropertiesFileTransformer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                            <span class="tag">&lt;paths&gt;</span>
                                <span class="tag">&lt;path&gt;</span>META-INF/editors/java.beans.PropertyEditor<span class="tag">&lt;/path&gt;</span>
                            <span class="tag">&lt;/paths&gt;</span>
                        <span class="tag">&lt;/transformer&gt;</span>
                    <span class="tag">&lt;/transformers&gt;</span>
                <span class="tag">&lt;/configuration&gt;</span>
                <span class="tag">&lt;executions&gt;</span>
                    <span class="tag">&lt;execution&gt;</span>
                        <span class="tag">&lt;phase&gt;</span>package<span class="tag">&lt;/phase&gt;</span>
                        <span class="tag">&lt;goals&gt;</span>
                            <span class="tag">&lt;goal&gt;</span>shade<span class="tag">&lt;/goal&gt;</span>
                        <span class="tag">&lt;/goals&gt;</span>
                    <span class="tag">&lt;/execution&gt;</span>
                <span class="tag">&lt;/executions&gt;</span>
                <span class="tag">&lt;dependencies&gt;</span>
                    <span class="tag">&lt;dependency&gt;</span>
                        <span class="tag">&lt;groupId&gt;</span>org.kordamp.shade<span class="tag">&lt;/groupId&gt;</span>
                        <span class="tag">&lt;artifactId&gt;</span>maven-shade-ext-transformers<span class="tag">&lt;/artifactId&gt;</span>
                        <span class="tag">&lt;version&gt;</span>${plugin.shade_ext_transformers.version}<span class="tag">&lt;/version&gt;</span>
                    <span class="tag">&lt;/dependency&gt;</span>
                <span class="tag">&lt;/dependencies&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
<span class="tag">&lt;/profile&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_buildtools_intellij"><a class="anchor" href="#_buildtools_intellij"></a>15.5. IntelliJ IDEA</h3>
<div class="paragraph">
<p>There is no need to install a plugin in IntelliJ Idea in order to develop Griffon
applications, as every Griffon project is a valid Gradle/Maven project.</p>
</div>
<div class="paragraph">
<p>There&#8217;s however special support for code suggestions when dealing with Groovy artifacts
or Groovy classes annotated with a special set of annotations. This support is
delivered using the GDSL feature found in IntelliJ. The following table summarizes
the enhancements delivered by this feature</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 13. Artifacts</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/controllers/**/*Controller.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonController</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/models/**/*Model.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonModel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/services/**/*Service.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonService</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/views/**/*View.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonView</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 14. Annotations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.EventPublisher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.event.EventPublisher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.MVCAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.mvc.MVCHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.ThreadingAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.threading.ThreadingHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.ResourcesAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.resources.ResourceHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.MessageSourceAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.core.i18n.MessageSource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.ResourceResolverAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.core.resources.ResourceResolver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.Observable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.core.Observable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.Vetoable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.Vetoable</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
IntelliJ Community Edition has a plugin for developing Griffon 1.x applications.
This plugin is <strong>not</strong> needed for Griffon 2.x.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_buildtools_eclipse"><a class="anchor" href="#_buildtools_eclipse"></a>15.6. Eclipse</h3>
<div class="paragraph">
<p>There is no need to install a plugin in Eclipse in order to develop Griffon
applications, as every Griffon project is a valid Gradle/Maven project.</p>
</div>
<div class="paragraph">
<p>There&#8217;s however special support for code suggestions when dealing with Groovy artifacts
or Groovy classes annotated with a special set of annotations. This support is
delivered using the DSLD feature found in Eclipse if the Groovy Eclipse plugin is
installed. The following table summarizes the enhancements delivered by this feature</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 15. Artifacts</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/controllers/**/*Controller.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonController</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/models/**/*Model.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonModel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/services/**/*Service.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonService</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon-app/views/**/*View.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.artifact.GriffonView</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 16. Annotations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.EventPublisher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.event.EventPublisher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.MVCAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.mvc.MVCHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.ThreadingAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.threading.ThreadingHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.ResourcesAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.resources.ResourceHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.MessageSourceAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.core.i18n.MessageSource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.ResourceResolverAware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.core.resources.ResourceResolver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.Observable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> griffon.core.Observable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@griffon.transform.Vetoable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.Vetoable</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributing"><a class="anchor" href="#_contributing"></a>16. Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Griffon is an open source project with an active community and we rely heavily on
that community to help make Griffon better. As such, there are various ways in which
people can contribute to Griffon. One of these is by writing plugins and making them
publicly available. In this chapter, we&#8217;ll look at some of the other options.</p>
</div>
<div class="sect2">
<h3 id="_contributing_issues"><a class="anchor" href="#_contributing_issues"></a>16.1. Issues</h3>
<div class="paragraph">
<p>Griffon uses <a href="https://github.com/griffon/griffon/issues">Github Issues</a> to track issues in the
core framework, its documentation and its website. If you&#8217;ve found a bug or wish to see a
particular feature added, this is the place to start. You&#8217;ll need to create a (free) Github
account in order to either submit an issue or comment on an existing one.</p>
</div>
<div class="paragraph">
<p>When submitting issues, please provide as much information as possible and in the
case of bugs, make sure you explain which versions of Griffon and various plugins
you are using. Also, an issue is much more likely to be dealt with if you attach
a reproducible sample application.</p>
</div>
<div class="sect3">
<h4 id="_reviewing_issues"><a class="anchor" href="#_reviewing_issues"></a>16.1.1. Reviewing issues</h4>
<div class="paragraph">
<p>There mere be a few old issues, some of which may no longer be valid.
The core team can&#8217;t track down these alone, so a very simple contribution that you
can make is to verify one or two issues occasionally.</p>
</div>
<div class="paragraph">
<p>Which issues need verification? Just pick an open issue and check whether it&#8217;s still relevant.</p>
</div>
<div class="paragraph">
<p>Once you&#8217;ve verified an issue, simply edit it by adding a "Last Reviewed" comment.
If you think the issue can be closed, then also add a "Flagged" comment and a short
explanation why.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing_build"><a class="anchor" href="#_contributing_build"></a>16.2. Build</h3>
<div class="paragraph">
<p>If you&#8217;re interested in contributing fixes and features to the core framework, you
will have to learn how to get hold of the project&#8217;s source, build it and test it
with your own applications. Before you start, make sure you have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JDK (1.7 or above)</p>
</li>
<li>
<p>A git client</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once you have all the pre-requisite packages installed, the next step is to download
the Griffon source code, which is hosted at <a href="http://github.com">GitHub</a> in several
repositories owned by the <a href="http://github.com/griffon"><code>griffon</code> GitHub user</a>. This
is a simple case of cloning the repository you&#8217;re interested in. For example, to
get the core framework run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ git clone https://github.com/griffon/griffon.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a <code>griffon</code> directory in your current working directory containing
all the project source files. The next step is to get a Griffon installation from the source.</p>
</div>
<div class="sect3">
<h4 id="_running_the_test_suite"><a class="anchor" href="#_running_the_test_suite"></a>16.2.1. Running the test suite</h4>
<div class="paragraph">
<p>All you have to do to run the full suite of tests is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ ./gradlew test</code></pre>
</div>
</div>
<div class="paragraph">
<p>These will take a while, so consider running individual tests using the command line.
For example, to run the test case @MappingDslTests@ simply execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ ./gradlew -Dtest.single=EnvironmentTests :griffon-core:test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you need to specify the sub-project that the test case resides in, because
the top-level "test" target won&#8217;t work&#8230;&#8203;.</p>
</div>
</div>
<div class="sect3">
<h4 id="_developing_in_intellij_idea"><a class="anchor" href="#_developing_in_intellij_idea"></a>16.2.2. Developing in IntelliJ IDEA</h4>
<div class="paragraph">
<p>You need to run the following gradle task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ ./gradlew idea</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then open the project file which is generated in IDEA. Simple!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing_patches"><a class="anchor" href="#_contributing_patches"></a>16.3. Patches</h3>
<div class="paragraph">
<p>If you want to submit patches to the project, you simply need to fork the repository
on GitHub rather than clone it directly. Then you will commit your changes to your
fork and send a pull request for a core team member to review.</p>
</div>
<div class="sect3">
<h4 id="_forking_and_pull_requests"><a class="anchor" href="#_forking_and_pull_requests"></a>16.3.1. Forking and Pull Requests</h4>
<div class="paragraph">
<p>One of the benefits of <a href="http://github.com">GitHub</a> is the way that you can easily
contribute to a project by <a href="http://help.github.com/fork-a-repo/">forking the repository</a>
and <a href="http://help.github.com/send-pull-requests/">sending pull requests</a> with your changes.</p>
</div>
<div class="paragraph">
<p>What follows are some guidelines to help ensure that your pull requests are speedily
dealt with and provide the information we need. They will also make your life easier!</p>
</div>
<h5 id="_create_a_local_branch_for_your_changes" class="discrete">Create a local branch for your changes</h5>
<div class="paragraph">
<p>Your life will be greatly simplified if you create a local branch to make your changes
on. For example, as soon as you fork a repository and clone the fork locally, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ git checkout -b mine</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a new local branch called <code>mine</code> based off the <code>master</code> branch.
Of course, you can name the branch whatever you like - you don&#8217;t have to use <code>mine</code>.</p>
</div>
<h5 id="_create_an_issue_for_non_trivial_changes" class="discrete">Create an Issue for non-trivial changes</h5>
<div class="paragraph">
<p>For any non-trivial changes, raise an issue if one doesn&#8217;t already exist. That
helps us keep track of what changes go into each new version of Griffon.</p>
</div>
<h5 id="_include_issue_id_in_commit_messages" class="discrete">Include Issue ID in commit messages</h5>
<div class="paragraph">
<p>This may not seem particularly important, but having an issue ID in a commit
message means that we can find out at a later date why a change was made. Include
the ID in any and all commits that relate to that issue. If a commit isn&#8217;t related
to an issue, then there&#8217;s no need to include an issue ID.</p>
</div>
<h5 id="_make_sure_your_fork_is_up_to_date" class="discrete">Make sure your fork is up to date</h5>
<div class="paragraph">
<p>Since the core developers must merge your commits into the main repository, it makes
life much easier if your fork on GitHub is up to date before you send a pull request.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you have the main repository set up as a remote called <code>upstream</code> and you
want to submit a pull request. Also, all your changes are currently on the local <code>mine</code>
branch but not on <code>master</code>. The first step involves pulling any changes from the main
repository that have been added since you last fetched and merged:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ git checkout master
$ git pull upstream</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should complete without any problems or conflicts. Next, rebase your local
branch against the now up-to-date master:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ git checkout mine
$ git rebase master</code></pre>
</div>
</div>
<div class="paragraph">
<p>What this does is rearrange the commits such that all of your changes come after
the most recent one in master. Think adding some cards to the top of a deck rather
than shuffling them into the pack.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll now be able to do a clean merge from your local branch to master:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ git checkout master
$ git merge mine</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you must push your changes to your remote repository on GitHub, otherwise
the core developers won&#8217;t be able to pick them up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>$ git push</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;re now ready to send the pull request from the GitHub user interface.</p>
</div>
<h5 id="_say_what_your_pull_request_is_for" class="discrete">Say what your pull request is for</h5>
<div class="paragraph">
<p>A pull request can contain any number of commits and it may be related to any number
of issues. In the pull request message, please specify the IDs of all issues that
the request relates to. Also give a brief description of the work you have done,
such as: "I refactored the resources injector and added support for custom number editors (GRIFFON-xxxx)".</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_migration"><a class="anchor" href="#_appendix_migration"></a>Appendix A: Migrating from Griffon 1.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Griffon 2.x has tried to be as close as possible to Griffon 1.x in terms of concepts
and APIs, however some changes were introduced that require your attention when
migrating an application from Griffon 1.x</p>
</div>
<div class="sect2">
<h3 id="_build_configuration"><a class="anchor" href="#_build_configuration"></a>1.1. Build Configuration</h3>
<div class="paragraph">
<p>There is no longer a specific Griffon buildtime tool nor configuration settings.
You must pick a build tool (we recommend <a href="http://gradle.org">Gradle</a>) and use that
tool&#8217;s configuration to match your needs. The simplest way to get started is to
select an appropriate <a href="http://github.com/pledbrook/layzbones">Lazybones</a> template
to create an empty project, then copy the files you need.</p>
</div>
<div class="paragraph">
<p>Build time plugins and scripts are now within the realm of a particular build tool.</p>
</div>
<div class="sect3">
<h4 id="_dependencies_3"><a class="anchor" href="#_dependencies_3"></a>1.1.1. Dependencies</h4>
<div class="paragraph">
<p>Dependencies used to be configured inside <code>griffon-app/conf/BuildConfig.groovy</code>. Now
that the file is gone you must configure dependencies using the native support of
the build tool you choose. Of particular note is that all griffon dependencies are
now standard JAR archives available from Maven compatible repositories, so they should
work no matter which dependency resolution you pick.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_configuration"><a class="anchor" href="#_runtime_configuration"></a>1.2. Runtime Configuration</h3>
<div class="sect3">
<h4 id="_application_and_config_scripts"><a class="anchor" href="#_application_and_config_scripts"></a>1.2.1. Application and Config Scripts</h4>
<div class="paragraph">
<p>The files <code>Application.groovy</code> and <code>Config.groovy</code> have been merged into a single
file : <code>Config.groovy</code>. The <code>log4j</code> DSL is no longer used, so please move your
logging settings to <code>src/resources/log4j.properties</code>; you can also use the XML variant
if you want. Griffon 2.x does not forces Log4j on you either, you&#8217;re free to pick
a suitable Slf4j binding of your choice.</p>
</div>
</div>
<div class="sect3">
<h4 id="_builder_script"><a class="anchor" href="#_builder_script"></a>1.2.2. Builder Script</h4>
<div class="paragraph">
<p>The <code>Builder.groovy</code> is no longer required. Its functions are now handled by
<code><a href="api/griffon/util/BuilderCustomizer.html" target="_blank">BuilderCustomizer</a></code> classes bound in a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code>. You must add
<code>griffon-groovy-2.2.0.jar</code> as a compile dependency in order to use
<code>BuilderCustomizers</code>. Here&#8217;s an example for adding a <a href="http://miglayout.com">Miglayout</a>
customization</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/griffon/builder/swing/MiglayoutSwingBuilderCustomizer.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">griffon.builder.swing</span>;

<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">groovy.swing.factory.LayoutFactory</span>;
<span class="keyword">import</span> <span class="include">net.miginfocom.swing.MigLayout</span>;
<span class="keyword">import</span> <span class="include">groovy.util.Factory</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.groovy.view.AbstractBuilderCustomizer</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;
<span class="keyword">import</span> <span class="include">java.util.LinkedHashMap</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="annotation">@DependsOn</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">swing</span><span class="delimiter">&quot;</span></span>})
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout-swing</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MiglayoutSwingBuilderCustomizer</span> <span class="directive">extends</span> AbstractBuilderCustomizer {
    <span class="directive">public</span> MiglayoutSwingBuilderCustomizer() {
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, Factory&gt; factories = <span class="keyword">new</span> <span class="predefined-type">LinkedHashMap</span>&lt;&gt;();
        factories.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">migLayout</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> LayoutFactory(MigLayout.class));
        setFactories(factories);
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/codehaus/griffon/runtime/miglayout/MiglayoutSwingGroovyModule.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">org.codehaus.griffon.runtime.miglayout</span>;

<span class="keyword">import</span> <span class="include">griffon.builder.swing.MiglayoutSwingBuilderCustomizer</span>;
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">griffon.util.BuilderCustomizer</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">swing-groovy</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout-swing-groovy</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MiglayoutSwingGroovyModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// tag::bindings[]</span>
        bind(BuilderCustomizer.class)
            .to(MiglayoutSwingBuilderCustomizer.class)
            .asSingleton();
        <span class="comment">// end::bindings[]</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_events_script"><a class="anchor" href="#_events_script"></a>1.2.3. Events Script</h4>
<div class="paragraph">
<p>The <code>Events</code> script usually placed in <code>griffon-app/conf</code> should be moved to the main
source directory (<code>src/main/java</code> or <code>src/main/groovy</code> depending on your preferences).
The following snippet shows an skeleton implementation</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/com/acme/ApplicationEventHandler.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>

<span class="type">class</span> <span class="class">ApplicationEventHandler</span> <span class="directive">implements</span> <span class="predefined-type">EventHandler</span> {
    <span class="comment">// event handlers as public methods</span>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You must add event handlers as public methods following the conventions explained
in the <a href="#_events_consuming">consuming events</a> section. Don&#8217;t forget to register this
class using a module. The default <code>ApplicationModule</code> class provided by all basic
project templates is a good start.</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/com/acme/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(<span class="predefined-type">EventHandler</span>)
            .to(ApplicationEventHandler)
            .asSingleton()
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_artifacts"><a class="anchor" href="#_artifacts"></a>1.3. Artifacts</h3>
<div class="paragraph">
<p>All artifacts must be annotated with <code><a href="api/griffon/metadata/ArtifactProviderFor.html" target="_blank">@ArtifactProviderFor</a></code> without exception.
Failure to follow this rule will make Griffon miss the artifact during bootstrap.
The value for this annotation must be the basic interface that defines the artifact&#8217;s
type, for example</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/sample/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    ...
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, the <code>app</code> property has been renamed to <code>application</code>.</p>
</div>
<div class="sect3">
<h4 id="_controllers_2"><a class="anchor" href="#_controllers_2"></a>1.3.1. Controllers</h4>
<div class="paragraph">
<p>Closure properties as actions are no longer supported. All actions must be defined
as public methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="_views_2"><a class="anchor" href="#_views_2"></a>1.3.2. Views</h4>
<div class="paragraph">
<p>View scripts have been upgraded to classes. You can use the following skeleton View
class as an starting point</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/sample/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    <span class="keyword">def</span> builder
    <span class="keyword">def</span> model

    <span class="type">void</span> initUI() {
        builder.with {
            <i class="conum" data-value="1"></i><b>(1)</b>
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>UI components</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, place the contents of your old View script inside <em class="conum">1</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lifecycle_scripts"><a class="anchor" href="#_lifecycle_scripts"></a>1.4. Lifecycle Scripts</h3>
<div class="paragraph">
<p>These scripts must be migrated to full classes too. Here&#8217;s the basic skeleton code
for any lifecycle handler</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/lifecycle/Initialize.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre><span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.AbstractLifecycleHandler</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="type">class</span> <span class="class">Initialize</span> <span class="directive">extends</span> AbstractLifecycleHandler {
    <span class="annotation">@Inject</span>
    Initialize(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application)
    }

    <span class="annotation">@Override</span>
    <span class="type">void</span> execute() {
        <span class="comment">// do the work</span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_renamed_methods"><a class="anchor" href="#_renamed_methods"></a>1.5. Renamed Methods</h3>
<div class="paragraph">
<p>The following tables describe methods that have been renamed in Griffon 2.x</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 17. Threading Methods</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Griffon 1.x</th>
<th class="tableblock halign-left valign-top">Griffon 2.x</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">edt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">runInsideUISync</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doLater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">runInsideUIAsync</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">doOutside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">runOutsideUI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">execInsideUISync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">runInsideUISync</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">execInsideUIAsync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">runInsideUIAsync</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">execOutsideUI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">runOutsideUI</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 18. Event Publishing Methods</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Griffon 1.x</th>
<th class="tableblock halign-left valign-top">Griffon 2.x</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">publish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishEvent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishAsync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishEventAsync</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishOutsideUI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishEventOutsideUI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishEvent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eventAsync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishEventAsync</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">eventOutsideUI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">publishEventOutsideUI</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_tests"><a class="anchor" href="#_tests"></a>1.6. Tests</h3>
<div class="paragraph">
<p>Griffon 2.x no longer segregates tests between <code>unit</code> and <code>functional</code>. You must use
your build tool&#8217;s native support for both types (this is quite simple with Gradle).
Move all unit tests under <code>src/test/java</code> or <code>src/test/groovy</code> depending on your
choice of main language. The base <code>GriffonUnitTestCase</code> class no longer exist. Use
any testing framework you&#8217;re comfortable with to write unit tests (Junit4, Spock, etc).
Use the following template if you need to write artifact tests</p>
</div>
<div class="listingblock">
<div class="title">src/test/sample/SampleControllerTest.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.test.GriffonUnitRule</span>
<span class="keyword">import</span> <span class="include">griffon.core.test.TestFor</span>
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>
<span class="keyword">import</span> <span class="include">org.junit.Test</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.jayway.awaitility.Awaitility.await</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.concurrent.TimeUnit.SECONDS</span>

<span class="annotation">@TestFor</span>(SampleController)
<span class="type">class</span> <span class="class">SampleControllerTest</span> {
    <span class="directive">private</span> SampleController controller

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> <span class="directive">final</span> GriffonUnitRule griffon = <span class="keyword">new</span> GriffonUnitRule()

    <span class="annotation">@Test</span>
    <span class="type">void</span> testControllerAction() {
        <span class="comment">// given:</span>
        <span class="comment">// setup collaborators</span>

        <span class="comment">// when:</span>
        <span class="comment">// stimulus</span>
        controller.invokeAction(<span class="string"><span class="delimiter">'</span><span class="content">nameOfTheAction</span><span class="delimiter">'</span></span>)

        <span class="comment">// then:</span>
        <span class="comment">// use Awaitility to successfully wait for async processing to finish</span>
        await().atMost(<span class="integer">2</span>, SECONDS)
        <span class="keyword">assert</span> someCondition
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_module_bindings"><a class="anchor" href="#_appendix_module_bindings"></a>Appendix B: Module Bindings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections display all bindings per module. Use this information to
successfully override a binding on your own modules or to troubleshoot a module
binding if the wrong type has been applied by the Griffon runtime.</p>
</div>
<div class="sect2">
<h3 id="_core"><a class="anchor" href="#_core"></a>1.1. Core</h3>
<div class="paragraph">
<p>Module name: <code>core</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(ApplicationClassLoader.class)
    .to(DefaultApplicationClassLoader.class)
    .asSingleton();

bind(Metadata.class)
    .toProvider(MetadataProvider.class)
    .asSingleton();

bind(RunMode.class)
    .toProvider(RunModeProvider.class)
    .asSingleton();

bind(Environment.class)
    .toProvider(EnvironmentProvider.class)
    .asSingleton();

bind(<span class="predefined-type">Context</span>.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationContext</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultContext.class)
    .asSingleton();

bind(ApplicationConfigurer.class)
    .to(DefaultApplicationConfigurer.class)
    .asSingleton();

bind(ResourceHandler.class)
    .to(DefaultResourceHandler.class)
    .asSingleton();

bind(CompositeResourceBundleBuilder.class)
    .to(DefaultCompositeResourceBundleBuilder.class)
    .asSingleton();

bind(<span class="predefined-type">ResourceBundle</span>.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceBundle</span><span class="delimiter">&quot;</span></span>))
    .toProvider(<span class="keyword">new</span> ResourceBundleProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">Config</span><span class="delimiter">&quot;</span></span>))
    .asSingleton();

bind(<span class="predefined-type">Configuration</span>.class)
    .to(DefaultConfiguration.class)
    .asSingleton();

bind(ExecutorServiceManager.class)
    .to(DefaultExecutorServiceManager.class)
    .asSingleton();

bind(EventRouter.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationEventRouter</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultEventRouter.class)
    .asSingleton();

bind(EventRouter.class)
    .to(DefaultEventRouter.class);

bind(ResourceResolver.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceResolver</span><span class="delimiter">&quot;</span></span>))
    .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">resources</span><span class="delimiter">&quot;</span></span>))
    .asSingleton();

bind(MessageSource.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationMessageSource</span><span class="delimiter">&quot;</span></span>))
    .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">messages</span><span class="delimiter">&quot;</span></span>))
    .asSingleton();

bind(ResourceInjector.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceInjector</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultApplicationResourceInjector.class)
    .asSingleton();

bind(<span class="predefined-type">ExecutorService</span>.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultExecutorService</span><span class="delimiter">&quot;</span></span>))
    .toProvider(DefaultExecutorServiceProvider.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(DefaultUIThreadManager.class)
    .asSingleton();

bind(MVCGroupManager.class)
    .to(DefaultMVCGroupManager.class)
    .asSingleton();

<span class="keyword">for</span> (Lifecycle lifecycle : Lifecycle.values()) {
    bind(LifecycleHandler.class)
        .withClassifier(named(lifecycle.getName()))
        .toProvider(<span class="keyword">new</span> LifecycleHandlerProvider(lifecycle.getName()))
        .asSingleton();
}

bind(WindowManager.class)
    .to(NoopWindowManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(DefaultActionManager.class)
    .asSingleton();

bind(ArtifactManager.class)
    .to(DefaultArtifactManager.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ModelArtifactHandler.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ViewArtifactHandler.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ControllerArtifactHandler.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ServiceArtifactHandler.class)
    .asSingleton();

bind(PlatformHandler.class)
    .toProvider(PlatformHandlerProvider.class)
    .asSingleton();

bind(AddonManager.class)
    .to(DefaultAddonManager.class)
    .asSingleton();

bind(<span class="predefined-type">EventHandler</span>.class)
    .to(DefaultEventHandler.class)
    .asSingleton();

bind(GriffonExceptionHandler.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovy"><a class="anchor" href="#_groovy"></a>1.2. Groovy</h3>
<div class="paragraph">
<p>Module name: <code>groovy</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(ConfigReader.class)
    .toProvider(ConfigReader.Provider.class)
    .asSingleton();

bind(CompositeResourceBundleBuilder.class)
    .to(GroovyAwareCompositeResourceBundleBuilder.class)
    .asSingleton();

bind(GriffonAddon.class)
    .to(GroovyAddon.class)
    .asSingleton();

bind(MVCGroupManager.class)
    .to(GroovyAwareMVCGroupManager.class)
    .asSingleton();

bind(BuilderCustomizer.class)
    .to(CoreBuilderCustomizer.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_swing_2"><a class="anchor" href="#_swing_2"></a>1.3. Swing</h3>
<div class="paragraph">
<p>Module name: <code>swing</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(SwingWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultSwingWindowDisplayHandler.class)
    .asSingleton();

bind(SwingWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurableSwingWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultSwingWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(SwingUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(SwingActionManager.class)
    .asSingleton();

bind(GriffonAddon.class)
    .to(SwingAddon.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_swing_builder"><a class="anchor" href="#_swing_builder"></a>1.4. Swing Builder</h3>
<div class="paragraph">
<p>Module name: <code>swing-groovy</code>
Depends on: <code>swing</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(BuilderCustomizer.class)
    .to(SwingBuilderCustomizer.class)
    .asSingleton();
bind(SwingWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(GroovyAwareConfigurableSwingWindowDisplayHandler.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_javafx"><a class="anchor" href="#_javafx"></a>1.5. JavaFX</h3>
<div class="paragraph">
<p>Module name: <code>javafx</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(JavaFXWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultJavaFXWindowDisplayHandler.class)
    .asSingleton();

bind(JavaFXWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurableJavaFXWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultJavaFXWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(JavaFXUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(JavaFXActionManager.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_javafx_builder"><a class="anchor" href="#_javafx_builder"></a>1.6. JavaFX Builder</h3>
<div class="paragraph">
<p>Module name: <code>javafx-groovy</code>
Depends on: <code>javafx</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(BuilderCustomizer.class)
    .to(JavafxBuilderCustomizer.class)
    .asSingleton();
bind(JavaFXWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(GroovyAwareConfigurableJavaFXWindowDisplayHandler.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lanterna"><a class="anchor" href="#_lanterna"></a>1.7. Lanterna</h3>
<div class="paragraph">
<p>Module name: <code>lanterna</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(GUIScreen.class)
    .toProvider(GUIScreenProvider.class)
    .asSingleton();

bind(LanternaWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultLanternaWindowDisplayHandler.class)
    .asSingleton();

bind(LanternaWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurableLanternaWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultLanternaWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(LanternaUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(LanternaActionManager.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lanterna_builder"><a class="anchor" href="#_lanterna_builder"></a>1.8. Lanterna Builder</h3>
<div class="paragraph">
<p>Module name: <code>lanterna-groovy</code>
Depends on: <code>lanterna</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(BuilderCustomizer.class)
    .to(LanternaBuilderCustomizer.class)
    .asSingleton();
bind(LanternaWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(GroovyAwareConfigurableLanternaWindowDisplayHandler.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pivot_2"><a class="anchor" href="#_pivot_2"></a>1.9. Pivot</h3>
<div class="paragraph">
<p>Module name: <code>pivot</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(PivotWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultPivotWindowDisplayHandler.class)
    .asSingleton();

bind(PivotWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurablePivotWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultPivotWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(PivotUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(PivotActionManager.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pivot_builder"><a class="anchor" href="#_pivot_builder"></a>1.10. Pivot Builder</h3>
<div class="paragraph">
<p>Module name: <code>pivot-groovy</code>
Depends on: <code>pivot</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java">bind(BuilderCustomizer.class)
    .to(PivotBuilderCustomizer.class)
    .asSingleton();
bind(PivotWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(GroovyAwareConfigurablePivotWindowDisplayHandler.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_ast_transformations"><a class="anchor" href="#_appendix_ast_transformations"></a>Appendix C: AST Transformations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following list summarizes all AST transformations available to Groovy based
projects when the <code>griffon-groovy-compile-2.2.0.jar</code> dependency is
added to a project</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_events_eventpublisher_transformation">@EventPublisher</a></p>
</li>
<li>
<p><a href="#_internationalization_message_source_transformation">@MessageSourceAware</a></p>
</li>
<li>
<p><a href="#_mvc_mvcaware_transformation">@MVCAware</a></p>
</li>
<li>
<p><a href="#_models_observable_transformation">@Observable</a></p>
</li>
<li>
<p><a href="#_models_fxobservable_transformation">@FXObservable</a></p>
</li>
<li>
<p><a href="#_models_property_listener_transformation">@PropertyListener</a></p>
</li>
<li>
<p><a href="#_resources_resource_resolver_transformation">@ResourceResolverAware</a></p>
</li>
<li>
<p><a href="#_resources_resources_aware_transformation">@ResourcesAware</a></p>
</li>
<li>
<p><a href="#_threading_annotation">@Threading</a></p>
</li>
<li>
<p><a href="#_threading_transformation">@ThreadingAware</a></p>
</li>
<li>
<p><a href="#_threading_transformation">@ThreadingAware</a></p>
</li>
<li>
<p><a href="#_models_vetoable_transformation">@Vetoable</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_sample_applications"><a class="anchor" href="#_appendix_sample_applications"></a>Appendix D: Sample Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix showcases the same application implemented with different languages
and different UI toolkits. The application presents a very simple form where a user
is asked for his or her name. Once a button is clicked a reply will appear within
the same window. In order to achieve this Models hold 2 observable properties: the
first to keep track of the <code>input</code>, the second to do the same for the <code>output</code>.
Views are only concerned with values coming from the model and as such never
interact directly with Controllers. Controllers in turn only interact with Models
and a Service used to transform the input value into the output value. The single
controller action observes the rules for invoking computations outside of the UI
thread and updating UI components inside the UI thread.</p>
</div>
<div class="paragraph">
<p>These are some screenshots of each one of the applications we&#8217;ll cover next.</p>
</div>
<div id="figure-sample-swing" class="imageblock">
<div class="content">
<img src="images/sample-swing-java.png" alt="Swing" width="50%" height="50%">
</div>
<div class="title">Figure 1. Swing Sample</div>
</div>
<div id="figure-sample-javafx" class="imageblock">
<div class="content">
<img src="images/sample-javafx-java.png" alt="JavaFX" width="50%" height="50%">
</div>
<div class="title">Figure 2. JavaFx Sample</div>
</div>
<div id="figure-sample-lanterna" class="imageblock">
<div class="content">
<img src="images/sample-lanterna-java.png" alt="JavaFX" width="50%" height="50%">
</div>
<div class="title">Figure 3. Lanterna Sample</div>
</div>
<div id="figure-sample-pivot" class="imageblock">
<div class="content">
<img src="images/sample-pivot-java.png" alt="JavaFX" width="50%" height="50%">
</div>
<div class="title">Figure 4. Pivot Sample</div>
</div>
<div class="paragraph">
<p>The goal of these applications is to showcase the similarities and differences of each
one of them given their implementation language and UI toolkit.</p>
</div>
<div class="sect2">
<h3 id="_sample_swing"><a class="anchor" href="#_sample_swing"></a>1.1. Swing</h3>
<div class="paragraph">
<p>Let&#8217;s begin with Swing, as it&#8217;s probably the most well known Java UI toolkit. First
we&#8217;ll show the Java version of an artifact, then we&#8217;ll show it&#8217;s Groovy counterpart.</p>
</div>
<div class="sect3">
<h4 id="_sample_swing_model"><a class="anchor" href="#_sample_swing_model"></a>1.1.1. Model</h4>
<div class="paragraph">
<p>Instances of <code><a href="api/griffon/core/artifact/GriffonModel.html" target="_blank">GriffonModel</a></code> implement the <code><a href="api/griffon/core/Observable.html" target="_blank">Observable</a></code> interface which
means they know how to handle observable properties out of the box. We only need to be
concerned in triggering a <code>java.beans.PropertyChangeEvent</code> when a property changes value.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/models/sample/swing/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> <span class="predefined-type">String</span> input;                                                <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">String</span> output;                                               <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.input, <span class="local-variable">this</span>.input = input);     <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.output, <span class="local-variable">this</span>.output = output); <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Property mutator must fire a <code>PropertyChangeEvent</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The code is quite straight forward, there&#8217;s nothing much to see here other than making
sure to follow the rules for creating observable properties. The Groovy version sports
a short hand thanks to the usage of the @Observable AST transformation.</p>
</div>
<div class="paragraph">
<p>One key difference between the Java and the Groovy version is that the Groovy Model
does not extend a particular class. It also This is due to Griffon being aware of its own
conventions and applying the appropriate byte code manipulation (via AST transformations).
The compiled Model class does implement the <code><a href="api/griffon/core/artifact/GriffonModel.html" target="_blank">GriffonModel</a></code> interface as required by
the framework. This type of byte code manipulation is expected to work for every Groovy
based artifact.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/models/sample/swing/groovy/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> input                                             <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> output                                            <i class="conum" data-value="1"></i><b>(1)</b>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Observable property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Properties become observable by simply annotating them with @Observable. The Groovy compiler
will generate the required boilerplate code, which so happens to be functionally equivalent
to what we showed in the Java version.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_swing_controller"><a class="anchor" href="#_sample_swing_controller"></a>1.1.2. Controller</h4>
<div class="paragraph">
<p>Controllers provide actions that are used to fill up the application&#8217;s interaction.
They usually manipulate values coming from Views via Model properties. Controllers may
rely on additional components, such as Services, to do they work. This is exactly our
case as there&#8217;s a <code>SampleService</code> instance injected into our controllers.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/controllers/sample/swing/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                            <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                               <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Of particular note is the fact that actions are always executed outside off the UI thread
unless otherwise configured with an <code>@Threading</code> annotation. Once we have computed the right
output we must inform the View of the new value. This is done by updating the model
inside the UI thread <em class="conum">4</em>.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/controllers/sample/swing/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="predefined-type">SampleModel</span> model                                                      <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(model.input)
        model.output = result                                              <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Groovy version of the Controller is much terser of course however there&#8217;s a nice
feature available to Groovy Swing: Model properties bound to UI components are <em>always</em>
updated inside the UI thread.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_swing_service"><a class="anchor" href="#_sample_swing_service"></a>1.1.3. Service</h4>
<div class="paragraph">
<p>Services are tasked to work with raw data and I/O, they should <strong><em>never</em></strong> interact with
Views and Models directly, though you may have additional components injected to them.
The following service shows another facility provide by the
<code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> interface:
<code><a href="api/griffon/core/i18n/MessageSource.html" target="_blank">MessageSource</a></code>, capable of resolving i18n-able
resources.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/services/sample/swing/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/services/sample/swing/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_swing_view"><a class="anchor" href="#_sample_swing_view"></a>1.1.4. View</h4>
<div class="paragraph">
<p>We come to the final piece of the puzzle: the View. Components are arranged in a
one column vertical grid</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/views/sample/swing/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
76
77
78
79
<strong>80</strong>
81
82
83
84
85
86
87
88
89
<strong>90</strong>
91
92
93
94
95
96
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.swing.artifact.AbstractSwingGriffonView</span>;

<span class="keyword">import</span> <span class="include">javax.swing.Action</span>;
<span class="keyword">import</span> <span class="include">javax.swing.JButton</span>;
<span class="keyword">import</span> <span class="include">javax.swing.JFrame</span>;
<span class="keyword">import</span> <span class="include">javax.swing.JLabel</span>;
<span class="keyword">import</span> <span class="include">javax.swing.JTextField</span>;
<span class="keyword">import</span> <span class="include">javax.swing.event.DocumentEvent</span>;
<span class="keyword">import</span> <span class="include">javax.swing.event.DocumentListener</span>;
<span class="keyword">import</span> <span class="include">java.awt.GridLayout</span>;
<span class="keyword">import</span> <span class="include">java.awt.Image</span>;
<span class="keyword">import</span> <span class="include">java.awt.Toolkit</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeEvent</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeListener</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractSwingGriffonView {
    <span class="directive">private</span> SampleController controller;                                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        <span class="predefined-type">JFrame</span> window = (<span class="predefined-type">JFrame</span>) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;emptyMap());
        window.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>);
        window.setTitle(getApplication().getConfiguration().getAsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">application.title</span><span class="delimiter">&quot;</span></span>));
        window.setSize(<span class="integer">320</span>, <span class="integer">120</span>);
        window.setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
        window.setIconImage(getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">&quot;</span></span>));
        window.setIconImages(asList(
            getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">&quot;</span></span>),
            getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-32x32.png</span><span class="delimiter">&quot;</span></span>),
            getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-16x16.png</span><span class="delimiter">&quot;</span></span>)
        ));
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, window);        <i class="conum" data-value="2"></i><b>(2)</b>

        window.getContentPane().setLayout(<span class="keyword">new</span> <span class="predefined-type">GridLayout</span>(<span class="integer">4</span>, <span class="integer">1</span>));
        window.getContentPane().add(
            <span class="keyword">new</span> <span class="predefined-type">JLabel</span>(getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">name.label</span><span class="delimiter">&quot;</span></span>))
        );
        <span class="directive">final</span> <span class="predefined-type">JTextField</span> nameField = <span class="keyword">new</span> <span class="predefined-type">JTextField</span>();
        nameField.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">inputField</span><span class="delimiter">&quot;</span></span>);
        nameField.getDocument().addDocumentListener(<span class="keyword">new</span> <span class="predefined-type">DocumentListener</span>() {     <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> insertUpdate(<span class="predefined-type">DocumentEvent</span> e) {
                model.setInput(nameField.getText());
            }

            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> removeUpdate(<span class="predefined-type">DocumentEvent</span> e) {
                model.setInput(nameField.getText());
            }

            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> changedUpdate(<span class="predefined-type">DocumentEvent</span> e) {
                model.setInput(nameField.getText());
            }
        });
        window.getContentPane().add(nameField);

        <span class="predefined-type">Action</span> action = toolkitActionFor(controller, <span class="string"><span class="delimiter">&quot;</span><span class="content">sayHello</span><span class="delimiter">&quot;</span></span>);                <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="directive">final</span> <span class="predefined-type">JButton</span> button = <span class="keyword">new</span> <span class="predefined-type">JButton</span>(action);
        button.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">sayHelloButton</span><span class="delimiter">&quot;</span></span>);
        window.getContentPane().add(button);

        <span class="directive">final</span> <span class="predefined-type">JLabel</span> outputLabel = <span class="keyword">new</span> <span class="predefined-type">JLabel</span>();
        outputLabel.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">outputLabel</span><span class="delimiter">&quot;</span></span>);
        model.addPropertyChangeListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">PropertyChangeListener</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> propertyChange(<span class="predefined-type">PropertyChangeEvent</span> evt) {
                outputLabel.setText(<span class="predefined-type">String</span>.valueOf(evt.getNewValue()));
            }
        });
        window.getContentPane().add(outputLabel);
    }

    <span class="directive">private</span> <span class="predefined-type">Image</span> getImage(<span class="predefined-type">String</span> path) {
        <span class="keyword">return</span> <span class="predefined-type">Toolkit</span>.getDefaultToolkit().getImage(SampleView.class.getResource(path));
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Attach window to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook in controller action by name</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here we can appreciate at <em class="conum">3</em> how Model properties are bound to
View components, also how controller actions can be transformed into toolkit actions
that may be applied to buttons <em class="conum">4</em> for example.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/views/sample/swing/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">SampleModel</span> model                                                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],                 <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>, <span class="key">size</span>: [<span class="integer">320</span>, <span class="integer">160</span>],
                <span class="key">iconImage</span>: imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                <span class="key">iconImages</span>: [imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                    imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-32x32.png</span><span class="delimiter">'</span></span>).image,
                    imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-16x16.png</span><span class="delimiter">'</span></span>).image]) {
                gridLayout(<span class="key">rows</span>: <span class="integer">4</span>, <span class="key">cols</span>: <span class="integer">1</span>)
                label(application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                textField(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">inputField</span><span class="delimiter">'</span></span>, <span class="key">text</span>: bind(<span class="key">target</span>: model, <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>))                 <i class="conum" data-value="3"></i><b>(3)</b>
                button(sayHelloAction, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">sayHelloButton</span><span class="delimiter">'</span></span>)                                    <i class="conum" data-value="4"></i><b>(4)</b>
                label(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">outputLabel</span><span class="delimiter">'</span></span>, <span class="key">text</span>: bind { model.output })                           <i class="conum" data-value="3"></i><b>(3)</b>
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook in controller action by name</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Groovy version is again much terser thanks to the <a href="http://groovy.codehaus.org/Swing\+Builder">SwingBuilder DSL</a>.
Notice how easy it&#8217;s to bind <em class="conum">3</em> model properties using the <code>bind</code> node.
The controller action is also transformed into an UI toolkit specific action however
this time it&#8217;s easier to grab: by convention all controller actions are exposed as variables
to the corresponding <code>builder</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_swing_resources"><a class="anchor" href="#_sample_swing_resources"></a>1.1.5. Resources</h4>
<div class="paragraph">
<p>The last file we&#8217;ll touch is the one that holds de i18n-able content. Griffon supports
several formats. Here we&#8217;re showing the standard one as found in many Java projects.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {<span class="integer">0</span>}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_swing_statistics"><a class="anchor" href="#_sample_swing_statistics"></a>1.1.6. Statistics</h4>
<div class="paragraph">
<p>The following statistics show the amount tof lines per artifact required by both applications</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Java Sources             |     3 |    53 |
| Java Test Sources        |     1 |    48 |
| Java IntegTest Sources   |     1 |    27 |
| Models                   |     1 |    21 |
| Views                    |     1 |    83 |
| Controllers              |     1 |    23 |
| Services                 |     1 |    18 |
| Configuration            |     1 |    24 |
| Lifecycle                |     1 |    30 |
+--------------------------+-------+-------+
| Totals                   |    11 |   327 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Groovy Sources           |     3 |    52 |
| Groovy Test Sources      |     1 |    47 |
| Groovy IntegTest Sources |     1 |    27 |
| Models                   |     1 |     9 |
| Views                    |     1 |    24 |
| Controllers              |     1 |    14 |
| Services                 |     1 |    12 |
| Configuration            |     1 |    13 |
| Lifecycle                |     1 |    17 |
+--------------------------+-------+-------+
| Totals                   |    11 |   215 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_javafx"><a class="anchor" href="#_sample_javafx"></a>1.2. JavaFX</h3>
<div class="paragraph">
<p>JavaFx is a next generation UI toolkit and will eventually replace Swing, so it&#8217;s a good
idea to get started with it now. Among the several features found in JavaFX you&#8217;ll find</p>
</div>
<div class="ulist">
<ul>
<li>
<p>observable properties</p>
</li>
<li>
<p>component styling with CSS</p>
</li>
<li>
<p>FXML: a declarative format for defining UIs</p>
</li>
<li>
<p>and more!</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_sample_javafx_model"><a class="anchor" href="#_sample_javafx_model"></a>1.2.1. Model</h4>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/models/sample/javafx/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">javafx.beans.property.SimpleStringProperty</span>;
<span class="keyword">import</span> <span class="include">javafx.beans.property.StringProperty</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> StringProperty input;                                       <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> StringProperty output;                                      <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Nonnull</span>
    <span class="directive">public</span> <span class="directive">final</span> StringProperty inputProperty() {                       <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (input == <span class="predefined-constant">null</span>) {
            input = <span class="keyword">new</span> SimpleStringProperty(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>);
        }
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {                                <i class="conum" data-value="3"></i><b>(3)</b>
        inputProperty().set(input);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                          <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> input == <span class="predefined-constant">null</span> ? <span class="predefined-constant">null</span> : inputProperty().get();
    }

    <span class="annotation">@Nonnull</span>
    <span class="directive">public</span> <span class="directive">final</span> StringProperty outputProperty() {                      <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (output == <span class="predefined-constant">null</span>) {
            output = <span class="keyword">new</span> SimpleStringProperty(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>);
        }
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {                              <i class="conum" data-value="3"></i><b>(3)</b>
        outputProperty().set(output);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                         <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> output == <span class="predefined-constant">null</span> ? <span class="predefined-constant">null</span> : outputProperty().get();
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Pass-thru values to <code>Property</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Model makes use of JavaFX&#8217;s observable properties. These properties are roughly
equivalent in behavior to the ones we saw back in the <a href="#_swing">Swing</a> example, however
they provide much more behavior than that; values may be cached automatically for
example, avoiding bindings to be updated needlessly.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/models/sample/javafx/groovy/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.FXObservable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@FXObservable</span> <span class="predefined-type">String</span> input                                           <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@FXObservable</span> <span class="predefined-type">String</span> output                                          <i class="conum" data-value="1"></i><b>(1)</b>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Observable property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly to <code>@Observable</code> we find that Groovy based JavaFX models can use another AST
transformation named <code>@FXObservable</code>. This transformation generates equivalent byte code
to the Java based Model we saw earlier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_javafx_controller"><a class="anchor" href="#_sample_javafx_controller"></a>1.2.2. Controller</h4>
<div class="paragraph">
<p>Have a look at the controller for this application. See if you can spot the differences
between its Swing counterpart.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/controllers/sample/javafx/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                            <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                               <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Did you spot any differences? No? That&#8217;s because the two controllers are 100% identical.
How can this be? This is the power of separating concerns between MVC members. Because
the Controller only talks to the View via the Model, and the Model exposes an identical
contract for its properties we didn&#8217;t have to change the Controller at all.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/controllers/sample/javafx/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="predefined-type">SampleModel</span> model                                                      <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(model.input)
        runInsideUIAsync {                                                 <i class="conum" data-value="4"></i><b>(4)</b>
            model.output = result
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Opposed to its Swing counterpart here we have to add an explicit threading block when
updating model properties. This is because the <code>bind</code> node for JavaFX components is not
aware of the same rules than the <code>bind</code> node for Swing components. Nevertheless the
code remains short and to the point.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_javafx_service"><a class="anchor" href="#_sample_javafx_service"></a>1.2.3. Service</h4>
<div class="paragraph">
<p>Given that the service operates with raw data and has no ties to the toolkit in use we&#8217;d
expect no changes from the Swing example.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/services/sample/javafx/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/services/sample/javafx/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_javafx_view"><a class="anchor" href="#_sample_javafx_view"></a>1.2.4. View</h4>
<div class="paragraph">
<p>Views are the artifacts that are most impacted by the choice of UI toolkit. You may
remember we mentioned FXML as one of the strong features delivered by JavaFX and so
we chose to implement the Java based View by reading an fxml file by convention.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/views/sample/javafx/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">javafx.fxml.FXML</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.Group</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.Node</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.Scene</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.control.Label</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.control.TextField</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.paint.Color</span>;
<span class="keyword">import</span> <span class="include">javafx.stage.Stage</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.javafx.artifact.AbstractJavaFXGriffonView</span>;

<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractJavaFXGriffonView {
    <span class="directive">private</span> SampleController controller;                                  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                            <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@FXML</span>
    <span class="directive">private</span> <span class="predefined-type">TextField</span> input;                                              <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@FXML</span>
    <span class="directive">private</span> <span class="predefined-type">Label</span> output;                                                 <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        Stage stage = (Stage) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;emptyMap());
        stage.setTitle(getApplication().getConfiguration().getAsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">application.title</span><span class="delimiter">&quot;</span></span>));
        stage.setWidth(<span class="integer">400</span>);
        stage.setHeight(<span class="integer">120</span>);
        stage.setScene(init());
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, stage);  <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="comment">// build the UI</span>
    <span class="directive">private</span> Scene init() {
        Scene scene = <span class="keyword">new</span> Scene(<span class="keyword">new</span> <span class="predefined-type">Group</span>());
        scene.setFill(<span class="predefined-type">Color</span>.WHITE);

        Node node = loadFromFXML();
        model.inputProperty().bindBidirectional(input.textProperty());
        model.outputProperty().bindBidirectional(output.textProperty());
        ((<span class="predefined-type">Group</span>) scene.getRoot()).getChildren().addAll(node);
        connectActions(node, controller);                                 <i class="conum" data-value="4"></i><b>(4)</b>

        <span class="keyword">return</span> scene;
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Injected by FXMLLoader</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>FXMLLoader</code> can inject components to an instance as long as that instance exposes
fields annotated with <code>@FXML</code>; fields names must match component ids <em class="conum">2</em>
as defined in the fxml file, which is shown next:</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/resources/sample/javafx/java/sample.fxml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
</pre></td>
  <td class="code"><pre><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="comment">&lt;?import javafx.scene.control.Button?&gt;</span>
<span class="comment">&lt;?import javafx.scene.control.Label?&gt;</span>
<span class="comment">&lt;?import javafx.scene.control.TextField?&gt;</span>
<span class="comment">&lt;?import javafx.scene.layout.AnchorPane?&gt;</span>
<span class="tag">&lt;AnchorPane</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AnchorPane</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxHeight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">minHeight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">minWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">prefHeight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">80.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">384.0</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">xmlns:fx</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://javafx.com/fxml</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">fx:controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sample.javafx.java.SampleController</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;children&gt;</span>
        <span class="tag">&lt;Label</span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">14.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">14.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter your name:</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;TextField</span> <span class="attribute-name">fx:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">172.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">11.0</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">200.0</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;Button</span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">172.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">45.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">mnemonicParsing</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">200.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Say hello!</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">fx:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sayHelloActionTarget</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                         <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tag">&lt;Label</span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">14.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">80.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">360.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">fx:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/children&gt;</span>
<span class="tag">&lt;/AnchorPane&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Naming convention for automatic action binding</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please pay special attention to the <code>fx:id</code> given to the button. Griffon applies a naming
convention to match controller actions to JavaFX components that can handle said actions.
Let&#8217;s review what we have here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SampleController</code> exposes an action named <code>sayHello</code></p>
</li>
<li>
<p>the button has an <code>fx:id</code> value of <code>sayHelloActionTarget</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given this we infer that the <code>fx:id</code> value must be of the form <code>&lt;actionName&gt;ActionTarget</code>.
The naming convention is one of two steps, you must also connect the controller using
a helper method <em class="conum">4</em> as shown in the View.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/views/sample/javafx/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">SampleModel</span> model                                                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],
            <span class="key">sizeToScene</span>: <span class="predefined-constant">true</span>, <span class="key">centerOnScreen</span>: <span class="predefined-constant">true</span>) {                                         <i class="conum" data-value="2"></i><b>(2)</b>
            scene(<span class="key">fill</span>: WHITE, <span class="key">width</span>: <span class="integer">400</span>, <span class="key">height</span>: <span class="integer">120</span>) {
                anchorPane {
                    label(<span class="key">leftAnchor</span>: <span class="integer">14</span>, <span class="key">topAnchor</span>: <span class="integer">11</span>,
                          <span class="key">text</span>: application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                    textField(<span class="key">leftAnchor</span>: <span class="integer">172</span>, <span class="key">topAnchor</span>: <span class="integer">11</span>, <span class="key">prefWidth</span>: <span class="integer">200</span>,
                              <span class="key">text</span>: bind(model.inputProperty()))                               <i class="conum" data-value="3"></i><b>(3)</b>
                    button(<span class="key">leftAnchor</span>: <span class="integer">172</span>, <span class="key">topAnchor</span>: <span class="integer">45</span>, <span class="key">prefWidth</span>: <span class="integer">200</span>,
                           sayHelloAction)                                                     <i class="conum" data-value="4"></i><b>(4)</b>
                    label(<span class="key">leftAnchor</span>: <span class="integer">14</span>, <span class="key">topAnchor</span>: <span class="integer">80</span>, <span class="key">prefWidth</span>: <span class="integer">200</span>,
                        <span class="key">text</span>: bind(model.outputProperty()))                                    <i class="conum" data-value="3"></i><b>(3)</b>
                }
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Groovy version of the View uses the GroovyFX DSL instead of FXML. You&#8217;ll find that
this DSL is very similar to SwingBuilder.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_javafx_resources"><a class="anchor" href="#_sample_javafx_resources"></a>1.2.5. Resources</h4>
<div class="paragraph">
<p>Finally the resources for this application are identical to the Swing version.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {<span class="integer">0</span>}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_javafx_statistics"><a class="anchor" href="#_sample_javafx_statistics"></a>1.2.6. Statistics</h4>
<div class="paragraph">
<p>The following statistics show the amount tof lines per artifact required by both applications</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Java Sources             |     2 |    25 |
| Java Test Sources        |     1 |    54 |
| Models                   |     1 |    38 |
| Views                    |     1 |    48 |
| Controllers              |     1 |    23 |
| Services                 |     1 |    18 |
| Configuration            |     1 |    24 |
+--------------------------+-------+-------+
| Totals                   |     8 |   230 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Groovy Sources           |     2 |    24 |
| Groovy Test Sources      |     1 |    42 |
| Models                   |     1 |     9 |
| Views                    |     1 |    25 |
| Controllers              |     1 |    16 |
| Services                 |     1 |    12 |
| Configuration            |     1 |    13 |
+--------------------------+-------+-------+
| Totals                   |     8 |   141 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_lanterna"><a class="anchor" href="#_sample_lanterna"></a>1.3. Lanterna</h3>
<div class="paragraph">
<p><a href="http://code.google.com/p/lanterna/">Lanterna</a> is a Java library allowing you to write
easy semi-graphical user interfaces in a text-only environment, very similar to the
C library curses but with more functionality. Lanterna supports xterm compatible terminals
and terminal emulators such as konsole, gnome-terminal, putty, xterm and many more.
One of the main benefits of lanterna is that it&#8217;s not dependent on any native library
but runs 100% in pure Java.</p>
</div>
<div class="sect3">
<h4 id="_sample_lanterna_model"><a class="anchor" href="#_sample_lanterna_model"></a>1.3.1. Model</h4>
<div class="paragraph">
<p>Even though Lanterna UI components do not expose observable properties in any way
it&#8217;s a good thing to use observable properties in the Model, and so the following
Model is identical to the <a href="#_swing">Swing</a> version.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/models/sample/lanterna/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> <span class="predefined-type">String</span> input;                                                <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">String</span> output;                                               <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.input, <span class="local-variable">this</span>.input = input);     <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.output, <span class="local-variable">this</span>.output = output); <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Property mutator must fire a <code>PropertyChangeEvent</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For reasons we&#8217;ll see in the Groovy View and Controller we decided to skip a Model
for the Groovy version. This also demonstrates that even though and MVC group is the
smallest building block you can still configure how it&#8217;s assembled. Have a look at
the application&#8217;s configuration to find out how</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/conf/sample/lanterna/groovy/Config.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.lanterna.groovy

application {
    title = <span class="string"><span class="delimiter">'</span><span class="content">Lanterna + Groovy</span><span class="delimiter">'</span></span>
    startupGroups = [<span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span>]
    autoShutdown = <span class="predefined-constant">true</span>
}
mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.lanterna.groovy.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.lanterna.groovy.SampleController</span><span class="delimiter">'</span></span>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_lanterna_controller"><a class="anchor" href="#_sample_lanterna_controller"></a>1.3.2. Controller</h4>
<div class="paragraph">
<p>We find that for the Java version the Controler it&#8217;s identical to the <a href="#_swing">Swing</a>
and <a href="#_javafx">JavaFX</a> versions. For the Groovy one we notice that both <code>input</code>
and <code>output</code> view components are accessed directly. We know we&#8217;ve said in the past
that a Controller should never do this but because Lanterna exposes no bind mechanism
the Groovy binding implementation would look as verbose as the Java version; we
decided to take a shortcut for demonstrations purposes.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/controllers/sample/lanterna/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                            <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                               <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/controllers/sample/lanterna/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.lanterna.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    FactoryBuilderSupport builder                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(builder.input.text)
        runInsideUIAsync {                                                 <i class="conum" data-value="4"></i><b>(4)</b>
            builder.output.text = result
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sample_lanterna_service"><a class="anchor" href="#_sample_lanterna_service"></a>1.3.3. Service</h4>
<div class="paragraph">
<p>Again, services should not be affected by the choice of UI tookit so the following
Service definitions are identical to the previous ones be saw earlier.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/services/sample/lanterna/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/services/sample/lanterna/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.lanterna.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_lanterna_view"><a class="anchor" href="#_sample_lanterna_view"></a>1.3.4. View</h4>
<div class="paragraph">
<p>We&#8217;d expect the View to follow the same pattern we&#8217;ve seen in the previous examples,
that is, create two components that will be bound to model properties and a button
that&#8217;s connected to a Controller action. Here we see that the Java version is rather
verbose due to the fact that Lanterna has no observable UI components. This is the
reason for which we must explicitly mode the value of the <code>input</code> component into
the <code>input</code> Model property as soon as the button is clicked.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/views/sample/lanterna/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.Window</span>;
<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.component.Label</span>;
<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.component.Panel</span>;
<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.component.TextBox</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.lanterna.support.LanternaAction</span>;
<span class="keyword">import</span> <span class="include">griffon.lanterna.widgets.MutableButton</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.lanterna.artifact.AbstractLanternaGriffonView</span>;

<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeEvent</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeListener</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractLanternaGriffonView {
    <span class="directive">private</span> SampleController controller;                                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        <span class="predefined-type">Window</span> window = (<span class="predefined-type">Window</span>) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;emptyMap());
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, window);        <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="predefined-type">Panel</span> panel = <span class="keyword">new</span> <span class="predefined-type">Panel</span>(<span class="predefined-type">Panel</span>.Orientation.VERTICAL);

        panel.addComponent(<span class="keyword">new</span> <span class="predefined-type">Label</span>(getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">name.label</span><span class="delimiter">&quot;</span></span>)));

        <span class="directive">final</span> TextBox input = <span class="keyword">new</span> TextBox();
        panel.addComponent(input);

        LanternaAction sayHelloAction = toolkitActionFor(controller, <span class="string"><span class="delimiter">&quot;</span><span class="content">sayHello</span><span class="delimiter">&quot;</span></span>);
        <span class="directive">final</span> <span class="predefined-type">Runnable</span> runnable = sayHelloAction.getRunnable();
        sayHelloAction.setRunnable(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                              <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setInput(input.getText());
                runnable.run();
            }
        });
        panel.addComponent(<span class="keyword">new</span> MutableButton(sayHelloAction));                   <i class="conum" data-value="4"></i><b>(4)</b>

        <span class="directive">final</span> <span class="predefined-type">Label</span> output = <span class="keyword">new</span> <span class="predefined-type">Label</span>();
        panel.addComponent(output);
        model.addPropertyChangeListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">PropertyChangeListener</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> propertyChange(<span class="predefined-type">PropertyChangeEvent</span> evt) {
                output.setText(<span class="predefined-type">String</span>.valueOf(evt.getNewValue()));
            }
        });

        window.addComponent(panel);
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Fortunately we can rely on the observable <code>output</code> Model property to write back the
value to the <code>output</code> component as soon as said property gets updated.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/views/sample/lanterna/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.lanterna.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>) {                                                    <i class="conum" data-value="2"></i><b>(2)</b>
                verticalLayout()
                label(application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                textBox(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>)
                button(sayHelloAction)                                                         <i class="conum" data-value="3"></i><b>(3)</b>
                label(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">output</span><span class="delimiter">'</span></span>)
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here we can certify there&#8217;s no binding code in the View, hence why the Controller has
to access UI components directly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_lanterna_resources"><a class="anchor" href="#_sample_lanterna_resources"></a>1.3.5. Resources</h4>
<div class="paragraph">
<p>The resources file is identical to the ones found in the other applications. There&#8217;s
in fact no changes brought by the choice of UI toolkit here.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {<span class="integer">0</span>}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_lanterna_statistics"><a class="anchor" href="#_sample_lanterna_statistics"></a>1.3.6. Statistics</h4>
<div class="paragraph">
<p>The following statistics show the amount tof lines per artifact required by both applications</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Java Sources             |     2 |    25 |
| Java Test Sources        |     1 |    55 |
| Models                   |     1 |    21 |
| Views                    |     1 |    53 |
| Controllers              |     1 |    23 |
| Services                 |     1 |    18 |
| Configuration            |     1 |    24 |
+--------------------------+-------+-------+
| Totals                   |     8 |   219 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Groovy Sources           |     2 |    24 |
| Groovy Test Sources      |     1 |    54 |
| Views                    |     1 |    18 |
| Controllers              |     1 |    16 |
| Services                 |     1 |    12 |
| Configuration            |     1 |    12 |
+--------------------------+-------+-------+
| Totals                   |     7 |   136 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_pivot"><a class="anchor" href="#_sample_pivot"></a>1.4. Pivot</h3>
<div class="paragraph">
<p><a href="http://pivot.apache.org">Apache Pivot</a> is an open-source platform for building installable
Internet applications (IIAs). It combines the enhanced productivity and usability features
of a modern user interface toolkit with the robustness of the Java platform.</p>
</div>
<div class="paragraph">
<p>We decided to implement this application in the same fashion as the <a href="#_lanterna">Lanterna</a>
application because of the same reason: Pivot UI components are not observable. You&#8217;ll
notice that the Java Model is identical and there&#8217;s no Groovy Model</p>
</div>
<div class="sect3">
<h4 id="_sample_pivot_model"><a class="anchor" href="#_sample_pivot_model"></a>1.4.1. Model</h4>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/models/sample/pivot/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> <span class="predefined-type">String</span> input;                                                <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">String</span> output;                                               <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.input, <span class="local-variable">this</span>.input = input);     <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.output, <span class="local-variable">this</span>.output = output); <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Property mutator must fire a <code>PropertyChangeEvent</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sample_pivot_controller"><a class="anchor" href="#_sample_pivot_controller"></a>1.4.2. Controller</h4>
<div class="paragraph">
<p>The Pivot Controllers follow the same rules than the Lanterna ones, and as such you&#8217;ll
see there are no differences between one another.</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/controllers/sample/pivot/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                            <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                               <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">sample-pivot-groovy/griffon-app/controllers/sample/pivot/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.pivot.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    FactoryBuilderSupport builder                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(builder.input.text)
        runInsideUIAsync {                                                 <i class="conum" data-value="4"></i><b>(4)</b>
            builder.output.text = result
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sample_pivot_service"><a class="anchor" href="#_sample_pivot_service"></a>1.4.3. Service</h4>
<div class="paragraph">
<p>Services remain constant again, what a surprise, right?</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/services/sample/pivot/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-pivot-groovy/griffon-app/services/sample/pivot/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.pivot.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_pivot_view"><a class="anchor" href="#_sample_pivot_view"></a>1.4.4. View</h4>
<div class="paragraph">
<p>If you squint your eyes you&#8217;ll see that the View is almost identical to the <a href="#_swing">Swing</a>
and <a href="#_lanterna">Lanterna</a> Views. Besides using toolkit specific components we notice
that both <code>input</code> and <code>output</code> Model properties have to be explicitly bound using
the native support exposed by the toolkit.</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/views/sample/pivot/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
<strong>60</strong>
61
62
63
64
65
66
67
68
69
<strong>70</strong>
71
72
73
74
75
76
77
78
79
<strong>80</strong>
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">griffon.pivot.support.PivotAction</span>;
<span class="keyword">import</span> <span class="include">griffon.pivot.support.adapters.TextInputContentAdapter</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.serialization.SerializationException</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.BoxPane</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.Button</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.Label</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.Orientation</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.PushButton</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.TextInput</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk.Window</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.pivot.artifact.AbstractPivotGriffonView</span>;

<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeEvent</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeListener</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractPivotGriffonView {
    <span class="directive">private</span> SampleController controller;                                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        <span class="predefined-type">Window</span> window = (<span class="predefined-type">Window</span>) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;emptyMap());
        window.setTitle(getApplication().getConfiguration().getAsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">application.title</span><span class="delimiter">&quot;</span></span>));
        window.setMaximized(<span class="predefined-constant">true</span>);
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, window);        <i class="conum" data-value="2"></i><b>(2)</b>

        BoxPane vbox = <span class="keyword">new</span> BoxPane(Orientation.VERTICAL);
        <span class="keyword">try</span> {
            vbox.setStyles(<span class="string"><span class="delimiter">&quot;</span><span class="content">{horizontalAlignment:'center', verticalAlignment:'center'}</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">catch</span> (SerializationException e) {
            <span class="comment">// ignore</span>
        }

        vbox.add(<span class="keyword">new</span> <span class="predefined-type">Label</span>(getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">name.label</span><span class="delimiter">&quot;</span></span>)));

        TextInput input = <span class="keyword">new</span> TextInput();
        input.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">inputField</span><span class="delimiter">&quot;</span></span>);
        input.getTextInputContentListeners().add(<span class="keyword">new</span> TextInputContentAdapter() {  <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> textChanged(TextInput arg0) {
                model.setInput(arg0.getText());
            }
        });
        vbox.add(input);

        PivotAction sayHelloAction = toolkitActionFor(controller, <span class="string"><span class="delimiter">&quot;</span><span class="content">sayHello</span><span class="delimiter">&quot;</span></span>);
        <span class="directive">final</span> <span class="predefined-type">Button</span> button = <span class="keyword">new</span> PushButton(sayHelloAction.getName());
        button.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">sayHelloButton</span><span class="delimiter">&quot;</span></span>);
        button.setAction(sayHelloAction);                                        <i class="conum" data-value="4"></i><b>(4)</b>
        vbox.add(button);

        <span class="directive">final</span> TextInput output = <span class="keyword">new</span> TextInput();
        output.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">outputField</span><span class="delimiter">&quot;</span></span>);
        output.setEditable(<span class="predefined-constant">false</span>);
        model.addPropertyChangeListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">PropertyChangeListener</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> propertyChange(<span class="predefined-type">PropertyChangeEvent</span> evt) {
                output.setText(<span class="predefined-type">String</span>.valueOf(evt.getNewValue()));
            }
        });
        vbox.add(output);

        window.setContent(vbox);
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">sample-pivot-groovy/griffon-app/views/sample/pivot/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
</pre></td>
  <td class="code"><pre><span class="keyword">package</span> sample.pivot.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>, <span class="key">maximized</span>: <span class="predefined-constant">true</span>) {                                   <i class="conum" data-value="2"></i><b>(2)</b>
                vbox(<span class="key">styles</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">{horizontalAlignment:'center', verticalAlignment:'center'}</span><span class="delimiter">&quot;</span></span>) {
                    label(application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                    textInput(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>)
                    button(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">sayHelloButton</span><span class="delimiter">'</span></span>, sayHelloAction)                               <i class="conum" data-value="3"></i><b>(3)</b>
                    textInput(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">output</span><span class="delimiter">'</span></span>, <span class="key">editable</span>: <span class="predefined-constant">false</span>)
                }
            }
        }
    }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sample_pivot_resources"><a class="anchor" href="#_sample_pivot_resources"></a>1.4.5. Resources</h4>
<div class="paragraph">
<p>The resource file, left untouched once more.</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {<span class="integer">0</span>}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_pivot_statistics"><a class="anchor" href="#_sample_pivot_statistics"></a>1.4.6. Statistics</h4>
<div class="paragraph">
<p>The following statistics show the amount tof lines per artifact required by both applications</p>
</div>
<div class="listingblock">
<div class="title">Java</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Java Sources             |     2 |    25 |
| Java Test Sources        |     1 |    48 |
| Java IntegTest Sources   |     1 |    68 |
| Models                   |     1 |    21 |
| Views                    |     1 |    67 |
| Controllers              |     1 |    23 |
| Services                 |     1 |    18 |
| Configuration            |     1 |    24 |
+--------------------------+-------+-------+
| Totals                   |     9 |   294 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code>+--------------------------+-------+-------+
| Name                     | Files |  LOC  |
+--------------------------+-------+-------+
| Groovy Sources           |     2 |    24 |
| Groovy Test Sources      |     1 |    48 |
| Groovy IntegTest Sources |     1 |    39 |
| Views                    |     1 |    20 |
| Controllers              |     1 |    16 |
| Services                 |     1 |    12 |
| Configuration            |     1 |    12 |
+--------------------------+-------+-------+
| Totals                   |     8 |   171 |
+--------------------------+-------+-------+</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_builder_nodes"><a class="anchor" href="#_appendix_builder_nodes"></a>Appendix E: Builder Nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following tables summarizes all builder nodes supplied by the default UI Toolkit
dependencies</p>
</div>
<div class="sect2">
<h3 id="_builder_nodes_swing"><a class="anchor" href="#_builder_nodes_swing"></a>1.1. Swing</h3>

</div>
<div class="sect2">
<h3 id="_builder_nodes_javafx"><a class="anchor" href="#_builder_nodes_javafx"></a>1.2. JavaFX</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 19. griffon/builder/javafx/JavaFXBuilderCustomizer</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accordion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Accordion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.javafx.support.JavaFXAction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">affine</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">anchorPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.AnchorPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Stage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">arc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Arc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">arcTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.ArcTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">areaChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.AreaChartBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">barChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.BarChartBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">blend</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Blend</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bloom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Bloom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">borderPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.BorderPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bottom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.BorderPanePosition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bottomInput</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boxBlur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.BoxBlur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bubbleChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.BubbleChartBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bumpInput</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">button</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Button</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">categoryAxis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.chart.CategoryAxis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">center</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.BorderPanePosition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.CheckBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkMenuItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">choiceBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ChoiceBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">circle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Circle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clip</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">closePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.ClosePath</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">colorAdjust</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.ColorAdjust</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">colorInput</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.ColorInput</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.GridRowColumn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">constraint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.GridConstraint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Parent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.Titled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contentInput</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contextMenu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ContextMenu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cubicCurve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.CubicCurve</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cubicCurveTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.CubicCurveTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">customMenuItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">displacementMap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.DisplacementMap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">distant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Light.Distant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dividerPosition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.DividerPosition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dropShadow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.DropShadow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">effect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Effect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ellipse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Ellipse</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fadeTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.FadeTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fileChooser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.stage.FileChooser</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.paint.Paint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fillTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.FadeTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.stage.FilterChooser.ExtensionFilter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flowPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.FlowPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fxml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gaussianBlur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.GaussianBlur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">glow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Glow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">graphic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.Graphic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gridPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.GridPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">group</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Group</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hLineTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.HLineTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.HBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">htmlEditor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.web.HTMLEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hyperlink</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Hyperlink</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.image.Image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageInput</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.ImageInput</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.image.ImageView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">innerShadow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.InnerShadow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Label</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.BorderPanePosition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lighting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Lighting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">line</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Line</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lineChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.LineChartBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lineTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.LineTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linearGradient</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.LinearGradientBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ListView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mediaPlayer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.media.MediaPlayer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mediaView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.media.MediaView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">motionBlur</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.MotionBlur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">moveTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.MoveTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">numberAxis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.chart.NumberAxis</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onBranchCollapse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onBranchExpand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onChildrenModification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onDragDetected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onDragDone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onDragDropped</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onDragEntered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onDragExited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onDragOver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onEditCancel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onEditCommit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onEditStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onGraphicChanged</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMouseClicked</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMouseDragged</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMouseEntered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMouseExited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMousePressed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMouseReleased</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onMouseWheelMoved</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.event.EventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onTreeItemCountChange</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onTreeNotification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">onValueChanged</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.ClosureEventHandler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.Pane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parallelTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.ParallelTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pathTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.PathTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pauseTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.PauseTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">perspectiveTransform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.PerspectiveTransform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pieChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.chart.PieChart</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Light.Point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">polygon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Polygon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">polyline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Polyline</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">popup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.stage.Popup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">progressBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ProgressBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">progressIndicator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ProgressIndicator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quadCurve</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.QuadCurve</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quadCurveTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.QuadCurveTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">radialGradient</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.RadialGradientBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">radioButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.RadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">radioMenuItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rectangle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.Rectangle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">reflection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Reflection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.BorderPanePosition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rotate</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rotateTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.RotateTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.GridRowColumn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scaleTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.ScaleTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scatterChart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.builders.ScatterChartBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scene</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Scene</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scrollBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ScrollBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scrollPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ScrollPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">separatorMenuItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sepiaTone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.SepiaTone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sequentialTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.SequentialTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.chart.XYChart.Series</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">shadow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Shadow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">shear</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">slider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Slider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">splitMenuButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">splitPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.SplitPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.effect.Light.Spot</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stackPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.StackPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.Stage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.paint.Stop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stroke</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.paint.Paint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">strokeTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.StrokeTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stylesheets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.List</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">svgPath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.SVGPath</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Tab</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tabPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TabPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tableColumn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TableColumn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tableRow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TableRow</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tableView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TableView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.text.Text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textArea</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TextArea</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textField</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TextField</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tilePane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.TilePane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.Titled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">titledPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TitledPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toggleButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ToggleButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toolBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.ToolBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tooltip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.Tooltip</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">top</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">groovyx.javafx.factory.BorderPanePosition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">topInput</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.Transition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">translate</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">translateTransition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.animation.TranslateTransition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">treeItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TreeItem</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">treeView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.control.TreeView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vLineTo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.shape.VLineTo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.layout.VBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">webEngine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.web.WebEngine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">webView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javafx.scene.web.WebView</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_builder_nodes_lanterna"><a class="anchor" href="#_builder_nodes_lanterna"></a>1.3. Lanterna</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 20. griffon/builder/lanterna/LanternaBuilderCustomizer</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.lanterna.support.LanternaAction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">actionListBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.ActionListBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">actions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.ArrayList</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.Window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">borderLayout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.layout.BorderLayout</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">button</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.lanterna.widgets.MutableButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.CheckBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.Component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emptySpace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.EmptySpace</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.Panel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">horisontalLayout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.layout.HorisontalLayout</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">horizontalLayout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.layout.HorisontalLayout</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.Label</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.ArrayList</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">panel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.Panel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">passwordBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.PasswordBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">progressBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.ProgressBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.Table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textArea</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.TextArea</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textBox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.TextBox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.component.Panel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">verticalLayout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.layout.VerticalLayout</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">widget</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.googlecode.lanterna.gui.Component</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_builder_nodes_pivot"><a class="anchor" href="#_builder_nodes_pivot"></a>1.4. Pivot</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 21. griffon/builder/pivot/PivotBuilderCustomizer</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accordion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Accordion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.pivot.imlp.DefaultAction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">actions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.ArrayList</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activityIndicator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ActivityIndicator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">baselineDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.BaselineDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">blurDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.BlurDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">border</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Border</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bounds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Bounds</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">box</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.BoxPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boxPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.BoxPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">button</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.PushButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">buttonData</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.ButtonData</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">buttonDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.ButtonDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">buttonGroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ButtonGroup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bxml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">calendar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Calendar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">calendarButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.CalendarButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">calendarButtonDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.CalendarButtonDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">calendarDateSpinnerData</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.CalendarDateSpinnerData</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cardPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.CardPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Checkbox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clipDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.ClipDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">colorChooser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ColorChooser</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">colorChooserButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ColorChooserButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Container</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dialog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Dialog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dimensions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Dimensions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dropShadowDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.DropShadowDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingCircular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Circular</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingCubic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Cubic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingExponential</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Exponential</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingLinear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingQuadratic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Quadratic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingQuartic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Quartic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingQuintic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Quintic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">easingSine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.Sine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expander</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Expander</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fadeDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.FadeDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fileBrowser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.FileBrowser</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fileBrowserSheet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.FileBrowserSheet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flowPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.FlowPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">form</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Form</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formFlag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.From.Flag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formSection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Form.Section</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">frame</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Frame</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">grayscaleDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.GrayscaleDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gridFiller</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.GridPane.Filler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gridPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.GridPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gridRow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.GridPane.Row</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.BoxPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imageView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ImageView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">insets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Insets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Label</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linkButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.LinkButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linkButtonDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.LinkButtonDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ListButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listButtonColorItemRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.ListButtonColorItemRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listButtonDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.ListButtonDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">listView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ListView</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Menu</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.MenuBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuBarItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.MenuBar.Item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuBarItemDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.MenuBarItemDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.MenuButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuButtonDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.MenuButtonDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuItem</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Menu.Item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuItemDataRenderer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.MenuItemDataRenderer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">menuPopup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.MenuPopup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Meter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">noparent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.ArrayList</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">numericSpinnerData</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.content.NumericSpinnerData</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">overlayDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.OverlayDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">palette</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Palette</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">panel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Panel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">panorama</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Panorama</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">picture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.media.Picture</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pushButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.PushButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">radioButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.RadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">reflectionDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.ReflectionDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rollup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Rollup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rotationDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.RotationDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">saturationDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.SaturationDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scaleDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.ScaleDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scrollBar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ScrollBar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scrollBarScope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ScrollBar.Scope</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scrollPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.ScrollPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">separator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Separator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">shadeDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.ShadeDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sheet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Sheet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">slider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Slider</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">span</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Span</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spinner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Spiner</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">splitPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.SplitPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stackPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.StackPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tabPane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TabPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tablePane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TablePane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tablePaneColumn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TablePane.Column</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tablePaneFiller</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TablePane.Filler</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tablePaneRow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TablePane.Row</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.TagDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textArea</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TextArea</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">textInput</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.TextInput</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tooltip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Tooltip</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">translationDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.TranslationDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vbox</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.BoxPane</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">watermarkDecorator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.effects.WatermarkDecorator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">widget</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">window</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.apache.pivot.wtk.Window</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.2.0<br>
Last updated 2015-02-28 17:14:47 CET
</div>
</div>
</body>
</html>
